(this.webpackJsonpAppsus=this.webpackJsonpAppsus||[]).push([[0],{35:function(e,t,a){e.exports=a(63)},40:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(31),i=a.n(o),s=a(1),l=a(2),c=a(4),u=a(3),m=a(5),p=a(14),d=a(9),h=(a(40),function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"landing-container"},r.a.createElement("div",{className:"landing-block main"},r.a.createElement("img",{alt:"logo",src:"images/logo.png"}),r.a.createElement("h1",null,"Appsus"),r.a.createElement("h2",null,"Three powerful Apps in a single place - Simple and Elegant.")),r.a.createElement("div",{className:"landing-block books"},r.a.createElement("div",{className:"block-text"},r.a.createElement("h2",null,"Books"),r.a.createElement("h4",null,"All the Books are just one click away!"))),r.a.createElement("div",{className:"landing-block keep"},r.a.createElement("div",{className:"block-text"},r.a.createElement("h2",null,"Keep"),r.a.createElement("h4",null,"Keep and save everything you wish!"))),r.a.createElement("div",{className:"landing-block mail"},r.a.createElement("div",{className:"block-text"},r.a.createElement("h2",null,"Mail"),r.a.createElement("h4",null,"Powerful mail app - with all features needed."))))}}]),t}(r.a.Component)),f=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"Some About page")}}]),t}(r.a.Component),g=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"Could not find this page")}}]),t}(r.a.Component),b=a(6),v={on:function(e,t){var a=function(e){var a=e.detail;return t(a)};return window.addEventListener(e,a),function(){return window.removeEventListener(e,a)}},emit:y,callModal:function(e,t){return y("callModal",{modalType:e,props:t})}};function y(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}var E=a(32),k=a.n(E),C={saveToStorage:function(e,t){var a=JSON.stringify(t);localStorage.setItem(e,a)},loadFromStorage:function(e,t){return localStorage.getItem(e)?JSON.parse(localStorage.getItem(e)):t}};var O=function e(t){Object(s.a)(this,e);var a=t.volumeInfo;this.id=t.id,this.title=a.title,this.subtitle=a.subtitle?a.subtitle:"N/A",this.authors=a.authors?a.authors:["N/A"],this.publishedDate=a.publishedDate,this.description=a.description?a.description:"N/A",this.pageCount=a.pageCount?a.pageCount:0,this.categories=a.categories?a.categories:["N/A"],this.thumbnail=a.imageLinks?a.imageLinks.thumbnail:"https://www.globaluniversityalliance.org/wp-content/uploads/2017/10/No-Cover-Image-01.png",this.language=a.language?a.language:"N/A",this.listPrice={amount:a.listPrice?a.listPrice.amount:1,currencyCode:a.listPrice?a.listPrice.currencyCode:"USD",isOnSale:!1},this.reviews=[]},w={addBookFromGoogle:function(e){var t=new O(e);return(j=j.slice()).push(t),C.saveToStorage("gBooks",j),Promise.resolve(t)},getBooks:function(e,t){var a=e?j.filter((function(t){return!e||t.title.toLowerCase().includes(e.name.toLowerCase())&&t.listPrice.amount<=e.price})):j.slice(),n=Math.ceil(a.length/t.booksPerPage),r=t.currentPage<1||t.currentPage>n||!t.currentPage?1:t.currentPage,o=(r-1)*t.booksPerPage,i=o+t.booksPerPage;return a=a.slice(o,i),Promise.resolve({books:a,currentPage:r,maxPage:n})},getBookById:function(e){var t=j.find((function(t){return t.id===e}));return Promise.resolve(t)},deleteBookById:function(e){return j=j.filter((function(t){return t.id===e})),C.saveToStorage("gBooks",j),Promise.resolve(!0)},editBookById:function(e,t){var a;return j=j.map((function(n){return n.id===e?a=Object(b.a)({},n,{},t):n})),C.saveToStorage("gBooks",j),Promise.resolve(a)},searchBooks:function(e){return k.a.get("https://www.googleapis.com/books/v1/volumes?q=".concat(e,"&key=AIzaSyDARh-8oqGeyXu3wApEP7jwP2w_NRjTdY8")).then((function(e){return e.data.items})).catch((function(e){return console.log(e)}))},getPriceString:function(e,t){switch(t){case"USD":return"$"+e;case"ILS":return e+"\u20aa";case"EUR":return"\u20ac"+e}}},j=function(){var e=C.loadFromStorage("gBooks",null);return e||[{id:"OXeMG8wNskc",title:"metus hendrerit",subtitle:"mi est eros convallis auctor arcu dapibus himenaeos",authors:["Barbara","Cartland"],publishedDate:1999,description:"placerat nisi sodales suscipit tellus tincidunt mauris elit sit luctus interdum ad dictum platea vehicula conubia fermentum habitasse congue suspendisse",pageCount:713,categories:["Computers","Hack"],thumbnail:"http://coding-academy.org/books-photos/20.jpg",reviews:[],language:"en",listPrice:{amount:109,currencyCode:"EUR",isOnSale:!1}},{id:"JYOJa2NpSCq",title:"morbi",subtitle:"lorem euismod dictumst inceptos mi",authors:["Barbara","Cartland"],publishedDate:1978,description:"aliquam pretium lorem laoreet etiam odio cubilia iaculis placerat aliquam tempor nisl auctor",pageCount:129,categories:["Computers","Hack"],thumbnail:"http://coding-academy.org/books-photos/14.jpg",reviews:[],language:"sp",listPrice:{amount:44,currencyCode:"EUR",isOnSale:!0}},{id:"1y0Oqts35DQ",title:"at viverra venenatis",subtitle:"gravida libero facilisis rhoncus urna etiam",authors:["Dr.Seuss"],publishedDate:1999,description:"lorem molestie ut euismod ad quis mi ultricies nisl cursus suspendisse dui tempor sit suscipit metus etiam euismod tortor sagittis habitant",pageCount:972,categories:["Computers ","Hack"],thumbnail:"http://coding-academy.org/books-photos/2.jpg",reviews:[],language:"he",listPrice:{amount:108,currencyCode:"ILS",isOnSale:!1}},{id:"kSnfIJyikTP",title:"dictum",subtitle:"augue eu consectetur class curabitur conubia ligula in ullamcorper",authors:["Danielle","Steel"],publishedDate:1978,description:"interdum inceptos mauris habitant primis neque tempus lacus morbi auctor cras consectetur euismod vehicula neque netus enim vivamus augue molestie imperdiet tincidunt aliquam",pageCount:303,categories:["Computers ","Hack"],thumbnail:"http://coding-academy.org/books-photos/16.jpg",reviews:[],language:"en",listPrice:{amount:30,currencyCode:"EUR",isOnSale:!0}},{id:"f4iuVmbuKCC",title:"sem himenaeos aptent",subtitle:"interdum per habitasse luctus purus est",authors:["Dr.Seuss"],publishedDate:2011,description:"et vehicula faucibus amet accumsan lectus cras nulla cubilia arcu neque litora mi habitasse quis amet augue facilisis sed",pageCount:337,categories:["Computers ","Hack"],thumbnail:"http://coding-academy.org/books-photos/12.jpg",reviews:[],language:"sp",listPrice:{amount:19,currencyCode:"USD",isOnSale:!1}},{id:"U2rfZO6oBZf",title:"mi ante posuere",subtitle:"sapien curae consectetur ultrices fringilla blandit ipsum curae faucibus",authors:["Leo Tolstoy"],publishedDate:1978,description:"senectus habitant nam imperdiet nostra elit dapibus nisl adipiscing in",pageCount:748,categories:["Computers","Hack"],thumbnail:"http://coding-academy.org/books-photos/1.jpg",reviews:[],language:"en",listPrice:{amount:91,currencyCode:"USD",isOnSale:!0}},{id:"xI0wrXaaAcq",title:"non",subtitle:"leo tortor per dapibus mattis ut conubia porttitor ligula viverra",authors:["Leo Tolstoy"],publishedDate:2011,description:"nec scelerisque id cursus platea sit ullamcorper bibendum ultrices tempus ante mi aliquet cras tortor dapibus dictum scelerisque",pageCount:65,categories:["Computers ","Hack"],thumbnail:"http://coding-academy.org/books-photos/14.jpg",reviews:[],language:"he",listPrice:{amount:90,currencyCode:"USD",isOnSale:!1}},{id:"9laHCEdSpFy",title:"tristique",subtitle:"consectetur a eu tincidunt condimentum amet nisi",authors:["Dr.Seuss"],publishedDate:1999,description:"magna quisque venenatis laoreet purus in semper habitant proin pellentesque sed egestas cursus faucibus nam enim id sit mi ligula risus curabitur senectus curabitur sodales fames sem",pageCount:299,categories:["Computers ","Hack"],thumbnail:"http://coding-academy.org/books-photos/11.jpg",reviews:[],language:"he",listPrice:{amount:176,currencyCode:"EUR",isOnSale:!1}},{id:"nGhVwZvGCGp",title:"urna ornare gravida",subtitle:"sem vestibulum semper convallis pharetra tempor himenaeos ut",authors:["Jin Yong"],publishedDate:2011,description:"porttitor nisl sodales id eu tellus venenatis laoreet auctor dictumst nulla",pageCount:803,categories:["Computers ","Hack"],thumbnail:"http://coding-academy.org/books-photos/10.jpg",reviews:[],language:"sp",listPrice:{amount:116,currencyCode:"USD",isOnSale:!0}},{id:"Q8Q9Lsd03BD",title:"consequat neque volutpat",subtitle:"vel quis taciti fermentum feugiat ullamcorper curae praesent",authors:["Dr.Seuss"],publishedDate:1978,description:"curabitur bibendum in dolor neque magna phasellus arcu nulla cubilia senectus maecenas ullamcorper neque accumsan facilisis dictumst ornare",pageCount:891,categories:["Computers ","Hack"],thumbnail:"http://coding-academy.org/books-photos/5.jpg",reviews:[],language:"en",listPrice:{amount:145,currencyCode:"EUR",isOnSale:!1}},{id:"bd7a76kARao",title:"risus",subtitle:"pretium bibendum pharetra curabitur quisque dictumst",authors:["Danielle","Steel"],publishedDate:2018,description:"auctor amet nostra luctus molestie proin platea cubilia netus sed purus egestas a primis eu tristique interdum litora lorem venenatis mattis senectus",pageCount:86,categories:["Computers ","Hack"],thumbnail:"http://coding-academy.org/books-photos/16.jpg",reviews:[],language:"sp",listPrice:{amount:157,currencyCode:"ILS",isOnSale:!0}},{id:"qKyG0vqeO3e",title:"interdum etiam vulputate",subtitle:"velit sapien eget tincidunt nunc tortor",authors:["Danielle","Steel"],publishedDate:2018,description:"aenean mauris porta netus accumsan turpis etiam vestibulum vivamus sagittis nullam nec tellus quam mattis est pellentesque nisi litora sit ad",pageCount:882,categories:["Computers ","Hack"],thumbnail:"http://coding-academy.org/books-photos/17.jpg",reviews:[],language:"sp",listPrice:{amount:57,currencyCode:"USD",isOnSale:!0}},{id:"2RvT48ZNInj",title:"sagittis justo",subtitle:"etiam primis proin praesent placerat nisi fermentum nisi",authors:["Agatha Christie"],publishedDate:2011,description:"nec faucibus arcu suspendisse tempus potenti lobortis aliquam quisque augue integer consectetur etiam ultrices curabitur tristique metus",pageCount:598,categories:["Computers ","Hack"],thumbnail:"http://coding-academy.org/books-photos/8.jpg",reviews:[],language:"en",listPrice:{amount:167,currencyCode:"ILS",isOnSale:!1}},{id:"5z2s9pDXAYj",title:"quam ullamcorper himenaeos",subtitle:"ut placerat eu dapibus sapien sodales laoreet",authors:["Danielle","Steel"],publishedDate:1999,description:"etiam nec aliquam euismod platea vel laoreet quisque condimentum sapien neque ut aliquam torquent in nam",pageCount:608,categories:["Computers ","Hack"],thumbnail:"http://coding-academy.org/books-photos/3.jpg",reviews:[],language:"he",listPrice:{amount:150,currencyCode:"USD",isOnSale:!0}},{id:"zBZu5cDEWha",title:"quis",subtitle:"suscipit turpis etiam turpis libero lobortis",authors:["Jin Yong"],publishedDate:2011,description:"etiam pretium urna fusce lobortis curae viverra aptent metus semper nisi litora feugiat elementum purus nunc consequat lorem ultricies non primis phasellus sociosqu donec dolor",pageCount:583,categories:["Computers ","Hack"],thumbnail:"http://coding-academy.org/books-photos/6.jpg",reviews:[],language:"en",listPrice:{amount:58,currencyCode:"ILS",isOnSale:!0}},{id:"aOI7tQuPZ2f",title:"aliquam aliquet dapibus",subtitle:"neque eu purus euismod placerat adipiscing odio egestas consequat",authors:["Leo Tolstoy"],publishedDate:2011,description:"dolor morbi malesuada eleifend purus taciti sit interdum aliquet commodo ut libero tincidunt",pageCount:497,categories:["Computers ","Hack"],thumbnail:"http://coding-academy.org/books-photos/7.jpg",reviews:[],language:"en",listPrice:{amount:78,currencyCode:"USD",isOnSale:!1}},{id:"WBooB82Uvwu",title:"class",subtitle:"elit enim ultricies amet imperdiet a molestie class elementum venenatis",authors:["Danielle","Steel"],publishedDate:1999,description:"rhoncus odio netus consectetur aenean hendrerit massa scelerisque elementum aptent lobortis pharetra maecenas quam nulla volutpat turpis non habitasse aenean ante sodales lobortis quisque libero imperdiet gravida eleifend nulla",pageCount:804,categories:["Computers ","Hack"],thumbnail:"http://coding-academy.org/books-photos/10.jpg",reviews:[],language:"en",listPrice:{amount:118,currencyCode:"ILS",isOnSale:!1}},{id:"xm1z5bbZjlS",title:"vitae",subtitle:"class habitant at commodo semper ligula a bibendum",authors:["Leo Tolstoy"],publishedDate:1999,description:"himenaeos quis iaculis orci libero egestas quam varius primis erat lacus facilisis blandit dictum tristique interdum litora quisque purus senectus pretium purus",pageCount:231,categories:["Computers ","Hack"],thumbnail:"http://coding-academy.org/books-photos/12.jpg",reviews:[],language:"he",listPrice:{amount:60,currencyCode:"EUR",isOnSale:!1}},{id:"u3j6QIKLlJb",title:"rhoncus vivamus",subtitle:"nullam class risus amet senectus scelerisque etiam curabitur",authors:["Agatha Christie"],publishedDate:1978,description:"torquent in et id lacus vivamus aptent cursus erat integer venenatis risus ac ante quam etiam euismod feugiat risus suscipit rhoncus pharetra quisque felis",pageCount:652,categories:["Computers ","Hack"],thumbnail:"http://coding-academy.org/books-photos/20.jpg",reviews:[],language:"he",listPrice:{amount:110,currencyCode:"USD",isOnSale:!0}},{id:"vxYYYdVlEH3",title:"donec mi ullamcorper",subtitle:"varius malesuada augue molestie sollicitudin faucibus mi eu tempus",authors:["William Shakespeare"],publishedDate:2011,description:"aliquet euismod mi vivamus bibendum donec etiam quisque iaculis ullamcorper est sed",pageCount:904,categories:["Computers ","Hack"],thumbnail:"http://coding-academy.org/books-photos/2.jpg",reviews:[],language:"sp",listPrice:{amount:186,currencyCode:"ILS",isOnSale:!0}}]}();function S(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<5;a++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function N(e){return Date.now()-e<864e5?function(e){var t=new Date(e);return"".concat(t.getHours(),":").concat(("0"+t.getMinutes()).slice(-2))}(e):function(e){var t=new Date(e);return"".concat(t.getDate(),"-").concat(t.getMonth()+1,"-").concat(t.getFullYear())}(e)}function M(e){var t=new Date(e);return[t.getFullYear(),("0"+(t.getMonth()+1)).slice(-2),("0"+t.getDate()).slice(-2)].join("-")}function x(e,t){var a=new URLSearchParams(t).get(e);return a||""}function P(e,t){return e.length>t?e.slice(0,t)+"...":e}var D=a(8),T=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.book;return r.a.createElement("li",{className:"books-list-card"},r.a.createElement(D.a,{to:"/books/".concat(e.id),className:"flex column"},r.a.createElement("img",{alt:"book",src:e.thumbnail}),r.a.createElement("span",{className:"book-name"},e.title),r.a.createElement("small",{className:"price"},w.getPriceString(e.listPrice.amount,e.listPrice.currencyCode))))}}]),t}(r.a.Component),B=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={filterBy:{price:200},boxDisplayed:!1},a.toggleFilter=function(){a.setState((function(e){return{boxDisplayed:!e.boxDisplayed}}))},a.handleInput=function(e){a.setState({filterBy:{price:+e.target.value}},(function(){return a.props.onFilter(a.state.filterBy)}))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"simple-button",onClick:this.toggleFilter},r.a.createElement("i",{className:"fas fa-funnel-dollar"})),r.a.createElement("div",{className:"price-filter-box-wrapper"+(this.state.boxDisplayed?" active":"")},r.a.createElement("span",{className:"current-price-range-display"},this.state.filterBy.price),r.a.createElement("input",{type:"range",name:"price",step:"1",min:"1",max:"200",value:this.state.filterBy.price,onChange:this.handleInput})))}}]),t}(r.a.Component),A=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"getResultPreview",value:function(e,t){var a=this;return r.a.createElement("li",{key:t},r.a.createElement("span",null,e.volumeInfo.title),r.a.createElement("span",null,r.a.createElement("button",{className:"add-book-button",onClick:function(){return a.props.onSelectBook(e)}},"+")))}},{key:"render",value:function(){var e=this;return r.a.createElement("ul",{className:"clean-list search-results"},this.props.searchResults?this.props.searchResults.map((function(t,a){return e.getResultPreview(t,a)})):"")}}]),t}(r.a.Component),R=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={searchStr:"",currentSearchResults:[],searchOpen:!1},a.toggleSearch=function(){a.setState((function(e){return{searchOpen:!e.searchOpen}}))},a.handleInput=function(e){var t=e.target.value;if(!t)return a.setState((function(){return{searchStr:"",currentSearchResults:[]}}));a.setState((function(){return{searchStr:t}}),(function(){return w.searchBooks(a.state.searchStr).then((function(e){return a.setState((function(){return{currentSearchResults:e}}))}))}))},a.onSelectBook=function(e){w.addBookFromGoogle(e).then((function(){return v.callModal("updatesBox",{type:"success",message:"Book Added Successfully"}),a.props.loadBooks()}))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"simple-button",onClick:this.toggleSearch},r.a.createElement("i",{className:"fas fa-plus"})," ",r.a.createElement("span",{className:"no-mobile"},"Add New "),"Book"),r.a.createElement("div",{className:"search-box-wrapper auto-center"+(this.state.searchOpen?" active":"")},r.a.createElement("input",{type:"search",onChange:this.handleInput,value:this.state.searchStr,placeholder:"Search & Add New Book!"}),r.a.createElement(A,{onSelectBook:this.onSelectBook,searchResults:this.state.currentSearchResults})))}}]),t}(r.a.Component),I=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handlePageToggling=function(e){a.props.history.push("?page="+(a.props.currentPage+e))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"pagination-menu flex auto-center"},r.a.createElement("button",{onClick:function(){return e.handlePageToggling(-1)},className:"simple-button",disabled:this.props.currentPage-1<1},r.a.createElement("i",{className:"fas fa-chevron-left"})),this.props.currentPage," / ",this.props.maxPage,r.a.createElement("button",{onClick:function(){return e.handlePageToggling(1)},className:"simple-button",disabled:this.props.currentPage+1>this.props.maxPage},r.a.createElement("i",{className:"fas fa-chevron-right"})))}}]),t}(r.a.Component),U=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={books:[],filterBy:{name:"",price:200},booksPerPage:10,currentPage:1,maxPage:5},a.loadBooks=function(){return w.getBooks(a.state.filterBy,a.currentPaginationSettings).then((function(e){return a.setState((function(){return Object(b.a)({},e)}))}))},a.onFilter=function(e){a.setState((function(t){return{filterBy:Object(b.a)({},t.filterBy,{},e)}}),a.loadBooks)},a.handleSearch=function(e){a.onFilter({name:e})},a.componentDidMount=function(){a.loadBooks().then((function(){return v.emit("setSearchHandler",a.handleSearch)}))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){x("page",e.location.search)!==x("page",this.props.location.search)&&this.loadBooks()}},{key:"componentWillUnmount",value:function(){v.emit("setSearchHandler",null)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"books-list-wrapper"},r.a.createElement("section",{className:"book-list-options flex space-between"},r.a.createElement(I,{currentPage:this.state.currentPage,maxPage:this.state.maxPage}),r.a.createElement(R,{loadBooks:this.loadBooks}),r.a.createElement(B,{onFilter:this.onFilter})),r.a.createElement("ul",{className:"books-list clean-list"},this.state.books.map((function(t,a){return r.a.createElement(T,{book:t,key:a,onSelectBook:e.onSelectBook})}))))}},{key:"currentPaginationSettings",get:function(){return{currentPage:parseInt(x("page",this.props.location.search)),booksPerPage:this.state.booksPerPage}}}]),t}(r.a.Component);function F(e){return r.a.createElement("button",{onClick:e.onReturn,className:"go-back-button simple-button abs-tl medium-button"},r.a.createElement("i",{className:"fas fa-arrow-circle-left"}))}function q(e){var t=(e.pageCount>500?"Long":e.pageCount>200?"Decent":"Light")+" Reading",a=(new Date).getFullYear()-e.publishDate>10?"Veteran Book":"New Book!";return r.a.createElement("ul",{className:"badges clean-list flex justify-center"},r.a.createElement("li",null,t),r.a.createElement("li",null,a))}var L,H=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={isSliced:!1},a.handleClick=function(){a.setState((function(e){return{isSliced:!e.isSliced}}))},a.getToggleLinkStr=function(){return a.props.bookDescription.length<=a.props.strLength?"":r.a.createElement("span",{className:"long-text-toggler",onClick:a.handleClick},a.state.isSliced?"Show More":"Show Less")},a.getText=function(){return a.props.bookDescription.length<=a.props.strLength?a.props.bookDescription:a.state.isSliced?a.props.bookDescription.slice(0,a.props.strLength)+"...":a.props.bookDescription},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("p",null,this.getText(),this.getToggleLinkStr())}}]),t}(r.a.Component),J=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).getRateString=function(){for(var e="",t=0;t<a.props.reviewData.rate;t++)e+="\u2605";return e},a.getDateString=function(){return a.props.reviewData.readDate.split("-").reverse().join("-")},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.reviewData;return r.a.createElement("li",null,r.a.createElement("div",{className:"review-header flex space-between"},r.a.createElement("span",null,e.fullName," (",this.getRateString(),")"),r.a.createElement("span",null,"Read Date: ",this.getDateString())),r.a.createElement("p",null,e.text))}}]),t}(r.a.Component),z=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("ul",{className:"book-reviews-list clean-list"},this.props.reviewsData.length<1?r.a.createElement("li",{className:"empty-list-item"},"No reviews added yet"):this.props.reviewsData.map((function(e,t){return r.a.createElement(J,{key:t,reviewData:e})})))}}]),t}(r.a.Component),Y=a(13),W=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={ratingSelected:0},a.setRating=function(e){var t=+e.target.dataset.value;a.setState((function(){return{ratingSelected:t}}),(function(){return a.props.onUpdateRating(a.state.ratingSelected)}))},a.getRatingButtons=function(){for(var e=[],t=1;t<=5;t++)e.push(r.a.createElement("span",{key:t,"data-value":t,onClick:a.setRating,className:t<=a.state.ratingSelected?"active":""},"\u2605"));return e},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"rating-btns"},this.getRatingButtons())}}]),t}(r.a.Component),G=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={formData:{fullName:"",text:"",rate:"",readDate:M(Date.now())},animationClass:""},a.handleSubmit=function(e){e.preventDefault();var t=a.state.formData;if(t.text&&t.rate&&t.readDate){var n=Object(b.a)({},t,{fullName:t.fullName?t.fullName:"Book Reader"});a.props.transData.onReviewAdd(n),a.props.onModalClose()}},a.handleChange=function(e){var t=e.target.name,n="rate"===t?+e.target.value:e.target.value;a.setState((function(e){return{formData:Object(b.a)({},e.formData,Object(Y.a)({},t,n))}}))},a.onUpdateRating=function(e){a.setState((function(t){return{formData:Object(b.a)({},t.formData,{rate:e})}}))},a.componentDidMount=function(){a.fullNameInputRef.current.focus()},a.fullNameInputRef=r.a.createRef(),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit,className:"book-review-add-form"},r.a.createElement("div",{className:"book-review-add-form-title"},"Add new Review"),r.a.createElement(W,{onUpdateRating:this.onUpdateRating}),r.a.createElement("input",{type:"button",value:"\xd7",onClick:this.props.onModalClose,className:"simple-button dismiss"}),r.a.createElement("div",{className:"review-form-upper-elements flex space-between"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"fullName"},"Full Name:"),r.a.createElement("input",{ref:this.fullNameInputRef,type:"text",id:"fullName",name:"fullName",placeholder:"Benel Tavori",value:this.state.formData.fullName,onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"readDate"},"Read Date:"),r.a.createElement("input",{type:"date",id:"readDate",name:"readDate",value:this.state.formData.readDate,onChange:this.handleChange}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"text"},"Your Review:"),r.a.createElement("textarea",{name:"text",id:"text",placeholder:"E.g: Awesome Book!..",defaultValue:this.state.formData.text,onChange:this.handleChange,required:!0})),r.a.createElement("button",{className:"review-form-button"},"Submit Review"))}}]),t}(r.a.Component),K=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).showReviewModal=function(){v.callModal("regularModal",{component:G,onReviewAdd:a.props.onReviewAdd})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"reviews-section"},r.a.createElement("div",{className:"reviews-head text-center"},"Latest Reviews"),r.a.createElement(z,{reviewsData:this.props.reviewsData}),r.a.createElement("button",{onClick:this.showReviewModal,className:"review-form-button"},"Add Review"))}}]),t}(r.a.Component),V=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={book:null,status:"Loading..."},a.loadBook=function(){var e=a.props.match.params.id;w.getBookById(e).then((function(e){e?a.setState({book:e}):a.setState({book:e,status:"Could not find book"})}))},a.onDelete=function(){w.deleteBookById(a.state.book.id).then((function(){a.onReturn()}))},a.onReviewAdd=function(e){var t=a.state.book.reviews.slice();t.push(e),w.editBookById(a.state.book.id,{reviews:t}).then((function(){return a.loadBook()}))},a.onReturn=function(){a.props.history.push("./")},a.getBookPrice=function(){return w.getPriceString(a.state.book.listPrice.amount,a.state.book.listPrice.currencyCode)},a.getColorClassByPrice=function(){return a.state.book.listPrice.amount<=20?"cheap":"expensive"},a.componentDidMount=function(){a.loadBook()},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){e.match.params.id!==this.props.match.params.id&&this.loadBook()}},{key:"render",value:function(){var e=this.state.book;return e?r.a.createElement("div",{className:"book-display"},r.a.createElement(F,{onReturn:this.onReturn}),r.a.createElement("section",{className:"information"},r.a.createElement("h2",{className:"title"},e.title),r.a.createElement("ul",{className:"more-info-list"},r.a.createElement("li",null,"Categories: ",e.categories?e.categories.join(","):"N/A"),r.a.createElement("li",null,"Subtitle: ",e.subtitle),r.a.createElement("li",null,"Authors: ",e.authors.join(",")),r.a.createElement("li",null,"Publish Year: ",e.publishedDate),r.a.createElement("li",null,"Pages Count: ",e.pageCount),r.a.createElement("li",null,"Language: ",e.language.toUpperCase()),r.a.createElement("li",null,"Description:",r.a.createElement(H,{bookDescription:e.description,strLength:150})))),r.a.createElement("section",{className:"cover"},r.a.createElement("div",{className:"cover-wrapper"},e.listPrice.isOnSale?r.a.createElement("span",{className:"on-sale"},"on sale!"):"",r.a.createElement("img",{alt:"",src:e.thumbnail}),r.a.createElement(q,{pageCount:e.pageCount,publishDate:e.publishedDate})),r.a.createElement("span",{className:"price ".concat(this.getColorClassByPrice())},this.getBookPrice())),r.a.createElement(K,{reviewsData:e.reviews,onReviewAdd:this.onReviewAdd})):r.a.createElement("div",{className:"loading"},this.state.status)}}]),t}(r.a.Component),_=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"book-app-wrapper"},r.a.createElement(p.b,{history:this.props.history},r.a.createElement(p.c,null,r.a.createElement(p.a,{component:V,path:"/books/:id",exact:!0}),r.a.createElement(p.a,{component:U,path:"/books",exact:!0}))))}}]),t}(r.a.Component),Q=a(20),X=function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(s.a)(this,e),this.id=n?"draft":S(),this.title="",this.type=t,this.isPinned=!1,this.details=a,this.style={backgroundColor:"",color:"black"}};function Z(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];ee(),L=JSON.parse(JSON.stringify(L));var n=a?new X(e,t,!0):new X(e,t);return L.push(n),te(),Promise.resolve(n)}function $(e){var t=function(e){return L.findIndex((function(t){return t.id===e}))}(e);return(L=JSON.parse(JSON.stringify(L))).splice(t,1),te(),Promise.resolve(!0)}function ee(){(L=C.loadFromStorage("notes",null))&&L.length||(L=[{id:S(),type:"txt",isPinned:!0,title:"Welcome to keep notes",details:{txt:"Try adding some notes for yourself!"},style:{backgroundColor:"#ffff9f"}},{id:S(),type:"todo",isPinned:!0,title:"Features",details:{todos:[{id:S(),txt:"Adding todo lists",isDone:!0},{id:S(),txt:"embed spotify and youtube links",isDone:!1},{id:S(),txt:"linking to different video and sound files",isDone:!1},{id:S(),txt:"add google maps by coords or name!",isDone:!1}]},style:{backgroundColor:"#ffff9f"}},{id:S(),type:"txt",isPinned:!1,title:"React is a friend",details:{txt:"NOTTT...."},style:{backgroundColor:"#ffff9f"}},{id:S(),type:"img",isPinned:!1,title:"Me playing Mi",details:{url:"https://loremflickr.com/320/240"},style:{backgroundColor:"#ffff9f"}},{id:S(),type:"music",isPinned:!1,title:"Random nigga song",details:{url:"https://www.mboxdrive.com/Blue%20lights.mp3"},style:{backgroundColor:"#ffff9f"}},{id:S(),type:"img",isPinned:!1,title:"my cat is awesome",details:{url:"https://cdn.shopify.com/s/files/1/1369/6411/articles/g_.fh_1_c23e86d3-e918-497c-b209-b583225ede34_2048x.progressive.jpg?v=1563422994"},style:{backgroundColor:"#ffff9f"}},{id:S(),type:"video",isPinned:!1,title:"Cute bear",details:{url:"https://www.w3schools.com/html/movie.mp4"},style:{backgroundColor:"#ffff9f"}},{id:S(),type:"todo",title:"Grocery list:",isPinned:!1,details:{todos:[{id:S(),txt:"buy milk",isDone:!1},{id:S(),txt:"buy bamba",isDone:!1},{id:S(),txt:"forget to buy milk",isDone:!1}]},style:{backgroundColor:"lightsalmon"}},{id:S(),type:"video",title:"Awesome",isPinned:!1,details:{url:"https://www.youtube.com/watch?v=mXjNATmIruI"},style:{backgroundColor:"lightsalmon"}},{id:S(),type:"maps",title:"Home is far far away",isPinned:!1,details:{place:"33.2397939,35.6496942"},style:{backgroundColor:"lightsalmon"}}])}function te(){C.saveToStorage("notes",L)}function ae(e){var t=L.find((function(t){return t.id===e}));return Promise.resolve.apply(Promise,[t])}function ne(e){var t;return ee(),e?t=re(t=function(e){return L.filter((function(t){return!!t.title.toLowerCase().includes(e)||(!("txt"!==t.type||!t.details.txt.toLowerCase().includes(e))||"todo"===t.type&&t.details.todos.find((function(t){return-1!==t.txt.toLowerCase().includes(e)})))}))}(e)):L=re(L),Promise.resolve(Object(Q.a)(t||L))}function re(e){return e.slice().sort((function(e,t){return e.isPinned&&t.isPinned?0:e.isPinned?-1:1}))}function oe(e,t){return ae(e).then((function(e){for(var a in t)t[a].todos?e[a].todos=ie(e[a].todos,t[a].todos):t.style?e[a]=Object(b.a)({},e[a],{},t[a]):e[a]=t[a];L=L.map((function(t){return t.id===e.id?e:t})),te()})),Promise.resolve(!0)}function ie(e,t){var a=e.map((function(e){return e.id===t.id?t:e}));return Object(Q.a)(a)}function se(e){return L=JSON.parse(JSON.stringify(L)),ae(e).then((function(e){return e.isPinned=!e.isPinned,te(),!0}))}function le(e,t){return ae(e).then((function(e){e.details.todos.push({id:S(),txt:t,isDone:!1}),te()})),Promise.resolve(!0)}var ce=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={draftNote:null,type:"txt",text:"",placeholder:"Enter text"},a.onInputChange=function(e){a.setState({text:e.target.value})},a.onAddNote=function(e){if(e.preventDefault(),a.state.text){var t=a.makeDetails();Z(a.state.type,t).then(a.props.onAdd),v.callModal("updatesBox",{type:"success",message:"Note added Successfully!"}),a.setState({text:""})}},a.makeDetails=function(){var e={};switch(a.state.type){case"txt":e.txt=a.state.text;break;case"img":case"video":e.url=a.state.text;break;case"maps":e.place=a.state.text;break;case"music":e.url=a.state.text;break;case"todo":e.todos=[],a.state.text.split(",").map((function(t){return e.todos.push({id:S(),txt:t,isDone:!1})}))}return e},a.onTypeChange=function(e){switch(a.setState({type:e.target.value}),e.target.value){case"txt":a.setState({placeholder:"Enter text",text:""});break;case"todo":a.setState({placeholder:"Enter todos separated by commas",text:""});break;case"img":a.setState({placeholder:"Enter image URL",text:""});break;case"video":a.setState({placeholder:"Enter video URL",text:""});break;case"maps":a.setState({placeholder:"Enter (lat,lng) or place name",text:""});break;case"music":a.setState({placeholder:"Enter mp3 or Spotify URL",text:""})}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;Z("txt",{txt:""},!0).then((function(t){return e.setState({draftNote:t})}))}},{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.onAddNote},r.a.createElement("div",{className:"add-container flex auto-center"},r.a.createElement("input",{placeholder:this.state.placeholder,onChange:this.onInputChange,value:this.state.text,type:"search",name:"add",id:""}),this.types))}},{key:"types",get:function(){var e=this.state.type;return r.a.createElement("div",{className:"types-container"},r.a.createElement("label",{htmlFor:"txt",className:"txt"===e?"active-type":""},r.a.createElement("i",{className:"fas fa-text-height"})),r.a.createElement("input",{onChange:this.onTypeChange,type:"radio",id:"txt",name:"type",value:"txt"}),r.a.createElement("label",{htmlFor:"todo",className:"todo"===e?"active-type":""},r.a.createElement("i",{className:"fas fa-list-ul"})),r.a.createElement("input",{onChange:this.onTypeChange,type:"radio",id:"todo",name:"type",value:"todo"}),r.a.createElement("label",{htmlFor:"img",className:"img"===e?"active-type":""},r.a.createElement("i",{className:"fas fa-image"})),r.a.createElement("input",{onChange:this.onTypeChange,type:"radio",id:"img",name:"type",value:"img"}),r.a.createElement("label",{htmlFor:"video",className:"video"===e?"active-type":""},r.a.createElement("i",{className:"fas fa-video"})),r.a.createElement("input",{onChange:this.onTypeChange,type:"radio",id:"video",name:"type",value:"video"}),r.a.createElement("label",{htmlFor:"maps",className:"maps"===e?"active-type":""},r.a.createElement("i",{className:"fas fa-map-marked-alt"})),r.a.createElement("input",{onChange:this.onTypeChange,type:"radio",id:"maps",name:"type",value:"maps"}),r.a.createElement("label",{htmlFor:"music",className:"music"===e?"active-type":""},r.a.createElement("i",{className:"fas fa-music"})),r.a.createElement("input",{onChange:this.onTypeChange,type:"radio",id:"music",name:"type",value:"music"}))}}]),t}(r.a.Component),ue=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={text:r.a.createRef(),rows:1},a.handleResize=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=20.8,r=e.target.rows;e.target.rows=1;var o=~~(e.target.scrollHeight/n);o===r&&(e.target.rows=o),o>=10&&(e.target.rows=10,e.target.scrollTop=e.target.scrollHeight),a.setState({rows:o<10?o:10}),t&&a.updateNote()},a.updateNote=function(){var e=a.props.todo,t=a.state.text.current.value,n=e?{todos:{id:e.id,txt:t,isDone:e.isDone}}:{txt:t};a.props.isAddTodo||a.props.handleUpdate({details:n})},a.onAddTodo=function(){if(a.props.isAddTodo){if(!a.state.text.current.value)return;a.props.handleRerender(a.state.text.current.value)}},a.onSubmit=function(e){a.props.isAddTodo&&"Enter"===e.key&&(e.preventDefault(),a.onAddTodo())},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.handleResize({target:this.state.text.current},!1)}},{key:"render",value:function(){var e=this;return r.a.createElement("textarea",{onKeyPress:this.onSubmit,onBlur:this.onAddTodo,spellCheck:"false",style:this.props.styles,rows:this.state.rows,placeholder:this.props.placeholder,value:this.props.defaultText,className:"text-area-input",onChange:function(t){e.props.isAddTodo&&e.props.handleChange(t),e.handleResize(t)},ref:this.state.text})}}]),t}(r.a.Component),me=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(ue,{handleUpdate:this.props.handleUpdate,defaultText:this.props.note.details.txt})}}]),t}(r.a.Component),pe=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{alt:"",src:this.props.note.details.url}))}}]),t}(r.a.Component),de=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={defaultText:""},a.handleChange=function(e){a.setState({defaultText:e.target.value})},a.onRerender=function(e){a.props.handleAdd(e),a.setState({defaultText:""})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"todo-add"},r.a.createElement(ue,{handleRerender:this.onRerender,defaultText:this.state.defaultText,isAddTodo:!0,handleUpdate:this.props.handleAdd,handleChange:this.handleChange,placeholder:"add new todo"}))}}]),t}(r.a.Component),he=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).toggleTodo=function(e){var t={todos:{id:e.id,txt:e.txt,isDone:!e.isDone}};a.props.handleUpdate({details:t})},a.onAddTodo=function(e){le(a.props.note.id,e).then(a.props.handleUpdate)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.props.note.details.todos.map((function(t,a){return r.a.createElement("div",{key:a,className:"todo-container"},r.a.createElement("input",{defaultChecked:t.isDone,onClick:function(){return e.toggleTodo(t)},type:"checkbox"}),r.a.createElement(ue,{styles:t.isDone?{textDecoration:"line-through"}:{},todo:t,handleUpdate:e.props.handleUpdate,defaultText:t.txt}))})),r.a.createElement(de,{handleAdd:this.onAddTodo}))}}]),t}(r.a.Component),fe=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"getIdfromYoutubeUrl",value:function(e){var t=e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/);return t&&11===t[2].length?t[2]:null}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.renderVideo)}},{key:"renderVideo",get:function(){var e=this.props.note;return e.details.url.includes("youtube")?r.a.createElement("iframe",{width:"420",height:"315",title:"video",src:"https://www.youtube.com/embed/".concat(this.getIdfromYoutubeUrl(e.details.url))}):r.a.createElement("video",{controls:!0},r.a.createElement("source",{src:e.details.url,type:"video/mp4"}))}}]),t}(r.a.Component),ge=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{className:"mapouter"},r.a.createElement("div",{className:"gmap_canvas"},r.a.createElement("iframe",{title:"map",width:"200",height:"200",id:"gmap_canvas",src:"https://maps.google.com/maps?q=".concat(this.props.note.details.place,"&t=&z=15&ie=UTF8&iwloc=&output=embed"),frameBorder:"0",scrolling:"no",marginHeight:"0",marginWidth:"0"})))}}]),t}(r.a.Component),be={txt:me,img:pe,todo:he,video:fe,music:function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"getSpotifyIdFromUrl",value:function(){return this.props.note.details.url.match(/https?:\/\/(?:embed\.|open\.)(?:spotify\.com\/)(?:track\/|\?uri=spotify:track:)((\w|-){22})/)[1]}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.renderMusic)}},{key:"renderMusic",get:function(){var e=this.props.note;return e.details.url.includes("spotify")?r.a.createElement("iframe",{title:"music",src:"https://open.spotify.com/embed/track/".concat(this.getSpotifyIdFromUrl()),frameBorder:"0",allowtransparency:"true",allow:"encrypted-media"}):r.a.createElement("audio",{controls:!0,src:e.details.url},"Your browser does not support the",r.a.createElement("code",null,"audio")," element.")}}]),t}(r.a.Component),maps:ge},ve=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={title:""},a.onTitleChange=function(e){a.props.handleUpdate({title:e.details.txt})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(ue,{handleUpdate:this.onTitleChange,defaultText:this.props.title})}}]),t}(r.a.Component);function ye(e){return r.a.createElement("span",{className:"delete-btn hover-btn",onClick:e.handleDelete},r.a.createElement("i",{className:"fas fa-trash-alt"}))}function Ee(e){return r.a.createElement("span",{className:"pin-btn hover-btn ".concat(e.isPinned?"pinned":""),onClick:function(){e.handlePin(e.noteId)}},r.a.createElement("i",{className:"fas fa-thumbtack"}))}var ke=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isOpen:!1},a.setColor=function(e){a.setState({isOpen:!1}),a.props.handleChange(e.target.style.backgroundColor)},a.onToggle=function(){a.setState((function(e){return{isOpen:!e.isOpen}}))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("span",{className:"color-picker"},r.a.createElement("label",{onClick:this.onToggle,htmlFor:"pallete".concat(this.props.noteId).concat(this.props.isText?"text":"")},r.a.createElement("i",{className:"hover-btn ".concat(this.props.icon)})),r.a.createElement("div",{className:"colors hover-btn ".concat(this.state.isOpen?"open-colors":"")},this.props.colors.map((function(t,a){return r.a.createElement("label",{key:a,onClick:e.setColor,htmlFor:"pallete".concat(e.props.noteId).concat(e.props.isText?"text":""),style:{backgroundColor:t}})}))))}}]),t}(r.a.Component),Ce=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={BG_COLORS:["#ff4040cc","green","#2222f0cf","lightsalmon","violet","#FFFF88"],TEXT_COLORS:["black","violet","green","yellow","cyan","white"]},a.onChangeBgColor=function(e){a.props.handleUpdate({style:{backgroundColor:e}})},a.onUpdateTextColor=function(e){a.props.handleUpdate({style:{color:e}})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{className:"tool-bar"},r.a.createElement(ke,{icon:"fas fa-palette palette",colors:this.state.BG_COLORS,handleChange:this.onChangeBgColor,noteId:this.props.noteId}),r.a.createElement(ke,{icon:"fas fa-font palette",colors:this.state.TEXT_COLORS,isText:!0,handleChange:this.onUpdateTextColor,noteId:this.props.noteId}),r.a.createElement("label",{className:"hover-btn",onClick:this.props.handleSendToMail},r.a.createElement("i",{className:"fas fa-paper-plane"})))}}]),t}(r.a.Component),Oe=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onUpdate=function(e){oe(a.props.note.id,e).then(a.props.reloadNotes)},a.onDeleteNote=function(){v.callModal("confirmation",{onConfirmAction:a.deleteNote,message:"Are you sure you want to delete this Note?"})},a.deleteNote=function(){$(a.props.note.id).then(a.props.reloadNotes),v.callModal("updatesBox",{type:"failure",message:"Note deleted Successfully!"})},a.onPinNote=function(){se(a.props.note.id).then(a.props.reloadNotes)},a.onSendToMail=function(){var e,t=a.props.note;switch(t.type){case"img":case"video":case"music":e=t.details.url;break;case"txt":e=t.details.txt;break;case"todo":e=(e=t.details.todos.map((function(e){return e.txt}))).join(",")}window.open("#/mail/action/sendNote?type=".concat(t.type,"&subject=").concat(t.title,"&content=").concat(e),"_blank")},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"getPreviewCmp",value:function(e){var t=be[e.type];return r.a.createElement(t,{note:e,handleUpdate:this.onUpdate})}},{key:"render",value:function(){var e=this.props.note;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{color:this.props.textStyle.color},className:"note-title"},r.a.createElement(ve,{style:e.style,handleUpdate:this.onUpdate,title:e.title})),r.a.createElement("div",{style:{color:this.props.textStyle.color},className:"note-body"},this.getPreviewCmp(e)),r.a.createElement(Ee,{isPinned:e.isPinned,handlePin:this.onPinNote}),r.a.createElement(ye,{handleDelete:this.onDeleteNote}),r.a.createElement(Ce,{handleSendToMail:this.onSendToMail,handleUpdate:this.onUpdate,noteId:e.id}))}}]),t}(r.a.Component);function we(e){return r.a.createElement("div",{className:e.pinnedNotes?"pinned-container flex":"notes-container"},e.notes.map((function(t){return"draft"!==t.id&&r.a.createElement("div",{style:{backgroundColor:t.style.backgroundColor},key:t.id,className:"note"},r.a.createElement(Oe,{textStyle:t.style,reloadNotes:e.handleReload,handleUpdate:e.handleUpdate,note:t}))})))}var je=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={notes:null,searchString:"",isTherePinned:!1},a.handleSearch=function(e){a.setState({searchString:e},a.loadNotes)},a.loadNotes=function(){return ne(a.state.searchString).then((function(e){v.callModal("pageLoading",!1),a.setState({notes:e},a.checkPinned)}))},a.checkPinned=function(){var e=a.state.notes.find((function(e){return e.isPinned}));a.setState({isTherePinned:!!e})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.loadNotes().then((function(){return v.emit("setSearchHandler",e.handleSearch)}))}},{key:"componentWillUnmount",value:function(){v.emit("setSearchHandler",null)}},{key:"render",value:function(){return this.state.notes?r.a.createElement("section",{className:"main-keep"},r.a.createElement(ce,{onAdd:this.loadNotes}),this.state.isTherePinned&&r.a.createElement("h3",null,r.a.createElement("i",{className:"fas fa-thumbtack"})),this.state.isTherePinned&&r.a.createElement(we,{pinnedNotes:!0,handleReload:this.loadNotes,notes:this.state.notes.filter((function(e){return e.isPinned}))}),r.a.createElement(we,{handleReload:this.loadNotes,notes:this.state.notes.filter((function(e){return!e.isPinned}))})):r.a.createElement("div",null,"Loading....")}}]),t}(r.a.Component),Se=function e(t,a,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Date.now(),i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];Object(s.a)(this,e),this.id=S(),this.sender=t,this.target="tal@gmail.com",this.cc=a?a.split(","):[],this.subject=n,this.body=r,this.isRead=!1,this.isImportant=i,this.isDeleted=!1,this.sentAt=o},Ne={addMail:function(e,t,a,n){Me=JSON.parse(JSON.stringify(Me));var r=new Se(e,t,a,n);return Me.push(r),De(),Promise.resolve(r)},deleteMailById:function(e){var t=function(e){return Me.findIndex((function(t){return t.id===e}))}(e);return(Me=JSON.parse(JSON.stringify(Me))).splice(t,1),De(),Promise.resolve(!0)},getMailById:Pe,getMailsToRender:function(e,t,a,n){e=e||{name:"isDeleted",value:!1};var r=Me.filter((function(t){return!(a&&!t.subject.toLowerCase().includes(a.toLowerCase())&&!t.body.toLowerCase().includes(a.toLowerCase()))&&("all"===e.name||t[e.name]===e.value)})),o=Math.ceil(r.length/n.mailsPerPage),i=n.currentPage<1||n.currentPage>o||!n.currentPage?1:n.currentPage,s=(i-1)*n.mailsPerPage,l=s+n.mailsPerPage;return r=Te(r,t).slice(s,l),Promise.resolve({mails:r,currentPage:i,maxPage:o})},updateMailById:xe,getUnreadMailsCounter:function(){var e={inbox:0,important:0,trash:0,readPercentage:0};return(e=Me.reduce((function(e,t){return t.isRead?e:(t.isImportant&&e.important++,t.isDeleted?e.trash++:e.inbox++,e)}),e)).readPercentage=parseInt((Me.length-e.inbox-e.trash)/Me.length*100),Promise.resolve(e)},sendMailToTrash:function(e){return xe(e,{isDeleted:!0}).then((function(){return!0}))},getFormDataFromSource:function(e){if("quote"===e.sourceType)return{formTitle:"Quick Reply: "+(t=e.mailToQuote).subject,to:t.sender,subject:"Re: "+t.subject,body:t.body+"\n\n-----------------------\n\n"};if("note"===e.sourceType)return function(){var e,t=window.location.hash.split("?")[1],a=x("type",t),n=x("subject",t),r=x("content",t);switch(a){case"video":e="Video";break;case"img":e="Image";break;case"music":e="Song";break;case"todo":e="Todo List",r=r.split(",").join(",\n");break;default:e="Note"}return{formTitle:"Send Note: "+n,subject:"Note: "+n,body:(e="Hey check out this "+e+":\n")+r+"\n\n-----------------------\n\n"}}();var t;return null},updateMultiple:function(e){return e.items.forEach((function(t){Me.find((function(e){return e.id===t}))[e.field]=e.value})),De(),Promise.resolve("success")}},Me=function(){var e=C.loadFromStorage("gMails",null);return e||function(){var e=[];return e.push(new Se("nevo@gmail.com","","Sprint 3","Awesome modal bro, ill take it",1577639402351,!0)),e.push(new Se("talbarak@gmail.com","","dropbox git","Delete your .git before i delete your face",1577630402351,!0)),e.push(new Se("facebook@gmail.com","","New notifications","Check out what's new in your page!",1577329968351)),e.push(new Se("no-reply-miluim@gmail.com","","\u05e4\u05e0\u05d9\u05d9\u05d4 \u05d7\u05d3\u05e9\u05d4","\u05e2\u05d3\u05db\u05d5\u05df \u05d7\u05d3\u05e9 \u05de\u05d7\u05db\u05d4 \u05dc\u05da \u05d1\u05e4\u05d5\u05e8\u05d8\u05dc \u05d4\u05de\u05d9\u05dc\u05d5\u05d0\u05d9\u05dd \u05d1\u05d0\u05ea\u05e8",1577630402351)),e.push(new Se("nevo@gmail.com","","Git stuff","Come on dude push and pull, push and pull!!",1577540402351,!0)),e.push(new Se("twitter@gmail.com","","Tal, get the Tweets you love","To get the Tweets you love, just follow the accounts who bring great content. For example, check out the latest from @TwitterVideo, where the top videos of the week are served up fresh. If you like what you see, click the follow button to get the latest delivered right to your timeline")),e.push(new Se("Codewars@gmail.com","","Weekly Coding Challenges","Codewars & Coffee Take a kata break, while you caffeinate",1577639978851)),e.push(new Se("linkedIn@gmail.com","","Shmuel Elkis via LinkedIn\u200f ","Shmuel Elkis has accepted your invitation. Let's start a conversation.",1577639168351)),e.push(new Se("spotify@gmail.com","","Upcoming shows near Tel Aviv: Berry Sakharof, Hila Ruach and more ","Upcoming concerts near you by artists you love.",1577638976951)),e.push(new Se("avocode@gmail.com","","Your free trial is over","The free trial for tal's team has ended. Please log in and purchase a subscription within 14 days to keep working on your design projects.",1576630402351)),e.push(new Se("ebay@gmail.com","","Tal, Get the Best of eBay, Personalized for You","Check best eBay offers Selected specially for you",1576630402351)),e.push(new Se("amazon\u200f@gmail.com","","AWS re:Invent 2019 Recap","re:Invent 2019 is all wrapped up! AWS announced 77 products  Manager, AWS Transite Gateway Inter-Region Peering, IP Multicasting.",1576630402351)),e.push(new Se("nevo@gmail.com","","HEEELLLPPP","I cant change the font color in my notes!! no idea whats wrong, i need your assistance right away!!",1576630402351,!0)),e.push(new Se("nevo@gmail.com","","Project","Tommorrow we need to present the project, i'm gonna very very sick. could you do the presentation by yourself?",1576640402351,!0)),e}()}();function xe(e,t){return Me=JSON.parse(JSON.stringify(Me)),Pe(e).then((function(e){for(var a in t)e[a]=t[a];De()}))}function Pe(e){return Promise.resolve(Me.find((function(t){return t.id===e})))}function De(){C.saveToStorage("gMails",Me)}function Te(e,t){return"isRead"===t.field?e.sort((function(e,a){return e.isRead===a.isRead?0:e.isRead?1*t.prefix:-1*t.prefix})):e.sort((function(e,a){return e[t.field]<a[t.field]?1*t.prefix:e[t.field]>a[t.field]?-1*t.prefix:0}))}var Be=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onUpdateMail=function(e){return Ne.updateMailById(a.props.mail.id,e).then(a.props.reloadMail)},a.onDeleteMail=function(e){e.stopPropagation(),v.callModal("confirmation",{onConfirmAction:a.confirmDeletion,message:"Are you sure you want to delete this mail permanently?"})},a.confirmDeletion=function(){return v.callModal("pageLoading",!0),Ne.deleteMailById(a.props.mail.id).then((function(){return v.callModal("pageLoading",!1),v.callModal("updatesBox",{type:"success",message:"Mail Deleted Successfully!"}),a.props.isFromPreview?a.props.reloadMail():window.location.assign("#/mail/")}))},a.onShowMailDetails=function(){a.props.history.push("mail/".concat(a.props.mail.id))},a.onToggleMailRead=function(e){e.stopPropagation();var t="Marked as "+(a.props.mail.isRead?" not ":"")+"Read";a.onUpdateMail({isRead:!a.props.mail.isRead}).then((function(){return v.callModal("updatesBox",{type:"success",message:t}),v.emit("mailStateChanged")}))},a.onToggleMailInTrash=function(e){e.stopPropagation();var t="Mail "+(a.props.mail.isDeleted?"removed from Trash":"sent to Trash");a.onUpdateMail({isDeleted:!a.props.mail.isDeleted}).then((function(){return v.callModal("updatesBox",{type:"success",message:t}),v.emit("mailStateChanged")}))},a.onToggleMailImportance=function(e){e.stopPropagation();var t="Marked as "+(a.props.mail.isImportant?" not ":"")+"Important";a.onUpdateMail({isImportant:!a.props.mail.isImportant}).then((function(){return v.callModal("updatesBox",{type:"success",message:t}),v.emit("mailStateChanged")}))},a.goBack=function(){return a.props.history.goBack?a.props.history.goBack():null},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return this.props.mail?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"go-back-button simple-button",onClick:this.goBack},r.a.createElement("i",{className:"fas fa-arrow-circle-left"})),r.a.createElement("div",{className:"mail-buttons-container"},r.a.createElement("button",{onClick:this.props.onReplyToMail},r.a.createElement("i",{className:"fas fa-reply"})),r.a.createElement("button",{onClick:this.onToggleMailRead},r.a.createElement("i",{className:this.props.mail.isRead?"fas fa-book-open":"fas fa-book"})),r.a.createElement("button",{onClick:this.onToggleMailImportance,className:"perm"},r.a.createElement("i",{className:this.props.mail.isImportant?"fas fa-star active":"far fa-star"})),r.a.createElement("button",{onClick:this.onToggleMailInTrash,className:"perm"},r.a.createElement("i",{className:this.props.mail.isDeleted?"fas fa-recycle":"fas fa-trash"})),this.props.mail.isDeleted?r.a.createElement("button",{onClick:this.onDeleteMail},r.a.createElement("i",{className:"fas fa-dumpster"})):"",this.props.isFromPreview?r.a.createElement("button",{onClick:this.onShowMailDetails,className:"perm"},r.a.createElement("i",{className:"fas fa-expand-arrows-alt"})):"")):r.a.createElement("div",null,"error")}}]),t}(r.a.Component),Ae=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={to:"",cc:"",subject:"",body:"",formTitle:"Send New Mail"},a.handleChange=function(e){var t=e.target.name,n=e.target.value;a.setState((function(){return Object(Y.a)({},t,n)}))},a.onFormSubmit=function(e){e.preventDefault(),e.stopPropagation();var t=Object(b.a)({},a.state);v.callModal("pageLoading",!0),Ne.addMail(t.to,t.cc,t.subject,t.body).then((function(){v.callModal("pageLoading",!1),v.callModal("updatesBox",{type:"success",message:"Mail Sent Successfully!"}),v.emit("mailAdd"),a.props.onModalClose(e)}))},a.onModalClose=function(e){e.preventDefault(),e.stopPropagation(),a.props.onModalClose(e)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"buildFormFromSource",value:function(){var e=Ne.getFormDataFromSource(this.props.transData);return e?this.setState(Object(b.a)({},e)):null}},{key:"componentDidMount",value:function(){this.props.transData.sourceType&&this.buildFormFromSource()}},{key:"render",value:function(){return r.a.createElement("form",{className:"flex column new-mail-form",onSubmit:this.onFormSubmit,action:"",method:"post"},r.a.createElement("div",{className:"new-mail-form-title"},this.state.formTitle),r.a.createElement("span",null,r.a.createElement("label",{htmlFor:"new-mail-subject"},"To:"),r.a.createElement("input",{type:"email",id:"new-mail-to",name:"to",value:this.state.to,onChange:this.handleChange,placeholder:"E.g John@gmail.com",required:!0})),r.a.createElement("span",null,r.a.createElement("label",{htmlFor:"new-mail-cc"},"Cc:"),r.a.createElement("input",{type:"text",id:"new-mail-cc",name:"cc",value:this.state.cc,onChange:this.handleChange,placeholder:"Copies, seperate by commas"})),r.a.createElement("span",null,r.a.createElement("label",{htmlFor:"new-mail-subject"},"Subject:"),r.a.createElement("input",{type:"text",id:"new-mail-subject",name:"subject",value:this.state.subject,onChange:this.handleChange,placeholder:"Mail Subject",required:!0})),r.a.createElement("textarea",{name:"body",value:this.state.body,onChange:this.handleChange,placeholder:"Your text...",required:!0}),r.a.createElement("div",{className:"new-mail-form-buttons flex space-between align-center"},r.a.createElement("button",{onClick:this.onModalClose,className:"dismiss simple-button normal-trans"},"\xd7"),r.a.createElement("button",{className:"send simple-button normal-trans"},r.a.createElement("i",{className:"fas fa-paper-plane"}))))}}]),t}(r.a.Component),Re=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isFromPreview:!1},a.onReplyToMail=function(e){e.stopPropagation(),v.callModal("regularModal",{component:Ae,mailToQuote:a.props.mail,sourceType:"quote"})},a.componentDidMount=function(){if(a.props.isFromPreview)return a.setState((function(){return{isFromPreview:!0}}));a.props.mail.isRead||Ne.updateMailById(a.props.mail.id,{isRead:!0}).then((function(){a.state.isFromPreview&&a.props.reloadMail(),v.emit("mailStateChanged")}))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.mail;return e?r.a.createElement("div",{className:"mail-details"},r.a.createElement("h2",null,e.subject),r.a.createElement("div",{className:"mail-sender"},r.a.createElement("span",{className:"sender-name"},this.formattedMailSender)," ",r.a.createElement("small",null,"<"+e.sender+">")),r.a.createElement("p",{className:"mail-body"},this.formattedBodyText),r.a.createElement(Be,{history:this.props.history,mail:this.props.mail,isFromPreview:this.state.isFromPreview,reloadMail:this.props.reloadMail,onReplyToMail:this.onReplyToMail})):r.a.createElement("div",null,"error")}},{key:"formattedBodyText",get:function(){return this.state.isFromPreview?P(this.props.mail.body,210):this.props.mail.body}},{key:"formattedMailSender",get:function(){return this.props.mail.sender.split("@")[0]}}]),t}(r.a.Component),Ie=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={mail:null},a.loadMail=function(){Ne.getMailById(a.props.match.params.id).then((function(e){return a.setState((function(){return{mail:e}}))}))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.loadMail()}},{key:"render",value:function(){return this.state.mail?r.a.createElement(Re,{history:this.props.history,mail:this.state.mail,reloadMail:this.loadMail,isFromPreview:!1}):r.a.createElement("div",null,"Could not find mail")}}]),t}(r.a.Component),Ue=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onSortBy=function(e){var t=e.target.value,n=t===a.props.currSort.field?{prefix:-1*a.props.currSort.prefix}:{field:t};a.props.sortBy(n)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("ul",{className:"clean-list flex mail-list-sorting-menu"},r.a.createElement("li",null,r.a.createElement("input",{type:"radio",id:"sort-by-date",name:"sort-by",value:"sentAt",defaultChecked:!0,onClick:this.onSortBy}),r.a.createElement("label",{htmlFor:"sort-by-date"},"date ",r.a.createElement("i",{className:"fas fa-sort"}))),r.a.createElement("li",null,r.a.createElement("input",{type:"radio",id:"sort-by-origin",name:"sort-by",value:"sender",onClick:this.onSortBy}),r.a.createElement("label",{htmlFor:"sort-by-origin"},"Origin ",r.a.createElement("i",{className:"fas fa-sort"}))),r.a.createElement("li",null,r.a.createElement("input",{type:"radio",id:"sort-by-unread",name:"sort-by",value:"isRead",onClick:this.onSortBy}),r.a.createElement("label",{htmlFor:"sort-by-unread"},"unread ",r.a.createElement("i",{className:"fas fa-sort"}))))}}]),t}(r.a.Component),Fe=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isSelected:!1},a.toggleExpansion=function(){a.props.toggleMailExpansion(a.props.mail.id)},a.onToggleSelection=function(e){e.stopPropagation(),a.setState((function(e){return{isSelected:!e.isSelected}})),a.props.onSelectMail()},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.mail;return r.a.createElement("li",{onClick:this.toggleExpansion,className:this.state.isSelected?"selected":""},r.a.createElement("div",{className:"mail-preview"},r.a.createElement("div",{className:"sender-icon flex"},this.formattedMailSender.slice(0,1)),r.a.createElement("div",{className:"preview-text-wrapper"},r.a.createElement("span",{className:"mail-multi-selector"},r.a.createElement("input",{type:"checkbox",className:"mail-select-box",value:e.id,onClick:this.onToggleSelection,checked:this.isSelected})),r.a.createElement("span",{className:"mail-sender"},this.formattedMailSender),r.a.createElement("span",{className:"mail-subject"},r.a.createElement("div",{className:e.isRead?"":"bolded"},this.formattedMailSubject),this.formattedMailBody),r.a.createElement("span",{className:"mail-date"},this.formattedSentDate))),this.props.isExpanded?r.a.createElement(Re,{history:this.props.history,mail:e,reloadMail:this.props.reloadMails,isFromPreview:!0}):"")}},{key:"formattedMailSubject",get:function(){return P(this.props.mail.subject,30)}},{key:"formattedMailBody",get:function(){return P(this.props.mail.body,200)}},{key:"formattedMailSender",get:function(){return this.props.mail.sender.split("@")[0]}},{key:"formattedSentDate",get:function(){return N(this.props.mail.sentAt)}}]),t}(r.a.Component);function qe(e){return r.a.createElement("div",{className:"multi-select-options"+(e.isVisible?" visible":"")},r.a.createElement("select",{onChange:e.onOptionSelect,defaultValue:""},r.a.createElement("option",{value:""},"Mark As"),r.a.createElement("option",{value:"isRead,true"},"Read"),r.a.createElement("option",{value:"isRead,false"},"Unread"),r.a.createElement("option",{value:"isImportant,true"},"Important"),r.a.createElement("option",{value:"isImportant,false"},"Not Important"),r.a.createElement("option",{value:"isDeleted,true"},"Trash"),r.a.createElement("option",{value:"isDeleted,false"},"Not Trash")))}var Le=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={mails:[],currentPage:1,maxPage:1,mailsPerPage:10,removeNewMailEventListener:null,expandedMailId:null,sortBy:{field:"sentAt",prefix:1},searchString:null,selectedMails:[]},a.onSelectMail=function(){var e=Array.from(document.querySelectorAll("input.mail-select-box:checked")).map((function(e){return e.value}));a.setState({selectedMails:e})},a.onMarkSelectedAs=function(e){var t=e.target.value.split(","),n={items:a.state.selectedMails,field:t[0],value:"true"===t[1]};Ne.updateMultiple(n).then(a.loadMails)},a.loadMails=function(){var e=a.currentMailsFilter,t=a.state.sortBy,n=a.state.searchString,r=a.currentPaginationSettings;return Ne.getMailsToRender(e,t,n,r).then((function(e){return a.setState(Object(b.a)({},e))}))},a.toggleMailExpansion=function(e){a.setState((function(t){return{expandedMailId:t.expandedMailId===e?null:e}}))},a.sortBy=function(e){return a.setState((function(t){return{sortBy:Object(b.a)({},t.sortBy,{},e)}}),a.loadMails)},a.handleSearch=function(e){a.setState({searchString:e},a.loadMails)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.loadMails().then((function(){return v.emit("setSearchHandler",e.handleSearch)})),this.setState((function(){return{removeNewMailEventListener:v.on("mailAdd",(function(){e.loadMails(),v.emit("mailStateChanged")}))}})),"sendNote"===this.props.match.params.actionType&&v.callModal("regularModal",{component:Ae,sourceType:"note"})}},{key:"componentDidUpdate",value:function(e){var t=e.match.params.filterName,a=this.props.match.params.filterName,n=x("page",e.location.search),r=x("page",this.props.location.search);t===a&&n===r||this.loadMails()}},{key:"componentWillUnmount",value:function(){this.state.removeNewMailEventListener&&this.state.removeNewMailEventListener(),v.emit("setSearchHandler",null)}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex align-center space-between mail-list-options"},r.a.createElement(Ue,{sortBy:this.sortBy,currSort:this.state.sortBy}),r.a.createElement(I,{history:this.props.history,currentPage:this.state.currentPage,maxPage:this.state.maxPage})),r.a.createElement("ul",{className:"clean-list mails-list"+(this.state.mails.length<1?" no-content":"")},this.state.mails.map((function(t,a){return r.a.createElement(Fe,{toggleMailExpansion:e.toggleMailExpansion,isExpanded:e.state.expandedMailId===t.id,mail:t,key:a,history:e.props.history,currFilter:e.getCurrentMailsFilter,reloadMails:e.loadMails,onSelectMail:e.onSelectMail})}))),r.a.createElement(qe,{onOptionSelect:this.onMarkSelectedAs,isVisible:!!this.state.selectedMails.length}))}},{key:"currentMailsFilter",get:function(){switch(this.props.match.params.filterName){case"important":return{name:"isImportant",value:!0};case"trash":return{name:"isDeleted",value:!0};case"all":return{name:"all",value:!0};default:return null}}},{key:"currentPaginationSettings",get:function(){return{currentPage:parseInt(x("page",this.props.location.search)),mailsPerPage:this.state.mailsPerPage}}}]),t}(r.a.Component);function He(e){var t=r.a.createElement("span",{className:"progress-bar",style:{width:e.readPercentage+"%"}});return r.a.createElement("div",{className:"mailbox-status"},t,r.a.createElement("span",{className:"progress-text flex auto-center"},e.readPercentage+"%"))}var Je=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={unreadCounters:{inbox:0,important:0,trash:0,readPercentage:0},removeMailReadEventListener:null},a.onNewMailFormToggle=function(){v.callModal("regularModal",{component:Ae})},a.displayUnread=function(e){return a.state.unreadCounters[e]?" (".concat(a.state.unreadCounters[e],")"):""},a.getUnreadCounter=function(){Ne.getUnreadMailsCounter().then((function(e){return a.setState((function(){return{unreadCounters:e}}))}))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.getUnreadCounter(),this.setState((function(){return{removeMailReadEventListener:v.on("mailStateChanged",e.getUnreadCounter)}}))}},{key:"componentWillUnmount",value:function(){this.state.removeMailReadEventListener&&this.state.removeMailReadEventListener()}},{key:"render",value:function(){return r.a.createElement("nav",{className:"mails-side-nav"},r.a.createElement("button",{onClick:this.onNewMailFormToggle,className:"new-mail-btn"},"Compose ",r.a.createElement("span",null,"+")),r.a.createElement("ul",{className:"clean-list flex column main-sidenav-list"},r.a.createElement("li",null,r.a.createElement(D.b,{activeClassName:"active",to:"/mail/filter/all"},r.a.createElement("i",{className:"fas fa-mail-bulk"}),"All Mails")),r.a.createElement("li",null,r.a.createElement(D.b,{activeClassName:"active",to:"/mail",exact:!0},r.a.createElement("i",{className:"fas fa-inbox"}),"Inbox",this.displayUnread("inbox"))),r.a.createElement("li",null,r.a.createElement(D.b,{activeClassName:"active",to:"/mail/filter/sent"},r.a.createElement("i",{className:"far fa-paper-plane"}),"Sent Items")),r.a.createElement("li",null,r.a.createElement(D.b,{activeClassName:"active",to:"/mail/filter/important"},r.a.createElement("i",{className:"far fa-bookmark"}),"Important",this.displayUnread("important"))),r.a.createElement("li",null,r.a.createElement(D.b,{activeClassName:"active",to:"/mail/filter/trash"},r.a.createElement("i",{className:"fas fa-trash"}),"Trash",this.displayUnread("trash")))),r.a.createElement(He,{readPercentage:this.state.unreadCounters.readPercentage}))}}]),t}(r.a.Component),ze=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(p.b,{history:this.props.history},r.a.createElement("div",{className:"mail-main-wrapper"},r.a.createElement(Je,null),r.a.createElement("section",{className:"mail-main-content"},r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/mail/filter/:filterName",exact:!0,component:Le}),r.a.createElement(p.a,{path:"/mail/action/:actionType",exact:!0,component:Le}),r.a.createElement(p.a,{path:"/mail/:id",exact:!0,component:Ie}),r.a.createElement(p.a,{path:"/mail",exact:!0,component:Le})))))}}]),t}(r.a.Component),Ye=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).closeMenu=function(){window.onscroll=null,a.props.closeMenu()},a.onKeyUp=function(e){"Escape"===e.key&&a.props.closeMenu()},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.closeMenu),window.addEventListener("keyup",this.onKeyUp)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.closeMenu),window.removeEventListener("keyup",this.onKeyUp)}},{key:"render",value:function(){return r.a.createElement("div",{className:"menus-toggler",onClick:this.closeMenu})}}]),t}(r.a.Component),We=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={currentSearchHandler:null,searchString:""},a.handleSearchInput=function(e){var t=e.target.value;a.setState({searchString:t},(function(){return a.state.currentSearchHandler(a.state.searchString)}))},a.setCurrentSearchHandler=function(e){a.setState({currentSearchHandler:e})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){v.on("setSearchHandler",this.setCurrentSearchHandler)}},{key:"render",value:function(){return this.state.currentSearchHandler?r.a.createElement("div",{className:"main-search-box"},r.a.createElement("input",{type:"search",className:"normal-trans",onChange:this.handleSearchInput,value:this.state.searchString,placeholder:"Search here!"})):""}}]),t}(r.a.Component),Ge=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isMenuOpen:!1},a.toggleMenu=function(){a.setState((function(e){return{isMenuOpen:!e.isMenuOpen}}))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"main-nav-links"},r.a.createElement("button",{className:"simple-button",onClick:this.toggleMenu},r.a.createElement("svg",{className:"gb_Se",focusable:"false",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M6,8c1.1,0 2,-0.9 2,-2s-0.9,-2 -2,-2 -2,0.9 -2,2 0.9,2 2,2zM12,20c1.1,0 2,-0.9 2,-2s-0.9,-2 -2,-2 -2,0.9 -2,2 0.9,2 2,2zM6,20c1.1,0 2,-0.9 2,-2s-0.9,-2 -2,-2 -2,0.9 -2,2 0.9,2 2,2zM6,14c1.1,0 2,-0.9 2,-2s-0.9,-2 -2,-2 -2,0.9 -2,2 0.9,2 2,2zM12,14c1.1,0 2,-0.9 2,-2s-0.9,-2 -2,-2 -2,0.9 -2,2 0.9,2 2,2zM16,6c0,1.1 0.9,2 2,2s2,-0.9 2,-2 -0.9,-2 -2,-2 -2,0.9 -2,2zM12,8c1.1,0 2,-0.9 2,-2s-0.9,-2 -2,-2 -2,0.9 -2,2 0.9,2 2,2zM18,14c1.1,0 2,-0.9 2,-2s-0.9,-2 -2,-2 -2,0.9 -2,2 0.9,2 2,2zM18,20c1.1,0 2,-0.9 2,-2s-0.9,-2 -2,-2 -2,0.9 -2,2 0.9,2 2,2z"}))),r.a.createElement("ul",{className:"main-nav-links-list clean-list flex space-between normal-trans"+(this.state.isMenuOpen?" open":""),onMouseOut:this.moveOutside},r.a.createElement("li",null,r.a.createElement(D.b,{activeClassName:"active",to:"/",exact:!0,onClick:this.toggleMenu},r.a.createElement("i",{className:"fas fa-home"}),"Home")),r.a.createElement("li",null,r.a.createElement(D.b,{activeClassName:"active",to:"/books",onClick:this.toggleMenu},r.a.createElement("i",{className:"fas fa-book"}),"Books")),r.a.createElement("li",null,r.a.createElement(D.b,{activeClassName:"active",to:"/keep",onClick:this.toggleMenu},r.a.createElement("i",{className:"far fa-sticky-note"}),"Keep")),r.a.createElement("li",null,r.a.createElement(D.b,{activeClassName:"active",to:"/mail",onClick:this.toggleMenu},r.a.createElement("i",{className:"far fa-envelope"}),"Mail"))),this.state.isMenuOpen?r.a.createElement(Ye,{closeMenu:this.toggleMenu}):"")}}]),t}(r.a.Component),Ke=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={currAppMenuOpen:!1},a.toggleCurrAppMenu=function(){!window.location.pathname.includes("/mail")||document.body.offsetWidth>700||a.setState((function(e){return{currAppMenuOpen:!e.currAppMenuOpen}}))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"main-nav flex align-center"+(this.state.currAppMenuOpen?" sub-menu-open":"")},this.state.currAppMenuOpen?r.a.createElement(Ye,{closeMenu:this.toggleCurrAppMenu}):"",r.a.createElement("div",{className:"main-nav-logo"},r.a.createElement("img",{alt:"",src:"images/logo.png",onClick:this.toggleCurrAppMenu})),r.a.createElement(We,null),r.a.createElement(Ge,null))}}]),t}(r.a.Component);function Ve(e){return r.a.createElement("div",{className:"updates-box "+(e.modalData.type?e.modalData.type:"")},e.modalData.message)}var _e=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isClosing:!1},a.onModalClose=function(e){a.setState((function(){return setTimeout((function(){return a.props.onModalClose(e)}),400),{isClosing:!0}}))},a.onKeyUp=function(e){"Escape"===e.key&&a.onModalClose()},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keyup",this.onKeyUp)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keyup",this.onKeyUp)}},{key:"render",value:function(){var e=this.props.modalData.component;return r.a.createElement("div",{className:"modal-wrapper"+(this.state.isClosing?" fade-out":""),onClick:this.onModalClose},r.a.createElement("div",{className:"modal-content",onClick:function(e){return e.stopPropagation()}},r.a.createElement(e,{onModalClose:this.onModalClose,transData:this.props.modalData})))}}]),t}(r.a.Component);function Qe(){return r.a.createElement("div",{className:"page-loading-screen flex auto-center"},r.a.createElement("img",{alt:"loading",src:"./assets/images/loader.gif"}))}var Xe=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onConfirm=function(){a.props.onModalClose(),a.props.transData.onConfirmAction()},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"confirmation-modal flex auto-center"},r.a.createElement("h4",null,this.props.transData.message),r.a.createElement("div",{className:"confirmation-modal-btns"},r.a.createElement("button",{className:"simple-button cancel",onClick:this.props.onModalClose},this.props.transData.labels?this.props.transData.labels.cancel:"Cancel"),r.a.createElement("button",{className:"simple-button confirm",onClick:this.onConfirm},this.props.transData.labels?this.props.transData.labels.confirm:"Confirm")))}}]),t}(r.a.Component),Ze=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={regularModalShown:null,pageLoadingShown:null,updatesBoxShown:null,updatesBoxTimer:null,confirmationShown:null},a.showModal=function(e){return"updatesBox"===e.modalType&&a.setUpdatesBox(),a.setState(Object(Y.a)({},e.modalType+"Shown",e.props))},a.hideModal=function(e){a.setState(Object(Y.a)({},e+"Shown",null))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"setUpdatesBox",value:function(){var e=this;this.state.updatesBoxTimer&&(clearTimeout(this.state.updatesBoxTimer),this.setState({updatesBoxTimer:null})),this.setState({updatesBoxTimer:setTimeout((function(){return e.hideModal("updatesBox")}),2500)})}},{key:"componentDidMount",value:function(){v.on("callModal",this.showModal)}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.state.confirmationShown?r.a.createElement(_e,{modalData:Object(b.a)({component:Xe},this.state.confirmationShown),onModalClose:function(){return e.hideModal("confirmation")}}):"",this.state.pageLoadingShown?r.a.createElement(Qe,null):"",this.state.regularModalShown?r.a.createElement(_e,{modalData:this.state.regularModalShown,onModalClose:function(){return e.hideModal("regularModal")}}):"",this.state.updatesBoxShown&&this.state.updatesBoxTimer?r.a.createElement(Ve,{modalData:this.state.updatesBoxShown}):"")}}]),t}(r.a.Component),$e=Object(d.a)(),et=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(p.b,{history:$e},r.a.createElement(Ze,null),r.a.createElement(Ke,null),r.a.createElement("main",null,r.a.createElement(p.c,null,r.a.createElement(p.a,{component:je,path:"/keep",exact:!0}),r.a.createElement(p.a,{component:_,path:"/books"}),r.a.createElement(p.a,{component:ze,path:"/mail"}),r.a.createElement(p.a,{component:f,path:"/about",exact:!0}),r.a.createElement(p.a,{component:h,path:"/",exact:!0}),r.a.createElement(p.a,{component:g,path:"/"}))))}}]),t}(r.a.Component);i.a.render(r.a.createElement(et,null),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.8eb991ed.chunk.js.map