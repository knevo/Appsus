{"version":3,"sources":["pages/Landing.jsx","pages/About.jsx","pages/NotFound.jsx","services/eventBusService.js","services/storageService.js","apps/Books/services/models/Book.js","apps/Books/services/books-service.js","apps/Books/services/books-list.js","services/Utils.js","apps/Books/cmps/BooksList/BookPreview.jsx","apps/Books/cmps/BooksList/BooksFilter.jsx","apps/Books/cmps/BooksList/BooksAddFromSearch/BooksSearchResults.jsx","apps/Books/cmps/BooksList/BooksAddFromSearch.jsx","cmps/PaginationMenu.jsx","apps/Books/pages/BooksList.jsx","cmps/GoBackButton.jsx","apps/Books/cmps/BookView/BookBadges.jsx","apps/Keep/services/keepService.js","cmps/LongTxt.jsx","apps/Books/cmps/BookView/ReviewsSection/ReviewsList/BookReviewPreview.jsx","apps/Books/cmps/BookView/ReviewsSection/BookReviewsList.jsx","apps/Books/cmps/BookView/ReviewsSection/ReviewForm/RatingComponent.jsx","apps/Books/cmps/BookView/ReviewsSection/ReviewForm.jsx","apps/Books/cmps/BookView/ReviewsSection.jsx","apps/Books/pages/BookView.jsx","apps/Books/BooksApp.jsx","apps/Keep/services/noteModel.js","apps/Keep/cmps/AddNote.jsx","apps/Keep/cmps/ResizableTextArea.jsx","apps/Keep/cmps/NotePreviewTypes/TxtNotePreview.jsx","apps/Keep/cmps/NotePreviewTypes/ImgNotePreview.jsx","apps/Keep/cmps/AddTodo.jsx","apps/Keep/cmps/NotePreviewTypes/TodoNotePreview.jsx","apps/Keep/cmps/NotePreviewTypes/VideoNotePreview.jsx","apps/Keep/cmps/NotePreviewTypes/MapsNotePreview.jsx","apps/Keep/cmps/NotePreviews/mapNotePreview.js","apps/Keep/cmps/NotePreviewTypes/MusicNotePreview.jsx","apps/Keep/cmps/NotePreviews/TitleInput.jsx","apps/Keep/cmps/NotePreviews/DeleteBtn.jsx","apps/Keep/cmps/NotePreviews/PinBtn.jsx","apps/Keep/cmps/NotePreviews/ColorPicker.jsx","apps/Keep/cmps/NotePreviews/ToolBar.jsx","apps/Keep/cmps/NotePreviews/NotePreview.jsx","apps/Keep/cmps/NoteList.jsx","apps/Keep/KeepApp.jsx","apps/Mail/services/mailModel.js","apps/Mail/services/mailService.js","apps/Mail/cmps/MailDetails/MailFullDisplay/MailButtons.jsx","apps/Mail/cmps/NewMailForm.jsx","apps/Mail/cmps/MailDetails/MailFullDisplay.jsx","apps/Mail/cmps/MailDetails.jsx","apps/Mail/cmps/MailList/MailListSortingMenu.jsx","apps/Mail/cmps/MailList/MailPreview.jsx","apps/Mail/cmps/MailList/MultSelectBox.jsx","apps/Mail/cmps/MailList.jsx","apps/Mail/cmps/MailSideNav/MailReadProgress.jsx","apps/Mail/cmps/MailSideNav.jsx","apps/Mail/MailApp.jsx","cmps/Modal/MenusToggler.jsx","cmps/Navbar/SearchBox.jsx","cmps/Navbar/MainNavLinks.jsx","cmps/Navbar.jsx","cmps/Modal/UpdatesBox.jsx","cmps/Modal/RegularModal.jsx","cmps/Modal/PageLoading.jsx","cmps/Modal/Confirmation.jsx","cmps/Modal.jsx","App.jsx","index.js"],"names":["Home","className","alt","src","React","Component","About","NotFound","on","eventName","listener","callListener","detail","window","addEventListener","removeEventListener","emit","callModal","modalType","props","data","dispatchEvent","CustomEvent","saveToStorage","key","value","str","JSON","stringify","localStorage","setItem","loadFromStorage","defaultValue","getItem","parse","Book","googleBookObj","bookData","volumeInfo","this","id","title","subtitle","authors","publishedDate","description","pageCount","categories","thumbnail","imageLinks","language","listPrice","amount","currencyCode","isOnSale","reviews","addBookFromGoogle","createdBook","gBooks","slice","push","storageService","Promise","resolve","getBooks","filterBy","pagination","books","filter","book","toLowerCase","includes","name","price","maxPage","Math","ceil","length","booksPerPage","currentPage","startIndex","endIndex","getBookById","bookID","foundBook","find","deleteBookById","editBookById","updates","updatedBook","map","searchBooks","searchStr","axios","get","then","result","items","catch","error","console","log","getPriceString","currency","loadBooks","getRandomId","txt","possible","i","charAt","floor","random","getFormattedTimeString","ts","Date","now","time","getHours","getMinutes","getTodayTime","d","getDate","getMonth","getFullYear","formatTsToInput","date","join","getUrlParams","paramName","searchUrl","URLSearchParams","sliceStringByLength","BookPreview","to","booksService","BooksFilter","state","boxDisplayed","toggleFilter","setState","prevState","handleInput","event","target","onFilter","Fragment","onClick","type","step","min","max","onChange","BooksSearchResults","keyIdx","onSelectBook","searchResults","idx","getResultPreview","BooksAddFromSearch","currentSearchResults","searchOpen","toggleSearch","inputValue","eventBusService","message","placeholder","PaginationMenu","handlePageToggling","diff","history","disabled","BooksList","currentPaginationSettings","handleSearch","componentDidMount","prevProps","location","search","index","parseInt","GoBackButton","onReturn","BookBadges","lengthBadge","bookAge","publishDate","gNotes","LongTxt","isSliced","handleClick","getToggleLinkStr","bookDescription","strLength","getText","BookReviewPreview","getRateString","reviewData","rate","getDateString","readDate","split","reverse","fullName","text","BookReviewsList","reviewsData","review","RatingComponenet","ratingSelected","setRating","dataset","onUpdateRating","getRatingButtons","buttons","data-value","ReviewForm","formData","animationClass","handleSubmit","preventDefault","transData","onReviewAdd","onModalClose","handleChange","field","rating","fullNameInputRef","current","focus","createRef","onSubmit","htmlFor","ref","required","ReviewsSection","showReviewModal","component","BookView","status","loadBook","match","params","onDelete","updatedReviews","getBookPrice","getColorClassByPrice","toUpperCase","BooksApp","path","exact","Note","details","draft","isPinned","style","backgroundColor","color","addNote","isDraft","loadNotes","newNote","saveNotes","deleteNote","noteId","noteIdx","findIndex","note","getNoteIdxById","splice","todos","isDone","url","place","getNoteById","foundNote","getNotesToRender","searchString","filteredNotes","sortPinned","todo","searchNotes","arrayToSort","sort","note1","note2","updateNoteById","noteToUpdate","updateTodos","todosToUpdate","updatedTodo","newTodos","togglePin","noteToPin","addTodo","todoTxt","AddNote","draftNote","onInputChange","ev","onAddNote","makeDetails","onAdd","onTypeChange","types","ResizeableTextArea","rows","handleResize","isUpdate","textareaLineHeight","previousRows","currentRows","scrollHeight","scrollTop","updateNote","isAddTodo","handleUpdate","onAddTodo","handleRerender","onKeyPress","onBlur","spellCheck","styles","defaultText","TxtNotePreview","ImgNotePreview","AddTodo","onRerender","newTodo","handleAdd","TodoNotePreview","toggleTodo","defaultChecked","textDecoration","VideoNotePreview","renderVideo","width","height","getIdfromYoutubeUrl","controls","MapsNotePreview","frameBorder","scrolling","marginHeight","marginWidth","img","video","music","renderMusic","getSpotifyIdFromUrl","allowtransparency","allow","maps","TitleInput","onTitleChange","DeleteBtn","handleDelete","PinBtn","handlePin","ColorPicker","isOpen","setColor","onToggle","isText","icon","colors","ToolBar","BG_COLORS","TEXT_COLORS","onChangeBgColor","newColor","onUpdateTextColor","handleSendToMail","NotePreview","onUpdate","updatedFields","reloadNotes","onDeleteNote","onConfirmAction","onPinNote","onSendToMail","content","open","Preview","mapNotePreview","textStyle","getPreviewCmp","NoteList","pinnedNotes","notes","handleReload","isTherePinned","checkPinned","pinned","Mail","targetAddress","copies","subject","body","sentAt","isImportant","sender","cc","isRead","isDeleted","addMail","gMails","newMail","saveMails","deleteMailById","mailId","mailIdx","mail","getMailIdxById","getMailById","getMailsToRender","sortBy","mails","mailsPerPage","sortMails","updateMailById","getUnreadMailsCounter","counter","inbox","important","trash","readPercentage","reduce","acc","sendMailToTrash","getFormDataFromSource","transferredData","sourceType","formTitle","mailToQuote","noteContentPrefix","windowSearch","hash","noteType","noteSubject","noteContent","buildFormFromNote","updateMultiple","multUpdates","forEach","loadedMails","newMails","createTestMails","loadMails","mailA","mailB","prefix","MailButtons","onUpdateMail","mailService","reloadMail","onDeleteMail","stopPropagation","confirmDeletion","isFromPreview","assign","onShowMailDetails","onToggleMailRead","onToggleMailInTrash","onToggleMailImportance","goBack","onReplyToMail","NewMailForm","onFormSubmit","mailData","buildFormFromSource","action","method","MailFullDisplay","formattedMailSender","formattedBodyText","MailDetails","loadMail","foundMail","MailListSortingMenu","onSortBy","sortByField","updatedSorting","currSort","MailPreview","isSelected","toggleExpansion","toggleMailExpansion","onToggleSelection","onSelectMail","checked","formattedMailSubject","formattedMailBody","formattedSentDate","isExpanded","reloadMails","MultSelectBox","isVisible","onOptionSelect","MailList","removeNewMailEventListener","expandedMailId","selectedMails","Array","from","document","querySelectorAll","elCheckedBox","onMarkSelectedAs","selection","currentMailsFilter","sortOrder","paginationSettings","mailsToRender","updatedField","actionType","prevDisplayFilter","filterName","currDisplayFilter","prevDisplayPage","currDisplayPage","currFilter","getCurrentMailsFilter","MailReadProgress","progressBar","MailSideNav","unreadCounters","removeMailReadEventListener","onNewMailFormToggle","displayUnread","itemsType","getUnreadCounter","activeClassName","MailApp","MenusToggler","closeMenu","onscroll","onKeyUp","SearchBox","currentSearchHandler","handleSearchInput","setCurrentSearchHandler","searchHandler","MainNavLinks","isMenuOpen","toggleMenu","focusable","viewBox","onMouseOut","moveOutside","Navbar","currAppMenuOpen","toggleCurrAppMenu","pathname","offsetWidth","UpdatesBox","modalData","RegularModal","isClosing","setTimeout","DynamicComponent","PageLoading","Confirmation","onConfirm","labels","cancel","confirm","Modal","regularModalShown","pageLoadingShown","updatesBoxShown","updatesBoxTimer","confirmationShown","showModal","setUpdatesBox","hideModal","clearTimeout","createBrowserHistory","App","KeepApp","Landing","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.8eb991ed.chunk.js","sourcesContent":["import React from 'react'\r\nexport default class Home extends React.Component {\r\n    render() {\r\n        return (\r\n            <div className='landing-container'>\r\n                <div className=\"landing-block main\">\r\n                    <img alt='logo' src=\"images/logo.png\" />\r\n                    <h1>Appsus</h1>\r\n                    <h2>Three powerful Apps in a single place - Simple and Elegant.</h2>\r\n                </div>\r\n                <div className='landing-block books'>\r\n                    <div className=\"block-text\">\r\n                        <h2>Books</h2>\r\n                        <h4>All the Books are just one click away!</h4>\r\n                    </div>\r\n                </div>\r\n                <div className='landing-block keep'>\r\n                    <div className=\"block-text\">\r\n                        <h2>Keep</h2>\r\n                        <h4>Keep and save everything you wish!</h4>\r\n                    </div>\r\n                </div>\r\n                <div className='landing-block mail'>\r\n                    <div className=\"block-text\">\r\n                        <h2>Mail</h2>\r\n                        <h4>Powerful mail app - with all features needed.</h4>\r\n                    </div>\r\n                </div>\r\n            </div>);\r\n    }\r\n}","import React from 'react';\r\nexport default class About extends React.Component {\r\n    render() {\r\n        return <div>Some About page</div>;\r\n    }\r\n}","import React from 'react'\r\nexport default class NotFound extends React.Component {\r\n    render() {\r\n        return <div>Could not find this page</div>;\r\n    }\r\n}","export default {\r\n    on,\r\n    emit,\r\n    callModal\r\n};\r\n\r\nfunction on(eventName, listener) {\r\n    const callListener = ({\r\n        detail\r\n    }) => listener(detail);\r\n\r\n    window.addEventListener(eventName, callListener);\r\n\r\n    return () => window.removeEventListener(eventName, callListener);\r\n}\r\n\r\nfunction emit(eventName, data) {\r\n    window.dispatchEvent(new CustomEvent(eventName, { detail: data }));\r\n}\r\n\r\nfunction callModal(modalType, props) {\r\n    return emit('callModal', { modalType, props });\r\n}","export default {\r\n    saveToStorage,\r\n    loadFromStorage\r\n}\r\n\r\nfunction saveToStorage(key, value) {\r\n    var str = JSON.stringify(value);\r\n    localStorage.setItem(key, str);\r\n}\r\n\r\nfunction loadFromStorage(key, defaultValue) {\r\n    return localStorage.getItem(key) ? JSON.parse(localStorage.getItem(key)) : defaultValue;\r\n}","export default class Book {\r\n    constructor(googleBookObj) {\r\n        let bookData = googleBookObj.volumeInfo;\r\n\r\n        this.id = googleBookObj.id;\r\n        this.title = bookData.title;\r\n        this.subtitle = bookData.subtitle ? bookData.subtitle : 'N/A';\r\n        this.authors = bookData.authors ? bookData.authors : ['N/A'];\r\n        this.publishedDate = bookData.publishedDate;\r\n        this.description = bookData.description ? bookData.description : 'N/A';\r\n        this.pageCount = bookData.pageCount ? bookData.pageCount : 0;\r\n        this.categories = bookData.categories ? bookData.categories : ['N/A'];\r\n        this.thumbnail = bookData.imageLinks ? bookData.imageLinks.thumbnail : 'https://www.globaluniversityalliance.org/wp-content/uploads/2017/10/No-Cover-Image-01.png';\r\n        this.language = bookData.language ? bookData.language : 'N/A';\r\n        this.listPrice = {\r\n            amount: bookData.listPrice ? bookData.listPrice.amount : 1,\r\n            currencyCode: bookData.listPrice ? bookData.listPrice.currencyCode : 'USD',\r\n            isOnSale: false\r\n        };\r\n        this.reviews = []\r\n    }\r\n}","import axios from 'axios'\r\nimport storageService from '../../../services/storageService.js';\r\nimport createBooksList from './books-list.js';\r\nimport Book from './models/Book.js';\r\n\r\nexport default {\r\n    addBookFromGoogle,\r\n    getBooks,\r\n    getBookById,\r\n    deleteBookById,\r\n    editBookById,\r\n    searchBooks,\r\n    getPriceString\r\n};\r\n\r\nlet gBooks = loadBooks();\r\n\r\nfunction addBookFromGoogle(googleBookObj) {\r\n    let createdBook = new Book(googleBookObj);\r\n    gBooks = gBooks.slice();\r\n    gBooks.push(createdBook);\r\n    storageService.saveToStorage('gBooks', gBooks);\r\n\r\n    return Promise.resolve(createdBook);\r\n}\r\n\r\nfunction getBooks(filterBy, pagination) {\r\n    let books = !filterBy ? gBooks.slice() : gBooks.filter(book => {\r\n        if (!filterBy) return true;\r\n        return book.title.toLowerCase().includes(filterBy.name.toLowerCase()) && book.listPrice.amount <= filterBy.price;\r\n    });\r\n\r\n    let maxPage = Math.ceil(books.length / pagination.booksPerPage);\r\n    let currentPage = pagination.currentPage < 1 || pagination.currentPage > maxPage || !pagination.currentPage ? 1 : pagination.currentPage;\r\n\r\n    let startIndex = (currentPage - 1) * pagination.booksPerPage,\r\n        endIndex = startIndex + pagination.booksPerPage;\r\n\r\n    books = books.slice(startIndex, endIndex);\r\n\r\n    return Promise.resolve({ books, currentPage, maxPage });\r\n}\r\n\r\nfunction getBookById(bookID) {\r\n    let foundBook = gBooks.find(book => book.id === bookID);\r\n    return Promise.resolve(foundBook);\r\n}\r\n\r\nfunction deleteBookById(bookID) {\r\n    gBooks = gBooks.filter(book => book.id === bookID);\r\n    storageService.saveToStorage('gBooks', gBooks);\r\n    return Promise.resolve(true);\r\n}\r\n\r\nfunction editBookById(bookID, updates) {\r\n    let updatedBook;\r\n    gBooks = gBooks.map(book => {\r\n        if (book.id === bookID) {\r\n            updatedBook = {\r\n                ...book,\r\n                ...updates\r\n            };\r\n            return updatedBook;\r\n        } else return book;\r\n    });\r\n\r\n    storageService.saveToStorage('gBooks', gBooks);\r\n\r\n    return Promise.resolve(updatedBook);\r\n}\r\n\r\nfunction searchBooks(searchStr) {\r\n    return axios.get(`https://www.googleapis.com/books/v1/volumes?q=${searchStr}&key=AIzaSyDARh-8oqGeyXu3wApEP7jwP2w_NRjTdY8`)\r\n        .then(result => result.data.items).catch(error => console.log(error));\r\n}\r\n\r\nfunction loadBooks() {\r\n    let books = storageService.loadFromStorage('gBooks', null);\r\n    return books ? books : createBooksList();\r\n}\r\n\r\nfunction getPriceString(price, currency) {\r\n    switch (currency) {\r\n        case 'USD':\r\n            return '$' + price;\r\n        case 'ILS':\r\n            return price + '₪';\r\n        case 'EUR':\r\n            return '€' + price;\r\n        default:\r\n            break;\r\n    }\r\n}","export default function createBooksList() {\r\n    return [{\r\n        id: \"OXeMG8wNskc\",\r\n        title: \"metus hendrerit\",\r\n        subtitle: \"mi est eros convallis auctor arcu dapibus himenaeos\",\r\n        authors: [\r\n            \"Barbara\", \"Cartland\"\r\n        ],\r\n        publishedDate: 1999,\r\n        description: \"placerat nisi sodales suscipit tellus tincidunt mauris elit sit luctus interdum ad dictum platea vehicula conubia fermentum habitasse congue suspendisse\",\r\n        pageCount: 713,\r\n        categories: [\"Computers\", \"Hack\"],\r\n        thumbnail: \"http://coding-academy.org/books-photos/20.jpg\",\r\n        reviews: [],\r\n        language: \"en\",\r\n        listPrice: {\r\n            amount: 109,\r\n            currencyCode: \"EUR\",\r\n            isOnSale: false\r\n        }\r\n    },\r\n    {\r\n        id: \"JYOJa2NpSCq\",\r\n        title: \"morbi\",\r\n        subtitle: \"lorem euismod dictumst inceptos mi\",\r\n        authors: [\"Barbara\", \"Cartland\"],\r\n        publishedDate: 1978,\r\n        description: \"aliquam pretium lorem laoreet etiam odio cubilia iaculis placerat aliquam tempor nisl auctor\",\r\n        pageCount: 129,\r\n        categories: [\"Computers\", \"Hack\"],\r\n        thumbnail: \"http://coding-academy.org/books-photos/14.jpg\",\r\n        reviews: [],\r\n        language: \"sp\",\r\n        listPrice: {\r\n            amount: 44,\r\n            currencyCode: \"EUR\",\r\n            isOnSale: true\r\n        }\r\n    },\r\n    {\r\n        id: \"1y0Oqts35DQ\",\r\n        title: \"at viverra venenatis\",\r\n        subtitle: \"gravida libero facilisis rhoncus urna etiam\",\r\n        authors: [\r\n            \"Dr.Seuss\"\r\n        ],\r\n        publishedDate: 1999,\r\n        description: \"lorem molestie ut euismod ad quis mi ultricies nisl cursus suspendisse dui tempor sit suscipit metus etiam euismod tortor sagittis habitant\",\r\n        pageCount: 972,\r\n        categories: [\r\n            \"Computers \",\r\n            \"Hack\"\r\n        ],\r\n        thumbnail: \"http://coding-academy.org/books-photos/2.jpg\",\r\n        reviews: [],\r\n        language: \"he\",\r\n        listPrice: {\r\n            amount: 108,\r\n            currencyCode: \"ILS\",\r\n            isOnSale: false\r\n        }\r\n    },\r\n    {\r\n        id: \"kSnfIJyikTP\",\r\n        title: \"dictum\",\r\n        subtitle: \"augue eu consectetur class curabitur conubia ligula in ullamcorper\",\r\n        authors: [\r\n            \"Danielle\", \"Steel\"\r\n        ],\r\n        publishedDate: 1978,\r\n        description: \"interdum inceptos mauris habitant primis neque tempus lacus morbi auctor cras consectetur euismod vehicula neque netus enim vivamus augue molestie imperdiet tincidunt aliquam\",\r\n        pageCount: 303,\r\n        categories: [\r\n            \"Computers \",\r\n            \"Hack\"\r\n        ],\r\n        thumbnail: \"http://coding-academy.org/books-photos/16.jpg\",\r\n        reviews: [],\r\n        language: \"en\",\r\n        listPrice: {\r\n            amount: 30,\r\n            currencyCode: \"EUR\",\r\n            isOnSale: true\r\n        }\r\n    },\r\n    {\r\n        id: \"f4iuVmbuKCC\",\r\n        title: \"sem himenaeos aptent\",\r\n        subtitle: \"interdum per habitasse luctus purus est\",\r\n        authors: [\r\n            \"Dr.Seuss\"\r\n        ],\r\n        publishedDate: 2011,\r\n        description: \"et vehicula faucibus amet accumsan lectus cras nulla cubilia arcu neque litora mi habitasse quis amet augue facilisis sed\",\r\n        pageCount: 337,\r\n        categories: [\r\n            \"Computers \",\r\n            \"Hack\"\r\n        ],\r\n        thumbnail: \"http://coding-academy.org/books-photos/12.jpg\",\r\n        reviews: [],\r\n        language: \"sp\",\r\n        listPrice: {\r\n            amount: 19,\r\n            currencyCode: \"USD\",\r\n            isOnSale: false\r\n        }\r\n    },\r\n    {\r\n        id: \"U2rfZO6oBZf\",\r\n        title: \"mi ante posuere\",\r\n        subtitle: \"sapien curae consectetur ultrices fringilla blandit ipsum curae faucibus\",\r\n        authors: [\r\n            \"Leo Tolstoy\"\r\n        ],\r\n        publishedDate: 1978,\r\n        description: \"senectus habitant nam imperdiet nostra elit dapibus nisl adipiscing in\",\r\n        pageCount: 748,\r\n        categories: [\r\n            \"Computers\",\r\n            \"Hack\"\r\n        ],\r\n        thumbnail: \"http://coding-academy.org/books-photos/1.jpg\",\r\n        reviews: [],\r\n        language: \"en\",\r\n        listPrice: {\r\n            amount: 91,\r\n            currencyCode: \"USD\",\r\n            isOnSale: true\r\n        }\r\n    },\r\n    {\r\n        id: \"xI0wrXaaAcq\",\r\n        title: \"non\",\r\n        subtitle: \"leo tortor per dapibus mattis ut conubia porttitor ligula viverra\",\r\n        authors: [\r\n            \"Leo Tolstoy\"\r\n        ],\r\n        publishedDate: 2011,\r\n        description: \"nec scelerisque id cursus platea sit ullamcorper bibendum ultrices tempus ante mi aliquet cras tortor dapibus dictum scelerisque\",\r\n        pageCount: 65,\r\n        categories: [\r\n            \"Computers \",\r\n            \"Hack\"\r\n        ],\r\n        thumbnail: \"http://coding-academy.org/books-photos/14.jpg\",\r\n        reviews: [],\r\n        language: \"he\",\r\n        listPrice: {\r\n            amount: 90,\r\n            currencyCode: \"USD\",\r\n            isOnSale: false\r\n        }\r\n    },\r\n    {\r\n        id: \"9laHCEdSpFy\",\r\n        title: \"tristique\",\r\n        subtitle: \"consectetur a eu tincidunt condimentum amet nisi\",\r\n        authors: [\r\n            \"Dr.Seuss\"\r\n        ],\r\n        publishedDate: 1999,\r\n        description: \"magna quisque venenatis laoreet purus in semper habitant proin pellentesque sed egestas cursus faucibus nam enim id sit mi ligula risus curabitur senectus curabitur sodales fames sem\",\r\n        pageCount: 299,\r\n        categories: [\r\n            \"Computers \",\r\n            \"Hack\"\r\n        ],\r\n        thumbnail: \"http://coding-academy.org/books-photos/11.jpg\",\r\n        reviews: [],\r\n        language: \"he\",\r\n        listPrice: {\r\n            amount: 176,\r\n            currencyCode: \"EUR\",\r\n            isOnSale: false\r\n        }\r\n    },\r\n    {\r\n        id: \"nGhVwZvGCGp\",\r\n        title: \"urna ornare gravida\",\r\n        subtitle: \"sem vestibulum semper convallis pharetra tempor himenaeos ut\",\r\n        authors: [\r\n            \"Jin Yong\"\r\n        ],\r\n        publishedDate: 2011,\r\n        description: \"porttitor nisl sodales id eu tellus venenatis laoreet auctor dictumst nulla\",\r\n        pageCount: 803,\r\n        categories: [\r\n            \"Computers \",\r\n            \"Hack\"\r\n        ],\r\n        thumbnail: \"http://coding-academy.org/books-photos/10.jpg\",\r\n        reviews: [],\r\n        language: \"sp\",\r\n        listPrice: {\r\n            amount: 116,\r\n            currencyCode: \"USD\",\r\n            isOnSale: true\r\n        }\r\n    },\r\n    {\r\n        id: \"Q8Q9Lsd03BD\",\r\n        title: \"consequat neque volutpat\",\r\n        subtitle: \"vel quis taciti fermentum feugiat ullamcorper curae praesent\",\r\n        authors: [\r\n            \"Dr.Seuss\"\r\n        ],\r\n        publishedDate: 1978,\r\n        description: \"curabitur bibendum in dolor neque magna phasellus arcu nulla cubilia senectus maecenas ullamcorper neque accumsan facilisis dictumst ornare\",\r\n        pageCount: 891,\r\n        categories: [\r\n            \"Computers \",\r\n            \"Hack\"\r\n        ],\r\n        thumbnail: \"http://coding-academy.org/books-photos/5.jpg\",\r\n        reviews: [],\r\n        language: \"en\",\r\n        listPrice: {\r\n            amount: 145,\r\n            currencyCode: \"EUR\",\r\n            isOnSale: false\r\n        }\r\n    },\r\n    {\r\n        id: \"bd7a76kARao\",\r\n        title: \"risus\",\r\n        subtitle: \"pretium bibendum pharetra curabitur quisque dictumst\",\r\n        authors: [\r\n            \"Danielle\", \"Steel\"\r\n        ],\r\n        publishedDate: 2018,\r\n        description: \"auctor amet nostra luctus molestie proin platea cubilia netus sed purus egestas a primis eu tristique interdum litora lorem venenatis mattis senectus\",\r\n        pageCount: 86,\r\n        categories: [\r\n            \"Computers \",\r\n            \"Hack\"\r\n        ],\r\n        thumbnail: \"http://coding-academy.org/books-photos/16.jpg\",\r\n        reviews: [],\r\n        language: \"sp\",\r\n        listPrice: {\r\n            amount: 157,\r\n            currencyCode: \"ILS\",\r\n            isOnSale: true\r\n        }\r\n    },\r\n    {\r\n        id: \"qKyG0vqeO3e\",\r\n        title: \"interdum etiam vulputate\",\r\n        subtitle: \"velit sapien eget tincidunt nunc tortor\",\r\n        authors: [\r\n            \"Danielle\", \"Steel\"\r\n        ],\r\n        publishedDate: 2018,\r\n        description: \"aenean mauris porta netus accumsan turpis etiam vestibulum vivamus sagittis nullam nec tellus quam mattis est pellentesque nisi litora sit ad\",\r\n        pageCount: 882,\r\n        categories: [\r\n            \"Computers \",\r\n            \"Hack\"\r\n        ],\r\n        thumbnail: \"http://coding-academy.org/books-photos/17.jpg\",\r\n        reviews: [],\r\n        language: \"sp\",\r\n        listPrice: {\r\n            amount: 57,\r\n            currencyCode: \"USD\",\r\n            isOnSale: true\r\n        }\r\n    },\r\n    {\r\n        id: \"2RvT48ZNInj\",\r\n        title: \"sagittis justo\",\r\n        subtitle: \"etiam primis proin praesent placerat nisi fermentum nisi\",\r\n        authors: [\r\n            \"Agatha Christie\"\r\n        ],\r\n        publishedDate: 2011,\r\n        description: \"nec faucibus arcu suspendisse tempus potenti lobortis aliquam quisque augue integer consectetur etiam ultrices curabitur tristique metus\",\r\n        pageCount: 598,\r\n        categories: [\r\n            \"Computers \",\r\n            \"Hack\"\r\n        ],\r\n        thumbnail: \"http://coding-academy.org/books-photos/8.jpg\",\r\n        reviews: [],\r\n        language: \"en\",\r\n        listPrice: {\r\n            amount: 167,\r\n            currencyCode: \"ILS\",\r\n            isOnSale: false\r\n        }\r\n    },\r\n    {\r\n        id: \"5z2s9pDXAYj\",\r\n        title: \"quam ullamcorper himenaeos\",\r\n        subtitle: \"ut placerat eu dapibus sapien sodales laoreet\",\r\n        authors: [\r\n            \"Danielle\", \"Steel\"\r\n        ],\r\n        publishedDate: 1999,\r\n        description: \"etiam nec aliquam euismod platea vel laoreet quisque condimentum sapien neque ut aliquam torquent in nam\",\r\n        pageCount: 608,\r\n        categories: [\r\n            \"Computers \",\r\n            \"Hack\"\r\n        ],\r\n        thumbnail: \"http://coding-academy.org/books-photos/3.jpg\",\r\n        reviews: [],\r\n        language: \"he\",\r\n        listPrice: {\r\n            amount: 150,\r\n            currencyCode: \"USD\",\r\n            isOnSale: true\r\n        }\r\n    },\r\n    {\r\n        id: \"zBZu5cDEWha\",\r\n        title: \"quis\",\r\n        subtitle: \"suscipit turpis etiam turpis libero lobortis\",\r\n        authors: [\r\n            \"Jin Yong\"\r\n        ],\r\n        publishedDate: 2011,\r\n        description: \"etiam pretium urna fusce lobortis curae viverra aptent metus semper nisi litora feugiat elementum purus nunc consequat lorem ultricies non primis phasellus sociosqu donec dolor\",\r\n        pageCount: 583,\r\n        categories: [\r\n            \"Computers \",\r\n            \"Hack\"\r\n        ],\r\n        thumbnail: \"http://coding-academy.org/books-photos/6.jpg\",\r\n        reviews: [],\r\n        language: \"en\",\r\n        listPrice: {\r\n            amount: 58,\r\n            currencyCode: \"ILS\",\r\n            isOnSale: true\r\n        }\r\n    },\r\n    {\r\n        id: \"aOI7tQuPZ2f\",\r\n        title: \"aliquam aliquet dapibus\",\r\n        subtitle: \"neque eu purus euismod placerat adipiscing odio egestas consequat\",\r\n        authors: [\r\n            \"Leo Tolstoy\"\r\n        ],\r\n        publishedDate: 2011,\r\n        description: \"dolor morbi malesuada eleifend purus taciti sit interdum aliquet commodo ut libero tincidunt\",\r\n        pageCount: 497,\r\n        categories: [\r\n            \"Computers \",\r\n            \"Hack\"\r\n        ],\r\n        thumbnail: \"http://coding-academy.org/books-photos/7.jpg\",\r\n        reviews: [],\r\n        language: \"en\",\r\n        listPrice: {\r\n            amount: 78,\r\n            currencyCode: \"USD\",\r\n            isOnSale: false\r\n        }\r\n    },\r\n    {\r\n        id: \"WBooB82Uvwu\",\r\n        title: \"class\",\r\n        subtitle: \"elit enim ultricies amet imperdiet a molestie class elementum venenatis\",\r\n        authors: [\r\n            \"Danielle\", \"Steel\"\r\n        ],\r\n        publishedDate: 1999,\r\n        description: \"rhoncus odio netus consectetur aenean hendrerit massa scelerisque elementum aptent lobortis pharetra maecenas quam nulla volutpat turpis non habitasse aenean ante sodales lobortis quisque libero imperdiet gravida eleifend nulla\",\r\n        pageCount: 804,\r\n        categories: [\r\n            \"Computers \",\r\n            \"Hack\"\r\n        ],\r\n        thumbnail: \"http://coding-academy.org/books-photos/10.jpg\",\r\n        reviews: [],\r\n        language: \"en\",\r\n        listPrice: {\r\n            amount: 118,\r\n            currencyCode: \"ILS\",\r\n            isOnSale: false\r\n        }\r\n    },\r\n    {\r\n        id: \"xm1z5bbZjlS\",\r\n        title: \"vitae\",\r\n        subtitle: \"class habitant at commodo semper ligula a bibendum\",\r\n        authors: [\r\n            \"Leo Tolstoy\"\r\n        ],\r\n        publishedDate: 1999,\r\n        description: \"himenaeos quis iaculis orci libero egestas quam varius primis erat lacus facilisis blandit dictum tristique interdum litora quisque purus senectus pretium purus\",\r\n        pageCount: 231,\r\n        categories: [\r\n            \"Computers \",\r\n            \"Hack\"\r\n        ],\r\n        thumbnail: \"http://coding-academy.org/books-photos/12.jpg\",\r\n        reviews: [],\r\n        language: \"he\",\r\n        listPrice: {\r\n            amount: 60,\r\n            currencyCode: \"EUR\",\r\n            isOnSale: false\r\n        }\r\n    },\r\n    {\r\n        id: \"u3j6QIKLlJb\",\r\n        title: \"rhoncus vivamus\",\r\n        subtitle: \"nullam class risus amet senectus scelerisque etiam curabitur\",\r\n        authors: [\r\n            \"Agatha Christie\"\r\n        ],\r\n        publishedDate: 1978,\r\n        description: \"torquent in et id lacus vivamus aptent cursus erat integer venenatis risus ac ante quam etiam euismod feugiat risus suscipit rhoncus pharetra quisque felis\",\r\n        pageCount: 652,\r\n        categories: [\r\n            \"Computers \",\r\n            \"Hack\"\r\n        ],\r\n        thumbnail: \"http://coding-academy.org/books-photos/20.jpg\",\r\n        reviews: [],\r\n        language: \"he\",\r\n        listPrice: {\r\n            amount: 110,\r\n            currencyCode: \"USD\",\r\n            isOnSale: true\r\n        }\r\n    },\r\n    {\r\n        id: \"vxYYYdVlEH3\",\r\n        title: \"donec mi ullamcorper\",\r\n        subtitle: \"varius malesuada augue molestie sollicitudin faucibus mi eu tempus\",\r\n        authors: [\r\n            \"William Shakespeare\"\r\n        ],\r\n        publishedDate: 2011,\r\n        description: \"aliquet euismod mi vivamus bibendum donec etiam quisque iaculis ullamcorper est sed\",\r\n        pageCount: 904,\r\n        categories: [\r\n            \"Computers \",\r\n            \"Hack\"\r\n        ],\r\n        thumbnail: \"http://coding-academy.org/books-photos/2.jpg\",\r\n        reviews: [],\r\n        language: \"sp\",\r\n        listPrice: {\r\n            amount: 186,\r\n            currencyCode: \"ILS\",\r\n            isOnSale: true\r\n        }\r\n    }\r\n    ];\r\n}","export {\r\n    getRandomId,\r\n    getRandomInt,\r\n    getRandomColor,\r\n    getFormattedTimeString,\r\n    formatTsToInput,\r\n    formatInputToTs,\r\n    formatDateToDisplay,\r\n    getUrlParams,\r\n    sliceStringByLength\r\n};\r\n\r\nconst gCurrLang = 'eng';\r\n\r\nfunction getRandomInt(min, max) {\r\n    max = Math.floor(max);\r\n    min = Math.ceil(min);\r\n    return Math.floor((Math.random() * (max - min + 1)) + min);\r\n}\r\n\r\nfunction getRandomId() {\r\n    var length = 5;\r\n    var txt = '';\r\n    var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n\r\n    for (var i = 0; i < length; i++) {\r\n        txt += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n\r\n    return txt;\r\n}\r\n\r\nfunction getRandomColor() {\r\n    let letters = '0123456789ABCDEF';\r\n    let color = '#';\r\n    for (let i = 0; i < 6; i++) {\r\n        color += letters[Math.floor(Math.random() * 16)];\r\n    }\r\n    return color\r\n}\r\n\r\nfunction getTwoDigits(num) {\r\n    return ('0' + num).slice(-2);\r\n}\r\n\r\nfunction getTodayTime(ts) {\r\n    var time = new Date(ts);\r\n    return `${time.getHours()}:${getTwoDigits(time.getMinutes())}`;\r\n}\r\n\r\nfunction getDate(ts) {\r\n    var d = new Date(ts);\r\n    return `${d.getDate()}-${d.getMonth() + 1}-${d.getFullYear()}`;\r\n}\r\n\r\nfunction getFormattedTimeString(ts) {\r\n    let timeDifference = Date.now() - ts;\r\n    return timeDifference < (1000 * 3600 * 24) ? getTodayTime(ts) : getDate(ts);\r\n}\r\n\r\nfunction formatTsToInput(ts) {\r\n    var date = new Date(ts);\r\n\r\n    const year = date.getFullYear(),\r\n        month = ('0' + (date.getMonth() + 1)).slice(-2),\r\n        day = ('0' + (date.getDate())).slice(-2);\r\n\r\n    return [year, month, day].join('-');\r\n}\r\n\r\nfunction formatInputToTs(inputVal) {\r\n    return (new Date(inputVal)).getTime();\r\n}\r\n\r\nfunction formatDateToDisplay(date) {\r\n    var options = {\r\n        year: 'numeric',\r\n        month: 'short',\r\n        day: 'numeric',\r\n        hour: 'numeric',\r\n        minute: 'numeric',\r\n        hour12: true,\r\n    };\r\n    return new Intl.DateTimeFormat(gCurrLang).format(date); // by local language\r\n}\r\n\r\nfunction getUrlParams(paramName, searchUrl) {\r\n    let value = new URLSearchParams(searchUrl).get(paramName);\r\n    return value ? value : '';\r\n}\r\n\r\nfunction sliceStringByLength(str, length) {\r\n    return str.length > length ? str.slice(0, length) + '...' : str;\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport booksService from '../../services/books-service.js';\r\nexport default class BookPreview extends React.Component {\r\n\r\n    render() {\r\n        const { book } = this.props;\r\n        return (\r\n            <li className=\"books-list-card\">\r\n                <Link to={ `/books/${book.id}` } className=\"flex column\">\r\n                    <img alt='book' src={ book.thumbnail } />\r\n                    <span className=\"book-name\">{ book.title }</span>\r\n                    <small className=\"price\">{ booksService.getPriceString(book.listPrice.amount, book.listPrice.currencyCode) }</small>\r\n                </Link>\r\n            </li>);\r\n    }\r\n}","import React from 'react'\r\nexport default class BooksFilter extends React.Component {\r\n\r\n    state = {\r\n        filterBy: {\r\n            price: 200\r\n        },\r\n        boxDisplayed: false\r\n    };\r\n\r\n    toggleFilter = () => {\r\n        this.setState((prevState) => ({ boxDisplayed: !prevState.boxDisplayed }));\r\n    }\r\n\r\n    handleInput = (event) => {\r\n        this.setState({ filterBy: { price: +event.target.value } },\r\n            () => this.props.onFilter(this.state.filterBy));\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <button className=\"simple-button\" onClick={ this.toggleFilter }><i className=\"fas fa-funnel-dollar\"></i></button>\r\n                <div className={ 'price-filter-box-wrapper' + (this.state.boxDisplayed ? ' active' : '') }>\r\n                    <span className=\"current-price-range-display\">{ this.state.filterBy.price }</span>\r\n                    <input type=\"range\" name=\"price\" step=\"1\" min=\"1\" max=\"200\" value={ this.state.filterBy.price } onChange={ this.handleInput } />\r\n                </div>\r\n            </React.Fragment>);\r\n    }\r\n}","import React from 'react'\r\nexport default class BooksSearchResults extends React.Component {\r\n    state = {\r\n    };\r\n\r\n    getResultPreview(googleBookObj, keyIdx) {\r\n        return (\r\n            <li key={ keyIdx }>\r\n                <span>{ googleBookObj.volumeInfo.title }</span>\r\n                <span><button className=\"add-book-button\" onClick={ () => this.props.onSelectBook(googleBookObj) }>+</button></span>\r\n            </li>);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <ul className=\"clean-list search-results\">\r\n                { this.props.searchResults ? this.props.searchResults.map((googleBookObj, idx) => this.getResultPreview(googleBookObj, idx)) : '' }\r\n            </ul>\r\n        );\r\n    }\r\n}","import React from 'react'\r\nimport eventBusService from '../../../../services/eventBusService.js';\r\nimport booksService from '../../services/books-service.js';\r\nimport BooksSearchResults from './BooksAddFromSearch/BooksSearchResults.jsx';\r\n\r\nexport default class BooksAddFromSearch extends React.Component {\r\n\r\n    state = {\r\n        searchStr: '',\r\n        currentSearchResults: [],\r\n        searchOpen: false\r\n    };\r\n\r\n    toggleSearch = () => {\r\n        this.setState((prevState) => ({ searchOpen: !prevState.searchOpen }));\r\n    }\r\n\r\n    handleInput = (event) => {\r\n        let inputValue = event.target.value;\r\n        if (!inputValue) return this.setState(() => ({ searchStr: '', currentSearchResults: [] }));\r\n        this.setState(() => ({ searchStr: inputValue }),\r\n            () => booksService.searchBooks(this.state.searchStr)\r\n                .then(searchResults => this.setState(() => ({ currentSearchResults: searchResults }))));\r\n    }\r\n\r\n    onSelectBook = (googleBookObj) => {\r\n        booksService.addBookFromGoogle(googleBookObj).then(() => {\r\n            eventBusService.callModal('updatesBox', { type: 'success', message: 'Book Added Successfully' });\r\n            return this.props.loadBooks()\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            // <section className=\"add-new-book\">\r\n            <React.Fragment>\r\n                <button className=\"simple-button\" onClick={ this.toggleSearch }>\r\n                    <i className=\"fas fa-plus\"></i> <span className=\"no-mobile\">Add New </span>Book</button>\r\n                <div className={ 'search-box-wrapper auto-center' + (this.state.searchOpen ? ' active' : '') }>\r\n                    <input type=\"search\" onChange={ this.handleInput } value={ this.state.searchStr } placeholder=\"Search &amp; Add New Book!\" />\r\n                    <BooksSearchResults onSelectBook={ this.onSelectBook } searchResults={ this.state.currentSearchResults } />\r\n                </div>\r\n            </React.Fragment >\r\n            // </section>\r\n        );\r\n    }\r\n}","import React from 'react'\r\nexport default class PaginationMenu extends React.Component {\r\n\r\n    handlePageToggling = (diff) => {\r\n        this.props.history.push('?page=' + (this.props.currentPage + diff));\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"pagination-menu flex auto-center\">\r\n                <button onClick={ () => this.handlePageToggling(-1) } className=\"simple-button\" disabled={ (this.props.currentPage - 1) < 1 }>\r\n                    <i className=\"fas fa-chevron-left\"></i>\r\n                </button>\r\n                { this.props.currentPage } / { this.props.maxPage }\r\n                <button onClick={ () => this.handlePageToggling(1) } className=\"simple-button\" disabled={ (this.props.currentPage + 1) > this.props.maxPage }>\r\n                    <i className=\"fas fa-chevron-right\"></i>\r\n                </button>\r\n            </div>);\r\n    }\r\n}","import React from 'react'\r\nimport eventBusService from '../../../services/eventBusService.js';\r\nimport booksService from '../services/books-service.js';\r\nimport { getUrlParams } from '../../../services/Utils.js';\r\n\r\nimport BookPreview from '../cmps/BooksList/BookPreview.jsx';\r\nimport BooksFilter from '../cmps/BooksList/BooksFilter.jsx';\r\nimport BooksAddFromSearch from '../cmps/BooksList/BooksAddFromSearch.jsx';\r\nimport PaginationMenu from '../../../cmps/PaginationMenu.jsx';\r\n\r\nexport default class BooksList extends React.Component {\r\n    state = {\r\n        books: [],\r\n        filterBy: {\r\n            name: '',\r\n            price: 200\r\n        },\r\n        booksPerPage: 10,\r\n        currentPage: 1,\r\n        maxPage: 5\r\n    }\r\n\r\n    loadBooks = () => {\r\n        return booksService.getBooks(this.state.filterBy, this.currentPaginationSettings)\r\n            .then(result => this.setState(() => ({ ...result })));\r\n    }\r\n\r\n    get currentPaginationSettings() {\r\n        return {\r\n            currentPage: parseInt(getUrlParams('page', this.props.location.search)),\r\n            booksPerPage: this.state.booksPerPage\r\n        };\r\n    }\r\n\r\n    onFilter = (filter) => {\r\n        this.setState((prevState) => ({ filterBy: { ...prevState.filterBy, ...filter } }), this.loadBooks);\r\n    }\r\n\r\n    handleSearch = (searchStr) => {\r\n        this.onFilter({ name: searchStr })\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        this.loadBooks().then(() => eventBusService.emit('setSearchHandler', this.handleSearch));\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        let prevDisplayPage = getUrlParams('page', prevProps.location.search),\r\n            currDisplayPage = getUrlParams('page', this.props.location.search);\r\n        if (prevDisplayPage !== currDisplayPage) this.loadBooks();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        eventBusService.emit('setSearchHandler', null);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"books-list-wrapper\">\r\n                <section className=\"book-list-options flex space-between\">\r\n                    <PaginationMenu currentPage={ this.state.currentPage } maxPage={ this.state.maxPage } />\r\n                    <BooksAddFromSearch loadBooks={ this.loadBooks } />\r\n                    <BooksFilter onFilter={ this.onFilter } />\r\n                </section>\r\n\r\n                <ul className=\"books-list clean-list\">\r\n                    { this.state.books.map((book, index) => <BookPreview book={ book } key={ index } onSelectBook={ this.onSelectBook } />) }\r\n                </ul>\r\n            </div>\r\n        );\r\n    }\r\n}","import React from 'react'\r\nexport default function GoBackButton(props) {\r\n    return <button onClick={ props.onReturn } className=\"go-back-button simple-button abs-tl medium-button\"><i className=\"fas fa-arrow-circle-left\"></i></button>\r\n}","import React from 'react'\r\nexport default function BookBadges(props) {\r\n    let lengthBadge = (props.pageCount > 500 ? 'Long' : props.pageCount > 200 ? 'Decent' : 'Light') + ' Reading',\r\n        bookAge = (new Date().getFullYear() - props.publishDate) > 10 ? 'Veteran Book' : 'New Book!';\r\n    return (\r\n        <ul className=\"badges clean-list flex justify-center\">\r\n            <li>{ lengthBadge }</li>\r\n            <li>{ bookAge }</li>\r\n        </ul>);\r\n}","import storageService from '../../../services/storageService.js'\r\nimport { getRandomId } from '../../../services/Utils.js'\r\nimport Note from './noteModel.js'\r\nlet gNotes\r\n\r\nexport {\r\n    addNote,\r\n    deleteNote,\r\n    getNotesToRender,\r\n    getNoteById,\r\n    updateNoteById,\r\n    togglePin,\r\n    addTodo,\r\n}\r\n\r\nfunction addNote(type, details, isDraft = false) {\r\n    loadNotes()\r\n    gNotes = JSON.parse(JSON.stringify(gNotes))\r\n    const newNote = isDraft ? new Note(type, details, true) : new Note(type, details)\r\n    gNotes.push(newNote)\r\n    saveNotes()\r\n    return Promise.resolve(newNote)\r\n\r\n}\r\nfunction deleteNote(noteId) {\r\n    let noteIdx = getNoteIdxById(noteId)\r\n    gNotes = JSON.parse(JSON.stringify(gNotes))\r\n    gNotes.splice(noteIdx, 1)\r\n    saveNotes()\r\n    return Promise.resolve(true)\r\n}\r\n\r\nfunction loadNotes() {\r\n    gNotes = storageService.loadFromStorage('notes', null)\r\n    if (!gNotes || !gNotes.length) createTestNotes()\r\n}\r\n\r\nfunction saveNotes() {\r\n    storageService.saveToStorage('notes', gNotes)\r\n}\r\n\r\nfunction getNoteIdxById(noteId) {\r\n    return gNotes.findIndex(note => note.id === noteId)\r\n}\r\n\r\nfunction getNoteById(noteId) {\r\n    let foundNote = gNotes.find(note => note.id === noteId)\r\n    return Promise.resolve(...[foundNote])\r\n}\r\n\r\nfunction getNotesToRender(searchString) {\r\n\r\n    let filteredNotes;\r\n    loadNotes()\r\n\r\n    if (searchString) {\r\n        filteredNotes = searchNotes(searchString)\r\n        filteredNotes = sortPinned(filteredNotes)\r\n    } else gNotes = sortPinned(gNotes)\r\n\r\n    return Promise.resolve([...filteredNotes || gNotes])\r\n}\r\n\r\nfunction sortPinned(arrayToSort) {\r\n    return arrayToSort.slice().sort((note1, note2) => {\r\n        if (note1.isPinned && note2.isPinned) return 0\r\n        return note1.isPinned ? -1 : 1\r\n\r\n    })\r\n}\r\n\r\nfunction searchNotes(searchString) {\r\n    return gNotes.filter(note => {\r\n        if (note.title.toLowerCase().includes(searchString)) return true\r\n        if (note.type === 'txt') if (note.details.txt.toLowerCase().includes(searchString)) return true\r\n        if (note.type === 'todo') {\r\n            return note.details.todos.find(todo => todo.txt.toLowerCase().includes(searchString) !== -1)\r\n        }\r\n        return false\r\n    })\r\n}\r\n\r\nfunction updateNoteById(noteId, updates) {\r\n\r\n    getNoteById(noteId).then(noteToUpdate => {\r\n        for (let field in updates) {\r\n            if (updates[field].todos) noteToUpdate[field].todos = updateTodos(noteToUpdate[field].todos, updates[field].todos)\r\n            else if (updates.style) noteToUpdate[field] = { ...noteToUpdate[field], ...updates[field] }\r\n            else noteToUpdate[field] = updates[field];\r\n        }\r\n        gNotes = gNotes.map(note => (note.id === noteToUpdate.id) ? noteToUpdate : note)\r\n        saveNotes()\r\n    })\r\n    return Promise.resolve(true);\r\n}\r\n\r\nfunction updateTodos(todosToUpdate, updatedTodo) {\r\n    let newTodos = todosToUpdate.map(todo => (todo.id === updatedTodo.id) ? updatedTodo : todo)\r\n    return [...newTodos]\r\n}\r\n\r\nfunction togglePin(noteId) {\r\n    gNotes = JSON.parse(JSON.stringify(gNotes))\r\n    return getNoteById(noteId).then(noteToPin => {\r\n        noteToPin.isPinned = !noteToPin.isPinned\r\n        saveNotes();\r\n        return true;\r\n    })\r\n}\r\n\r\nfunction addTodo(noteId, todoTxt) {\r\n    getNoteById(noteId).then(noteToUpdate => {\r\n        noteToUpdate.details.todos.push({ id: getRandomId(), txt: todoTxt, isDone: false })\r\n        saveNotes()\r\n    })\r\n    return Promise.resolve(true)\r\n}\r\n\r\nfunction createTestNotes() {\r\n    gNotes = [\r\n        {\r\n            id: getRandomId(),\r\n            type: \"txt\",\r\n            isPinned: true,\r\n            title: 'Welcome to keep notes',\r\n            details: {\r\n                txt: \"Try adding some notes for yourself!\"\r\n            },\r\n            style: {\r\n                backgroundColor: \"#ffff9f\"\r\n            }\r\n        },\r\n        {\r\n            id: getRandomId(),\r\n            type: \"todo\",\r\n            isPinned: true,\r\n            title: 'Features',\r\n            details: {\r\n                todos: [\r\n                    { id: getRandomId(), txt: \"Adding todo lists\", isDone: true },\r\n                    { id: getRandomId(), txt: \"embed spotify and youtube links\", isDone: false },\r\n                    { id: getRandomId(), txt: \"linking to different video and sound files\", isDone: false },\r\n                    { id: getRandomId(), txt: \"add google maps by coords or name!\", isDone: false }\r\n                ]\r\n            },\r\n            style: {\r\n                backgroundColor: \"#ffff9f\"\r\n            }\r\n        },\r\n        {\r\n            id: getRandomId(),\r\n            type: \"txt\",\r\n            isPinned: false,\r\n            title: 'React is a friend',\r\n            details: {\r\n                txt: \"NOTTT....\"\r\n            },\r\n            style: {\r\n                backgroundColor: \"#ffff9f\"\r\n            }\r\n        },\r\n        {\r\n            id: getRandomId(),\r\n            type: \"img\",\r\n            isPinned: false,\r\n            title: \"Me playing Mi\",\r\n            details: {\r\n                url: \"https://loremflickr.com/320/240\",\r\n            },\r\n            style: {\r\n                backgroundColor: \"#ffff9f\"\r\n            }\r\n        },\r\n        {\r\n            id: getRandomId(),\r\n            type: \"music\",\r\n            isPinned: false,\r\n            title: \"Random nigga song\",\r\n            details: {\r\n                url: \"https://www.mboxdrive.com/Blue%20lights.mp3\",\r\n            },\r\n            style: {\r\n                backgroundColor: \"#ffff9f\"\r\n            }\r\n        },\r\n        {\r\n            id: getRandomId(),\r\n            type: \"img\",\r\n            isPinned: false,\r\n            title: \"my cat is awesome\",\r\n            details: {\r\n                url: \"https://cdn.shopify.com/s/files/1/1369/6411/articles/g_.fh_1_c23e86d3-e918-497c-b209-b583225ede34_2048x.progressive.jpg?v=1563422994\",\r\n            },\r\n            style: {\r\n                backgroundColor: \"#ffff9f\"\r\n            }\r\n        },\r\n        {\r\n            id: getRandomId(),\r\n            type: \"video\",\r\n            isPinned: false,\r\n            title: \"Cute bear\",\r\n            details: {\r\n                url: \"https://www.w3schools.com/html/movie.mp4\",\r\n            },\r\n            style: {\r\n                backgroundColor: \"#ffff9f\"\r\n            }\r\n        },\r\n        {\r\n            id: getRandomId(),\r\n            type: \"todo\",\r\n            title: \"Grocery list:\",\r\n            isPinned: false,\r\n            details: {\r\n                todos: [\r\n                    { id: getRandomId(), txt: \"buy milk\", isDone: false },\r\n                    { id: getRandomId(), txt: \"buy bamba\", isDone: false },\r\n                    { id: getRandomId(), txt: \"forget to buy milk\", isDone: false }\r\n                ]\r\n            },\r\n            style: {\r\n                backgroundColor: \"lightsalmon\"\r\n            }\r\n        },\r\n        {\r\n            id: getRandomId(),\r\n            type: \"video\",\r\n            title: \"Awesome\",\r\n            isPinned: false,\r\n            details: {\r\n                url: 'https://www.youtube.com/watch?v=mXjNATmIruI'\r\n            },\r\n            style: {\r\n                backgroundColor: \"lightsalmon\"\r\n            }\r\n        },\r\n        {\r\n            id: getRandomId(),\r\n            type: \"maps\",\r\n            title: \"Home is far far away\",\r\n            isPinned: false,\r\n            details: {\r\n                place: '33.2397939,35.6496942'\r\n            },\r\n            style: {\r\n                backgroundColor: \"lightsalmon\"\r\n            }\r\n        }\r\n    ];\r\n}","import React from 'react'\r\nexport default class LongTxt extends React.Component {\r\n    state = {\r\n        isSliced: false\r\n    }\r\n\r\n    handleClick = () => {\r\n        this.setState(prevState => ({ isSliced: !prevState.isSliced }));\r\n    }\r\n\r\n    getToggleLinkStr = () => {\r\n        return this.props.bookDescription.length <= this.props.strLength ? '' :\r\n            <span className=\"long-text-toggler\" onClick={ this.handleClick }>{ this.state.isSliced ? 'Show More' : 'Show Less' }</span>;\r\n    }\r\n\r\n    getText = () => {\r\n        return this.props.bookDescription.length <= this.props.strLength ? this.props.bookDescription :\r\n            (this.state.isSliced ? this.props.bookDescription.slice(0, this.props.strLength) + '...' : this.props.bookDescription);\r\n    }\r\n\r\n    render() {\r\n        return (<p>{ this.getText() }{ this.getToggleLinkStr() }</p>);\r\n    }\r\n}","import React from 'react'\r\nexport default class BookReviewPreview extends React.Component {\r\n\r\n    getRateString = () => {\r\n        let str = '';\r\n        for (let i = 0; i < this.props.reviewData.rate; i++) {\r\n            str += '★';\r\n        }\r\n        return str;\r\n    }\r\n\r\n    getDateString = () => {\r\n        let date = this.props.reviewData.readDate.split('-').reverse().join('-');\r\n        return date;\r\n    }\r\n\r\n    render() {\r\n        const { reviewData } = this.props;\r\n        return (\r\n            <li>\r\n                <div className=\"review-header flex space-between\">\r\n                    <span>{ reviewData.fullName } ({ this.getRateString() })</span>\r\n                    <span>Read Date: { this.getDateString() }</span>\r\n                </div>\r\n                <p>\r\n                    { reviewData.text }\r\n                </p>\r\n            </li>);\r\n    }\r\n}","import React from 'react'\r\nimport BookReviewPreview from './ReviewsList/BookReviewPreview.jsx';\r\n\r\nexport default class BookReviewsList extends React.Component {\r\n    render() {\r\n        return (\r\n            <ul className=\"book-reviews-list clean-list\">\r\n                { this.props.reviewsData.length < 1 ? <li className=\"empty-list-item\">No reviews added yet</li> :\r\n                    this.props.reviewsData.map((review, index) => (<BookReviewPreview key={ index } reviewData={ review } />)) }\r\n            </ul>\r\n        )\r\n    }\r\n}","import React from 'react'\r\nexport default class RatingComponenet extends React.Component {\r\n\r\n    state = {\r\n        ratingSelected: 0\r\n    }\r\n\r\n    setRating = (event) => {\r\n        let ratingSelected = +event.target.dataset.value;\r\n        this.setState(() => ({ ratingSelected }), () => this.props.onUpdateRating(this.state.ratingSelected));\r\n    }\r\n\r\n    getRatingButtons = () => {\r\n        let buttons = [];\r\n        for (let i = 1; i <= 5; i++) {\r\n            buttons.push(\r\n                <span key={ i } data-value={ i } onClick={ this.setRating }\r\n                    className={ i <= this.state.ratingSelected ? 'active' : '' }>★</span>);\r\n        }\r\n        return buttons;\r\n    }\r\n    render() {\r\n        return <div className=\"rating-btns\">{ this.getRatingButtons() }</div>\r\n    }\r\n}","import React from 'react'\r\nimport { formatTsToInput } from '../../../../../services/Utils.js';\r\nimport RatingComponent from './ReviewForm/RatingComponent.jsx';\r\n\r\nexport default class ReviewForm extends React.Component {\r\n\r\n    state = {\r\n        formData: {\r\n            fullName: '',\r\n            text: '',\r\n            rate: '',\r\n            readDate: formatTsToInput(Date.now())\r\n        },\r\n        animationClass: ''\r\n    };\r\n\r\n    handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        const { formData } = this.state;\r\n        if (!formData.text || !formData.rate || !formData.readDate) return;\r\n\r\n        let reviewData = { ...formData, fullName: (formData.fullName ? formData.fullName : 'Book Reader') }\r\n        this.props.transData.onReviewAdd(reviewData);\r\n        this.props.onModalClose();\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        let field = event.target.name,\r\n            value = field === 'rate' ? +event.target.value : event.target.value;\r\n        this.setState((prevState) => ({ formData: { ...prevState.formData, [field]: value } }));\r\n    }\r\n\r\n    onUpdateRating = (rating) => {\r\n        this.setState((prevState) => ({ formData: { ...prevState.formData, rate: rating } }));\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        this.fullNameInputRef.current.focus();\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.fullNameInputRef = React.createRef();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <form onSubmit={ this.handleSubmit } className=\"book-review-add-form\">\r\n                <div className=\"book-review-add-form-title\">Add new Review</div>\r\n                <RatingComponent onUpdateRating={ this.onUpdateRating } />\r\n                <input type=\"button\" value=\"&times;\" onClick={ this.props.onModalClose } className=\"simple-button dismiss\" />\r\n                <div className=\"review-form-upper-elements flex space-between\">\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"fullName\">Full Name:</label>\r\n                        <input ref={ this.fullNameInputRef } type=\"text\" id=\"fullName\" name=\"fullName\" placeholder=\"Benel Tavori\" value={ this.state.formData.fullName } onChange={ this.handleChange } />\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"readDate\">Read Date:</label>\r\n                        <input type=\"date\" id=\"readDate\" name=\"readDate\" value={ this.state.formData.readDate } onChange={ this.handleChange } />\r\n                    </div>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"text\">Your Review:</label>\r\n                    <textarea name=\"text\" id=\"text\" placeholder=\"E.g: Awesome Book!..\" defaultValue={ this.state.formData.text } onChange={ this.handleChange } required></textarea>\r\n                </div>\r\n\r\n\r\n                <button className=\"review-form-button\">Submit Review</button>\r\n            </form >);\r\n    }\r\n}\r\n","import React from 'react'\r\nimport eventBusService from '../../../../services/eventBusService.js';\r\nimport BookReviewsList from './ReviewsSection/BookReviewsList.jsx';\r\nimport ReviewForm from './ReviewsSection/ReviewForm.jsx'\r\n\r\nexport default class ReviewsSection extends React.Component {\r\n    showReviewModal = () => {\r\n        eventBusService.callModal('regularModal', { component: ReviewForm, onReviewAdd: this.props.onReviewAdd });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <section className=\"reviews-section\">\r\n                <div className=\"reviews-head text-center\">Latest Reviews</div>\r\n                <BookReviewsList reviewsData={ this.props.reviewsData } />\r\n                <button onClick={ this.showReviewModal } className=\"review-form-button\">Add Review</button>\r\n            </section>\r\n        );\r\n    }\r\n\r\n}","import React from 'react'\r\nimport booksService from '../services/books-service.js';\r\n\r\nimport GoBackButton from '../../../cmps//GoBackButton.jsx';\r\nimport BookBadges from '../cmps/BookView/BookBadges.jsx';\r\nimport LongTxt from '../../../cmps/LongTxt.jsx';\r\nimport ReviewsSection from '../cmps/BookView/ReviewsSection.jsx';\r\n\r\nexport default class BookView extends React.Component {\r\n    state = {\r\n        book: null,\r\n        status: 'Loading...'\r\n    }\r\n\r\n    loadBook = () => {\r\n        const { id } = this.props.match.params;\r\n        booksService.getBookById(id).then(book => {\r\n            book ? this.setState({ book }) : this.setState({ book, status: 'Could not find book' });\r\n        })\r\n    }\r\n\r\n    onDelete = () => {\r\n        booksService.deleteBookById(this.state.book.id).then(() => {\r\n            this.onReturn();\r\n        });\r\n    }\r\n\r\n    onReviewAdd = (review) => {\r\n        let updatedReviews = this.state.book.reviews.slice();\r\n        updatedReviews.push(review);\r\n        booksService.editBookById(this.state.book.id, { reviews: updatedReviews })\r\n            .then(() => this.loadBook());\r\n    }\r\n\r\n    onReturn = () => {\r\n        this.props.history.push('./');\r\n    }\r\n\r\n    getBookPrice = () => {\r\n        return booksService.getPriceString(this.state.book.listPrice.amount, this.state.book.listPrice.currencyCode);\r\n    }\r\n\r\n    getColorClassByPrice = () => {\r\n        return this.state.book.listPrice.amount <= 20 ? 'cheap' : 'expensive';\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        this.loadBook();\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (prevProps.match.params.id\r\n            !== this.props.match.params.id) {\r\n            this.loadBook();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { book } = this.state;\r\n        if (!book) return <div className=\"loading\">{ this.state.status }</div>;\r\n        return (\r\n            <div className=\"book-display\">\r\n                <GoBackButton onReturn={ this.onReturn } />\r\n                <section className=\"information\">\r\n                    <h2 className=\"title\">{ book.title }</h2>\r\n                    <ul className=\"more-info-list\">\r\n                        <li>Categories: { book.categories ? book.categories.join(',') : 'N/A' }</li>\r\n                        <li>Subtitle: { book.subtitle }</li>\r\n                        <li>Authors: { book.authors.join(',') }</li>\r\n                        <li>Publish Year: { book.publishedDate }</li>\r\n                        <li>Pages Count: { book.pageCount }</li>\r\n                        <li>Language: { book.language.toUpperCase() }</li>\r\n                        <li>Description:\r\n                            <LongTxt bookDescription={ book.description } strLength={ 150 } />\r\n                        </li>\r\n                    </ul>\r\n                </section>\r\n                <section className=\"cover\">\r\n                    <div className=\"cover-wrapper\">\r\n                        { book.listPrice.isOnSale ? <span className=\"on-sale\">on sale!</span> : '' }\r\n                        <img alt='' src={ book.thumbnail } />\r\n                        <BookBadges pageCount={ book.pageCount } publishDate={ book.publishedDate } />\r\n                    </div>\r\n                    <span className={ `price ${this.getColorClassByPrice()}` }>{ this.getBookPrice() }</span>\r\n                </section>\r\n                <ReviewsSection reviewsData={ book.reviews } onReviewAdd={ this.onReviewAdd } />\r\n            </div>);\r\n    }\r\n}","// Router\r\nimport React from 'react'\r\nimport { Router, Route, Switch } from 'react-router-dom'\r\nimport BooksList from './pages/BooksList.jsx';\r\nimport BookView from './pages/BookView.jsx';\r\n\r\nexport default class BooksApp extends React.Component {\r\n    render() {\r\n        return (\r\n            <div className=\"book-app-wrapper\">\r\n                <Router history={ this.props.history }>\r\n                    <Switch>\r\n                        <Route component={ BookView } path=\"/books/:id\" exact />\r\n                        <Route component={ BooksList } path=\"/books\" exact />\r\n                    </Switch>\r\n                </Router>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import {getRandomId} from '../../../services/Utils.js'\r\n\r\nexport default class Note {\r\n    constructor(type, details,draft=false) {\r\n        this.id= draft? 'draft':getRandomId()\r\n        this.title=''\r\n        this.type = type\r\n        this.isPinned = false\r\n        this.details = details\r\n        this.style={\r\n            backgroundColor:'',\r\n            color:'black'\r\n        }\r\n    }\r\n}","import React from 'react'\r\nimport { addNote } from '../services/keepService.js'\r\nimport { getRandomId } from '../../../services/Utils.js'\r\nimport eventBusService from '../../../services/eventBusService.js'\r\n\r\nexport default class AddNote extends React.Component {\r\n    state = {\r\n        draftNote: null,\r\n        type: 'txt',\r\n        text: '',\r\n        placeholder: 'Enter text'\r\n    }\r\n\r\n    componentDidMount() {\r\n        addNote('txt', { txt: '' }, true).then((draftNote) => this.setState({ draftNote }))\r\n    }\r\n\r\n    onInputChange = (ev) => {\r\n        this.setState({ text: ev.target.value })\r\n\r\n    }\r\n    onAddNote = (ev) => {\r\n        ev.preventDefault()\r\n        if (!this.state.text) return\r\n        const details = this.makeDetails()\r\n        addNote(this.state.type, details)\r\n            .then(this.props.onAdd);\r\n        eventBusService.callModal('updatesBox', { type: 'success', message: 'Note added Successfully!' });\r\n\r\n        this.setState({ text: '' })\r\n    }\r\n    makeDetails = () => {\r\n        let details = {};\r\n        switch (this.state.type) {\r\n            case 'txt':\r\n                details.txt = this.state.text\r\n                break;\r\n            case 'img':\r\n                details.url = this.state.text\r\n                break;\r\n            case 'video':\r\n                details.url = this.state.text\r\n                break;\r\n            case 'maps':\r\n                details.place = this.state.text\r\n                break;\r\n            case 'music':\r\n                details.url = this.state.text\r\n                break;\r\n            case 'todo':\r\n                details.todos = []\r\n                this.state.text.split(',').map(txt => details.todos.push({ id: getRandomId(), txt, isDone: false }))\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        return details\r\n    }\r\n\r\n    onTypeChange = (ev) => {\r\n        this.setState({ type: ev.target.value })\r\n        switch (ev.target.value) {\r\n            case 'txt':\r\n                this.setState({ placeholder: 'Enter text', text: '' })\r\n                break;\r\n            case 'todo':\r\n                this.setState({ placeholder: 'Enter todos separated by commas', text: '' })\r\n                break;\r\n            case 'img':\r\n                this.setState({ placeholder: 'Enter image URL', text: '' })\r\n                break;\r\n            case 'video':\r\n                this.setState({ placeholder: 'Enter video URL', text: '' })\r\n                break;\r\n            case 'maps':\r\n                this.setState({ placeholder: 'Enter (lat,lng) or place name', text: '' })\r\n                break;\r\n            case 'music':\r\n                this.setState({ placeholder: 'Enter mp3 or Spotify URL', text: '' })\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    get types() {\r\n        const { type } = this.state\r\n        return <div className='types-container'>\r\n            <label htmlFor=\"txt\" className={ (type === 'txt') ? 'active-type' : '' }>\r\n                <i className=\"fas fa-text-height\"></i></label>\r\n            <input onChange={ this.onTypeChange } type='radio' id='txt' name='type' value='txt' />\r\n            <label htmlFor=\"todo\" className={ (type === 'todo') ? 'active-type' : '' }>\r\n                <i className=\"fas fa-list-ul\"></i></label>\r\n            <input onChange={ this.onTypeChange } type='radio' id='todo' name='type' value='todo' />\r\n\r\n            <label htmlFor=\"img\" className={ (type === 'img') ? 'active-type' : '' }>\r\n                <i className=\"fas fa-image\"></i></label>\r\n            <input onChange={ this.onTypeChange } type='radio' id='img' name='type' value='img' />\r\n            <label htmlFor=\"video\" className={ (type === 'video') ? 'active-type' : '' }>\r\n                <i className=\"fas fa-video\"></i></label>\r\n            <input onChange={ this.onTypeChange } type='radio' id='video' name='type' value='video' />\r\n            <label htmlFor=\"maps\" className={ (type === 'maps') ? 'active-type' : '' }>\r\n                <i className=\"fas fa-map-marked-alt\"></i></label>\r\n            <input onChange={ this.onTypeChange } type='radio' id='maps' name='type' value='maps' />\r\n            <label htmlFor=\"music\" className={ (type === 'music') ? 'active-type' : '' }>\r\n                <i className=\"fas fa-music\"></i></label>\r\n            <input onChange={ this.onTypeChange } type='radio' id='music' name='type' value='music' />\r\n\r\n            {/* <MediaAddBtns currType={this.state.type} handleClick={this.onTypeChange}></MediaAddBtns> */ }\r\n        </div>\r\n    }\r\n\r\n    render() {\r\n        return <form onSubmit={ this.onAddNote }>\r\n            <div className='add-container flex auto-center'>\r\n                {/* {this.state.draftNote && <NotePreview isDraft={true} textStyle={this.state.draftNote.style} note={this.state.draftNote}></NotePreview>} */ }\r\n                <input placeholder={ this.state.placeholder } onChange={ this.onInputChange }\r\n                    value={ this.state.text } type=\"search\" name=\"add\" id=\"\" />\r\n                { this.types }\r\n                {/* <button onClick={this.onAddNote}>Add</button> */ }\r\n            </div>\r\n        </form>\r\n    }\r\n}","import React from 'react'\r\nconst minRows = 1, maxRows = 10;\r\nexport default class ResizeableTextArea extends React.Component {\r\n    state = {\r\n        text: React.createRef(),\r\n        rows: 1,\r\n    };\r\n    componentDidMount() {\r\n        this.handleResize({ target: this.state.text.current }, false)\r\n    }\r\n\r\n    handleResize = (event, isUpdate = true) => {\r\n        const textareaLineHeight = 16 * 1.3;\r\n        const previousRows = event.target.rows;\r\n        event.target.rows = minRows; // reset number of rows in textarea \r\n\r\n        const currentRows = ~~(event.target.scrollHeight / textareaLineHeight);\r\n\r\n        if (currentRows === previousRows) {\r\n            event.target.rows = currentRows;\r\n        }\r\n\r\n        if (currentRows >= maxRows) {\r\n            event.target.rows = maxRows;\r\n            event.target.scrollTop = event.target.scrollHeight;\r\n        }\r\n        this.setState({\r\n            rows: currentRows < maxRows ? currentRows : maxRows,\r\n        });\r\n        isUpdate && this.updateNote()\r\n    };\r\n\r\n    updateNote = () => {\r\n        const { todo } = this.props;\r\n        const txt = this.state.text.current.value\r\n        const details = (todo) ?\r\n            { todos: { id: todo.id, txt, isDone: todo.isDone } }\r\n            :\r\n            { txt }\r\n        if (!this.props.isAddTodo) this.props.handleUpdate({ details })\r\n    }\r\n    onAddTodo = () => {\r\n        if (this.props.isAddTodo) {\r\n            if (!this.state.text.current.value) return\r\n            this.props.handleRerender(this.state.text.current.value)\r\n        }\r\n    }\r\n    onSubmit = (ev) => {\r\n        if (!this.props.isAddTodo) return\r\n        if (ev.key === 'Enter') {\r\n            ev.preventDefault()\r\n            this.onAddTodo()\r\n        }\r\n        // this.props.handleChange(ev)\r\n    }\r\n    render() {\r\n        return <textarea\r\n            onKeyPress={ this.onSubmit }\r\n            onBlur={ this.onAddTodo }\r\n            spellCheck=\"false\"\r\n            style={ this.props.styles }\r\n            rows={ this.state.rows }\r\n            placeholder={ this.props.placeholder }\r\n            value={ this.props.defaultText }\r\n            className='text-area-input'\r\n            onChange={ (ev) => {\r\n                if (this.props.isAddTodo) this.props.handleChange(ev);\r\n                this.handleResize(ev)\r\n            } }\r\n            ref={ this.state.text }\r\n        />\r\n    }\r\n}\r\n","import React from 'react'\r\nimport ResizeableTextArea from \"../ResizableTextArea.jsx\";\r\n\r\nexport default class TxtNotePreview extends React.Component {\r\n\r\n    render() {\r\n        return <ResizeableTextArea handleUpdate={ this.props.handleUpdate } defaultText={ this.props.note.details.txt }></ResizeableTextArea>\r\n    }\r\n\r\n}\r\n","import React from 'react'\r\nexport default class ImgNotePreview extends React.Component {\r\n\r\n    render() {\r\n        return <React.Fragment>\r\n            <img alt='' src={ this.props.note.details.url }></img>\r\n        </React.Fragment>\r\n    }\r\n\r\n}\r\n","import React from 'react'\r\nimport ResizeableTextArea from \"./ResizableTextArea.jsx\";\r\n\r\nexport default class AddTodo extends React.Component {\r\n    state = {\r\n        defaultText: ''\r\n    }\r\n\r\n    handleChange = (ev) => {\r\n        this.setState({ defaultText: ev.target.value })\r\n    }\r\n\r\n    onRerender = (newTodo) => {\r\n        this.props.handleAdd(newTodo)\r\n        this.setState({ defaultText: '' })\r\n    }\r\n    render() {\r\n        return <div className=\"todo-add\">\r\n            <ResizeableTextArea handleRerender={ this.onRerender } defaultText={ this.state.defaultText } isAddTodo={ true } handleUpdate={ this.props.handleAdd } handleChange={ this.handleChange } placeholder='add new todo' />\r\n        </div>\r\n    }\r\n\r\n}","import React from 'react'\r\nimport ResizeableTextArea from \"../ResizableTextArea.jsx\";\r\nimport AddTodo from '../AddTodo.jsx'\r\nimport { addTodo } from '../../services/keepService.js'\r\n\r\nexport default class TodoNotePreview extends React.Component {\r\n\r\n    toggleTodo = (todo) => {\r\n        let details = { todos: { id: todo.id, txt: todo.txt, isDone: !todo.isDone } }\r\n        this.props.handleUpdate({ details })\r\n    }\r\n    onAddTodo = (todoTxt) => {\r\n        addTodo(this.props.note.id, todoTxt).then(this.props.handleUpdate)\r\n    }\r\n\r\n    render() {\r\n        return <React.Fragment>\r\n            { this.props.note.details.todos.map((todo, i) => {\r\n                return <div key={ i } className='todo-container'>\r\n                    <input defaultChecked={ todo.isDone } onClick={ () => this.toggleTodo(todo) } type='checkbox'></input>\r\n                    <ResizeableTextArea styles={ todo.isDone ? { textDecoration: 'line-through' } : {} } todo={ todo } handleUpdate={ this.props.handleUpdate } defaultText={ todo.txt } />\r\n                </div>\r\n            }) }\r\n            <AddTodo handleAdd={ this.onAddTodo }></AddTodo>\r\n        </React.Fragment>\r\n    }\r\n\r\n}\r\n","import React from 'react'\r\nexport default class VideoNotePreview extends React.Component {\r\n    getIdfromYoutubeUrl(url) {\r\n        const regExp = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/;\r\n        const match = url.match(regExp);\r\n\r\n        return (match && match[2].length === 11)\r\n            ? match[2]\r\n            : null;\r\n    }\r\n\r\n    get renderVideo() {\r\n        const { note } = this.props\r\n        if (note.details.url.includes('youtube')) {\r\n            return <iframe width=\"420\" height=\"315\" title='video'\r\n                src={ `https://www.youtube.com/embed/${this.getIdfromYoutubeUrl(note.details.url)}` }>\r\n            </iframe>\r\n        } else {\r\n            return <video controls>\r\n                <source src={ note.details.url } type=\"video/mp4\" />\r\n            </video>\r\n        }\r\n    }\r\n    render() {\r\n        return <React.Fragment>\r\n            { this.renderVideo }\r\n        </React.Fragment>\r\n\r\n    }\r\n}\r\n","import React from 'react'\r\nexport default class MapsNotePreview extends React.Component {\r\n    componentDidMount() {\r\n    }\r\n\r\n    render() {\r\n        return <div className=\"mapouter\"><div className=\"gmap_canvas\"><iframe title='map' width=\"200\" height=\"200\" id=\"gmap_canvas\" src={ `https://maps.google.com/maps?q=${this.props.note.details.place}&t=&z=15&ie=UTF8&iwloc=&output=embed` } frameBorder=\"0\" scrolling=\"no\" marginHeight=\"0\" marginWidth=\"0\"></iframe></div>\r\n        </div>\r\n    }\r\n}\r\n","import TxtNotePreview from \"../NotePreviewTypes/TxtNotePreview.jsx\";\r\nimport ImgNotePreview from \"../NotePreviewTypes/ImgNotePreview.jsx\";\r\nimport TodoNotePreview from \"../NotePreviewTypes/TodoNotePreview.jsx\";\r\nimport VideoNotePreview from \"../NotePreviewTypes/VideoNotePreview.jsx\";\r\nimport MapsNotePreview from '../NotePreviewTypes/MapsNotePreview.jsx'\r\nimport MusicNotePreview from '../NotePreviewTypes/MusicNotePreview.jsx'\r\n\r\nexport default {\r\n    txt: TxtNotePreview,\r\n    img: ImgNotePreview,\r\n    todo: TodoNotePreview,\r\n    video: VideoNotePreview,\r\n    music: MusicNotePreview,\r\n    maps: MapsNotePreview\r\n}","import React from 'react'\r\nexport default class MusicNotePreview extends React.Component {\r\n    getSpotifyIdFromUrl() {\r\n        let spRegEx = /https?:\\/\\/(?:embed\\.|open\\.)(?:spotify\\.com\\/)(?:track\\/|\\?uri=spotify:track:)((\\w|-){22})/;\r\n        return this.props.note.details.url.match(spRegEx)[1]\r\n    }\r\n\r\n    get renderMusic() {\r\n        const { note } = this.props\r\n        if (note.details.url.includes('spotify')) {\r\n\r\n            return <iframe title='music' src={ `https://open.spotify.com/embed/track/${this.getSpotifyIdFromUrl()}` } frameBorder=\"0\" allowtransparency=\"true\" allow=\"encrypted-media\"></iframe>\r\n\r\n        } else {\r\n            return <audio\r\n                controls\r\n                src={ note.details.url }>\r\n                Your browser does not support the\r\n                <code>audio</code> element.\r\n                </audio>\r\n        }\r\n    }\r\n    render() {\r\n        return <React.Fragment>\r\n            { this.renderMusic }\r\n        </React.Fragment>\r\n\r\n    }\r\n}","import React from 'react'\r\nimport ResizeableTextArea from \"../ResizableTextArea.jsx\";\r\n\r\nexport default class TitleInput extends React.Component {\r\n    state = {\r\n        title: '',\r\n    }\r\n\r\n    onTitleChange = (ev) => {\r\n        this.props.handleUpdate({ title: ev.details.txt })\r\n    }\r\n\r\n    render() {\r\n        return <ResizeableTextArea handleUpdate={ this.onTitleChange } defaultText={ this.props.title }></ResizeableTextArea>\r\n    }\r\n}\r\n","import React from 'react'\r\nexport default function DeleteBtn(props) {\r\n\r\n  return <span className='delete-btn hover-btn' onClick={ props.handleDelete }><i className=\"fas fa-trash-alt\"></i></span>\r\n}","import React from 'react'\r\nexport default function PinBtn(props) {\r\n    function onPin() {\r\n        props.handlePin(props.noteId)\r\n    }\r\n\r\n    return <span className={ `pin-btn hover-btn ${props.isPinned ? 'pinned' : ''}` } onClick={ onPin }>\r\n        <i className=\"fas fa-thumbtack\"></i>\r\n    </span>\r\n}","\r\nimport React from 'react'\r\nexport default class ColorPicker extends React.Component {\r\n    state = {\r\n        isOpen: false\r\n    }\r\n    setColor = (ev) => {\r\n        this.setState({ isOpen: false })\r\n        this.props.handleChange(ev.target.style.backgroundColor)\r\n    }\r\n    onToggle = () => {\r\n        this.setState(prevState => ({ isOpen: !prevState.isOpen }))\r\n    }\r\n    render() {\r\n        return <span className='color-picker'>\r\n            <label onClick={ this.onToggle } htmlFor={ `pallete${this.props.noteId}${this.props.isText ? 'text' : ''}` }><i className={ `hover-btn ${this.props.icon}` }></i></label>\r\n            {/* <input type=\"radio\" checked={this.state.isChecked} name={`colorpick${this.props.noteId}`} id={`pallete${this.props.noteId}${this.props.isText ? 'text' : ''}`} /> */ }\r\n\r\n            <div className={ `colors hover-btn ${this.state.isOpen ? 'open-colors' : ''}` } >\r\n                { this.props.colors.map((color, i) => <label key={ i } onClick={ this.setColor }\r\n                    htmlFor={ `pallete${this.props.noteId}${this.props.isText ? 'text' : ''}` } style={ { backgroundColor: color } }>\r\n                </label>) }\r\n            </div>\r\n        </span>\r\n    }\r\n}","import React from 'react'\r\nimport ColorPicker from \"./ColorPicker.jsx\";\r\n\r\nexport default class ToolBar extends React.Component {\r\n    state = {\r\n        BG_COLORS: ['#ff4040cc', 'green', '#2222f0cf', 'lightsalmon', 'violet', '#FFFF88'],\r\n        TEXT_COLORS: ['black', 'violet', 'green', 'yellow', 'cyan', 'white']\r\n    }\r\n\r\n    onChangeBgColor = (newColor) => {\r\n        this.props.handleUpdate({\r\n            style: {\r\n                backgroundColor: newColor\r\n            }\r\n        })\r\n    }\r\n\r\n    onUpdateTextColor = (newColor) => {\r\n        this.props.handleUpdate({\r\n            style: {\r\n                color: newColor\r\n            }\r\n        })\r\n    }\r\n    render() {\r\n        return <form className='tool-bar'>\r\n            <ColorPicker icon={ 'fas fa-palette palette' } colors={ this.state.BG_COLORS } handleChange={ this.onChangeBgColor } noteId={ this.props.noteId }></ColorPicker>\r\n\r\n            <ColorPicker icon={ 'fas fa-font palette' } colors={ this.state.TEXT_COLORS } isText={ true } handleChange={ this.onUpdateTextColor } noteId={ this.props.noteId }></ColorPicker>\r\n\r\n            <label className='hover-btn' onClick={ this.props.handleSendToMail }>\r\n                <i className=\"fas fa-paper-plane\"></i></label>\r\n        </form>\r\n    }\r\n\r\n}","import React from 'react'\r\nimport { updateNoteById, deleteNote, togglePin } from '../../services/keepService.js'\r\nimport eventBusService from '../../../../services/eventBusService.js'\r\nimport mapNotePreview from \"./mapNotePreview.js\"\r\n\r\nimport TitleInput from \"./TitleInput.jsx\"\r\nimport DeleteBtn from './DeleteBtn.jsx'\r\nimport PinBtn from './PinBtn.jsx'\r\nimport ToolBar from \"./ToolBar.jsx\"\r\n\r\n\r\nexport default class NotePreview extends React.Component {\r\n\r\n    getPreviewCmp(note) {\r\n        const Preview = mapNotePreview[note.type]\r\n        return <Preview note={ note } handleUpdate={ this.onUpdate }></Preview>\r\n    }\r\n\r\n    onUpdate = (updatedFields) => {\r\n        updateNoteById(this.props.note.id, updatedFields).then(this.props.reloadNotes)\r\n    }\r\n\r\n    onDeleteNote = () => {\r\n        eventBusService.callModal('confirmation', { onConfirmAction: this.deleteNote, message: 'Are you sure you want to delete this Note?' });\r\n    }\r\n\r\n    deleteNote = () => {\r\n        deleteNote(this.props.note.id).then(this.props.reloadNotes)\r\n        eventBusService.callModal('updatesBox', { type: 'failure', message: 'Note deleted Successfully!' });\r\n    }\r\n\r\n    onPinNote = () => {\r\n        togglePin(this.props.note.id).then(this.props.reloadNotes)\r\n    }\r\n\r\n    onSendToMail = () => {\r\n        const { note } = this.props\r\n        let content;\r\n        switch (note.type) {\r\n            case 'img':\r\n            case 'video':\r\n            case 'music':\r\n                content = note.details.url\r\n                break;\r\n            case 'txt':\r\n                content = note.details.txt\r\n                break;\r\n            case 'todo':\r\n                content = note.details.todos.map(todo => todo.txt)\r\n                content = content.join(',')\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        window.open(`#/mail/action/sendNote?type=${note.type}&subject=${note.title}&content=${content}`, '_blank');\r\n    }\r\n\r\n    render() {\r\n        const { note } = this.props\r\n        return <React.Fragment>\r\n            <div style={ { color: this.props.textStyle.color } } className='note-title'>\r\n                <TitleInput style={ note.style } handleUpdate={ this.onUpdate } title={ note.title }></TitleInput>\r\n            </div>\r\n            <div style={ { color: this.props.textStyle.color } } className=\"note-body\">\r\n                { this.getPreviewCmp(note) }\r\n            </div>\r\n\r\n            <PinBtn isPinned={ note.isPinned } handlePin={ this.onPinNote }></PinBtn>\r\n            <DeleteBtn handleDelete={ this.onDeleteNote }></DeleteBtn>\r\n            <ToolBar handleSendToMail={ this.onSendToMail } handleUpdate={ this.onUpdate } noteId={ note.id }></ToolBar>\r\n\r\n        </React.Fragment>\r\n    }\r\n\r\n}\r\n","import React from 'react'\r\nimport NotePreview from './NotePreviews/NotePreview.jsx'\r\nexport default function NoteList(props) {\r\n\r\n    return <div className={ (props.pinnedNotes) ? 'pinned-container flex' : 'notes-container' }>\r\n        { props.notes.map(note => (note.id !== 'draft') && <div style={ { backgroundColor: note.style.backgroundColor } } key={ note.id } className='note'><NotePreview textStyle={ note.style } reloadNotes={ props.handleReload } handleUpdate={ props.handleUpdate } note={ note }></NotePreview>\r\n\r\n        </div>) }\r\n    </div>\r\n\r\n}","import React from 'react'\r\nimport AddNote from \"./cmps/AddNote.jsx\";\r\nimport NoteList from \"./cmps/NoteList.jsx\"\r\nimport { getNotesToRender } from \"./services/keepService.js\"\r\nimport eventBusService from \"./../../services/eventBusService.js\"\r\n\r\nexport default class Home extends React.Component {\r\n    state = {\r\n        notes: null,\r\n        searchString: '',\r\n        isTherePinned: false\r\n    }\r\n\r\n    handleSearch = (searchString) => {\r\n        this.setState({ searchString }, this.loadNotes)\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.loadNotes().then(() => eventBusService.emit('setSearchHandler', this.handleSearch));\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        eventBusService.emit('setSearchHandler', null);\r\n    }\r\n\r\n    loadNotes = () => {\r\n        return getNotesToRender(this.state.searchString).then(notes => {\r\n            eventBusService.callModal('pageLoading', false)\r\n            this.setState({ notes }, this.checkPinned)\r\n        })\r\n    }\r\n    checkPinned = () => {\r\n        const pinned = this.state.notes.find(note => note.isPinned);\r\n        this.setState({ isTherePinned: (pinned) ? true : false })\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.notes) return <div>Loading....</div>\r\n        return (\r\n            <section className='main-keep'>\r\n                <AddNote onAdd={ this.loadNotes }></AddNote>\r\n\r\n                { this.state.isTherePinned && <h3><i className=\"fas fa-thumbtack\"></i></h3> }\r\n                { this.state.isTherePinned && <NoteList pinnedNotes={ true } handleReload={ this.loadNotes } notes={ this.state.notes.filter(note => note.isPinned) }></NoteList> }\r\n\r\n                <NoteList handleReload={ this.loadNotes } notes={ this.state.notes.filter(note => !note.isPinned) }></NoteList>\r\n            </section>\r\n        )\r\n    }\r\n}","import { getRandomId } from '../../../services/Utils.js';\r\n\r\nexport default class Mail {\r\n    constructor(targetAddress, copies, subject, body, sentAt = Date.now(),isImportant=false) {\r\n        this.id = getRandomId();\r\n        this.sender = targetAddress;\r\n        this.target = 'tal@gmail.com';\r\n        this.cc = copies ? copies.split(',') : [];\r\n        this.subject = subject;\r\n        this.body = body;\r\n        this.isRead = false;\r\n        this.isImportant = isImportant;\r\n        this.isDeleted = false;\r\n        this.sentAt=sentAt\r\n    }\r\n}","import storageService from '../../../services/storageService.js';\r\nimport { getUrlParams } from '../../../services/Utils.js';\r\nimport Mail from './mailModel.js';\r\n\r\nexport default {\r\n    addMail,\r\n    deleteMailById,\r\n    getMailById,\r\n    getMailsToRender,\r\n    updateMailById,\r\n    getUnreadMailsCounter,\r\n    sendMailToTrash,\r\n    getFormDataFromSource,\r\n    updateMultiple\r\n};\r\n\r\nlet gMails = loadMails();\r\n\r\nfunction addMail(targetAddress, copies, subject, body) {\r\n    gMails = JSON.parse(JSON.stringify(gMails));\r\n    let newMail = new Mail(targetAddress, copies, subject, body);\r\n    gMails.push(newMail);\r\n    saveMails();\r\n    return Promise.resolve(newMail);\r\n}\r\n\r\nfunction deleteMailById(mailId) {\r\n    let mailIdx = getMailIdxById(mailId);\r\n    gMails = JSON.parse(JSON.stringify(gMails));\r\n    gMails.splice(mailIdx, 1);\r\n    saveMails();\r\n    return Promise.resolve(true);\r\n}\r\n\r\nfunction sendMailToTrash(mailId) {\r\n    return updateMailById(mailId, { isDeleted: true }).then(() => true);\r\n}\r\n\r\nfunction updateMailById(mailId, updates) {\r\n    gMails = JSON.parse(JSON.stringify(gMails));\r\n    return getMailById(mailId).then((mail) => {\r\n        for (let field in updates) {\r\n            mail[field] = updates[field];\r\n        }\r\n        saveMails();\r\n    });\r\n}\r\n\r\nfunction getMailById(mailId) {\r\n    return Promise.resolve(gMails.find(mail => mail.id === mailId));\r\n}\r\n\r\nfunction getMailsToRender(filter, sortBy, searchString, pagination) {\r\n\r\n    // expects filter = {name: 'isRead', value: false}, sortBy = { field: 'sentAt', prefix: 1 }\r\n    filter = !filter ? { name: 'isDeleted', value: false } : filter;\r\n\r\n    let mails = gMails.filter(mail => {\r\n\r\n        if (searchString && (!mail.subject.toLowerCase().includes(searchString.toLowerCase()) && !mail.body.toLowerCase().includes(searchString.toLowerCase()))) return false;\r\n\r\n        return filter.name === 'all' ? true : mail[filter.name] === filter.value;\r\n    });\r\n\r\n    let maxPage = Math.ceil(mails.length / pagination.mailsPerPage);\r\n    let currentPage = pagination.currentPage < 1 || pagination.currentPage > maxPage || !pagination.currentPage ? 1 : pagination.currentPage;\r\n\r\n    let startIndex = (currentPage - 1) * pagination.mailsPerPage,\r\n        endIndex = startIndex + pagination.mailsPerPage;\r\n\r\n    mails = sortMails(mails, sortBy).slice(startIndex, endIndex);\r\n\r\n    return Promise.resolve({ mails, currentPage, maxPage });\r\n}\r\n\r\nfunction getUnreadMailsCounter() {\r\n    let counter = { inbox: 0, important: 0, trash: 0, readPercentage: 0 };\r\n    counter = gMails.reduce((acc, mail) => {\r\n        if (mail.isRead) return acc;\r\n\r\n        if (mail.isImportant) acc.important++;\r\n        mail.isDeleted ? acc.trash++ : acc.inbox++;\r\n\r\n        return acc;\r\n    }, counter);\r\n\r\n    counter.readPercentage = parseInt(((gMails.length - counter.inbox - counter.trash) / gMails.length) * 100);\r\n\r\n    return Promise.resolve(counter);\r\n}\r\n\r\nfunction updateMultiple(multUpdates) { // {items: ['21213','423423','23432'], field: 'isRead', value: true}\r\n    multUpdates.items.forEach(mailId => {\r\n        let mail = gMails.find(mail => mail.id === mailId);\r\n        mail[multUpdates.field] = multUpdates.value;\r\n    })\r\n    saveMails();\r\n    return Promise.resolve('success');\r\n}\r\n\r\nfunction loadMails() {\r\n    let loadedMails = storageService.loadFromStorage('gMails', null);\r\n    return loadedMails ? loadedMails : createTestMails();\r\n}\r\n\r\nfunction getMailIdxById(mailId) {\r\n    return gMails.findIndex(mail => mail.id === mailId)\r\n}\r\n\r\nfunction saveMails() {\r\n    storageService.saveToStorage('gMails', gMails);\r\n}\r\n\r\nfunction createTestMails() {\r\n    let newMails = [];\r\n    newMails.push(new Mail('nevo@gmail.com', '', `Sprint 3`, `Awesome modal bro, ill take it`, 1577640402351 - 1000000, true));\r\n    newMails.push(new Mail('talbarak@gmail.com', '', `dropbox git`, `Delete your .git before i delete your face`, 1577640402351 - 10000000, true));\r\n    newMails.push(new Mail('facebook@gmail.com', '', `New notifications`, `Check out what's new in your page!`, 1577640402351 - 310434000));\r\n    newMails.push(new Mail('no-reply-miluim@gmail.com', '', `פנייה חדשה`, `עדכון חדש מחכה לך בפורטל המילואים באתר`, 1577640402351 - 10000000));\r\n    newMails.push(new Mail('nevo@gmail.com', '', `Git stuff`, `Come on dude push and pull, push and pull!!`, 1577640402351 - 100000000, true));\r\n    newMails.push(new Mail('twitter@gmail.com', '', `Tal, get the Tweets you love`, `To get the Tweets you love, just follow the accounts who bring great content. For example, check out the latest from @TwitterVideo, where the top videos of the week are served up fresh. If you like what you see, click the follow button to get the latest delivered right to your timeline`));\r\n    newMails.push(new Mail('Codewars@gmail.com', '', `Weekly Coding Challenges`, `Codewars & Coffee Take a kata break, while you caffeinate`, 1577640402351 - 423500));\r\n    newMails.push(new Mail('linkedIn@gmail.com', '', `Shmuel Elkis via LinkedIn‏ `, `Shmuel Elkis has accepted your invitation. Let's start a conversation.`, 1577640402351 - 1234000));\r\n    newMails.push(new Mail('spotify@gmail.com', '', `Upcoming shows near Tel Aviv: Berry Sakharof, Hila Ruach and more `, `Upcoming concerts near you by artists you love.`, 1577640402351 - 1425400));\r\n    newMails.push(new Mail('avocode@gmail.com', '', `Your free trial is over`, `The free trial for tal's team has ended. Please log in and purchase a subscription within 14 days to keep working on your design projects.`, 1576640402351 - 10000000));\r\n    newMails.push(new Mail('ebay@gmail.com', '', `Tal, Get the Best of eBay, Personalized for You`, `Check best eBay offers Selected specially for you`, 1576640402351 - 10000000));\r\n    newMails.push(new Mail('amazon‏@gmail.com', '', `AWS re:Invent 2019 Recap`, `re:Invent 2019 is all wrapped up! AWS announced 77 products  Manager, AWS Transite Gateway Inter-Region Peering, IP Multicasting.`, 1576640402351 - 10000000));\r\n    newMails.push(new Mail('nevo@gmail.com', '', `HEEELLLPPP`, `I cant change the font color in my notes!! no idea whats wrong, i need your assistance right away!!`, 1576640402351 - 10000000, true));\r\n    newMails.push(new Mail('nevo@gmail.com', '', `Project`, `Tommorrow we need to present the project, i'm gonna very very sick. could you do the presentation by yourself?`, 1576640402351, true));\r\n\r\n    return newMails;\r\n}\r\n\r\nfunction sortMails(mails, sortBy) {\r\n    if (sortBy.field === 'isRead') {\r\n        return mails.sort((mailA, mailB) => {\r\n            return mailA.isRead === mailB.isRead ? 0 : (mailA.isRead ? 1 * sortBy.prefix : -1 * sortBy.prefix);\r\n        });\r\n    } else {\r\n        return mails.sort((mailA, mailB) => {\r\n            return mailA[sortBy.field] < mailB[sortBy.field] ? 1 * sortBy.prefix :\r\n                (mailA[sortBy.field] > mailB[sortBy.field] ? -1 * sortBy.prefix : 0);\r\n        });\r\n    }\r\n}\r\n\r\nfunction getFormDataFromSource(transferredData) {\r\n    if (transferredData.sourceType === 'quote')\r\n        return buildFormFromQuote(transferredData.mailToQuote);\r\n    else if (transferredData.sourceType === 'note')\r\n        return buildFormFromNote();\r\n    return null;\r\n}\r\n\r\nfunction buildFormFromQuote(mailToQuote) {\r\n    return {\r\n        formTitle: 'Quick Reply: ' + mailToQuote.subject,\r\n        to: mailToQuote.sender,\r\n        subject: 'Re: ' + mailToQuote.subject,\r\n        body: mailToQuote.body + '\\n\\n-----------------------\\n\\n'\r\n    };\r\n}\r\n\r\nfunction buildFormFromNote() {\r\n    let windowSearch = window.location.hash.split('?')[1];\r\n    let noteType = getUrlParams('type', windowSearch),\r\n        noteSubject = getUrlParams('subject', windowSearch),\r\n        noteContent = getUrlParams('content', windowSearch),\r\n        noteContentPrefix;\r\n\r\n    switch (noteType) {\r\n        case 'video':\r\n            noteContentPrefix = 'Video';\r\n            break;\r\n        case 'img':\r\n            noteContentPrefix = 'Image';\r\n            break;\r\n        case 'music':\r\n            noteContentPrefix = 'Song';\r\n            break;\r\n        case 'todo':\r\n            noteContentPrefix = 'Todo List';\r\n            noteContent = noteContent.split(',').join(',\\n');\r\n            break;\r\n        default:\r\n            noteContentPrefix = 'Note'\r\n    }\r\n\r\n    noteContentPrefix = 'Hey check out this ' + noteContentPrefix + ':\\n';\r\n\r\n    return {\r\n        formTitle: 'Send Note: ' + noteSubject,\r\n        subject: 'Note: ' + noteSubject,\r\n        body: noteContentPrefix + noteContent + '\\n\\n-----------------------\\n\\n'\r\n    };\r\n}","import React from 'react'\r\nimport mailService from '../../../services/mailService.js';\r\nimport eventBusService from '../../../../../services/eventBusService.js';\r\n\r\nexport default class MailButtons extends React.Component {\r\n    onUpdateMail = (updates) => {\r\n        return mailService.updateMailById(this.props.mail.id, updates).then(this.props.reloadMail);\r\n    }\r\n\r\n    onDeleteMail = (event) => {\r\n        event.stopPropagation();\r\n        eventBusService.callModal('confirmation', { onConfirmAction: this.confirmDeletion, message: 'Are you sure you want to delete this mail permanently?' });\r\n    }\r\n\r\n    confirmDeletion = () => {\r\n        eventBusService.callModal('pageLoading', true);\r\n        return mailService.deleteMailById(this.props.mail.id)\r\n            .then(() => {\r\n                eventBusService.callModal('pageLoading', false);\r\n                eventBusService.callModal('updatesBox', { type: 'success', message: 'Mail Deleted Successfully!' });\r\n\r\n                return this.props.isFromPreview ? this.props.reloadMail() : window.location.assign(`#/mail/`);\r\n            });\r\n    }\r\n\r\n    onShowMailDetails = () => {\r\n        this.props.history.push(`mail/${this.props.mail.id}`);\r\n    }\r\n\r\n    onToggleMailRead = (event) => {\r\n        event.stopPropagation();\r\n        let message = 'Marked as ' + (this.props.mail.isRead ? ' not ' : '') + 'Read';\r\n        this.onUpdateMail({ isRead: !this.props.mail.isRead }).then(() => {\r\n            eventBusService.callModal('updatesBox', { type: 'success', message });\r\n            return eventBusService.emit('mailStateChanged')\r\n        });\r\n    }\r\n\r\n    onToggleMailInTrash = (event) => {\r\n        event.stopPropagation();\r\n        let message = 'Mail ' + (this.props.mail.isDeleted ? 'removed from Trash' : 'sent to Trash');\r\n        this.onUpdateMail({ isDeleted: !this.props.mail.isDeleted })\r\n            .then(() => {\r\n                eventBusService.callModal('updatesBox', { type: 'success', message });\r\n                return eventBusService.emit('mailStateChanged');\r\n            });\r\n    }\r\n\r\n    onToggleMailImportance = (event) => {\r\n        event.stopPropagation();\r\n        let message = 'Marked as ' + (this.props.mail.isImportant ? ' not ' : '') + 'Important';\r\n        this.onUpdateMail({ isImportant: !this.props.mail.isImportant }).then(() => {\r\n            eventBusService.callModal('updatesBox', { type: 'success', message });\r\n            return eventBusService.emit('mailStateChanged')\r\n        });\r\n    }\r\n\r\n    goBack = () => {\r\n        return this.props.history.goBack ? this.props.history.goBack() : null;\r\n    }\r\n\r\n    render() {\r\n        const { mail } = this.props;\r\n        if (!mail) return <div>error</div>;\r\n        return (\r\n            <React.Fragment>\r\n                <button className=\"go-back-button simple-button\" onClick={ this.goBack }><i className=\"fas fa-arrow-circle-left\"></i></button>\r\n                <div className=\"mail-buttons-container\">\r\n                    <button onClick={ this.props.onReplyToMail }>\r\n                        <i className=\"fas fa-reply\"></i></button>\r\n                    <button onClick={ this.onToggleMailRead }>\r\n                        <i className={ this.props.mail.isRead ? 'fas fa-book-open' : 'fas fa-book' }></i></button>\r\n                    <button onClick={ this.onToggleMailImportance } className=\"perm\">\r\n                        <i className={ this.props.mail.isImportant ? 'fas fa-star active' : 'far fa-star' }></i></button>\r\n                    <button onClick={ this.onToggleMailInTrash } className=\"perm\">\r\n                        <i className={ this.props.mail.isDeleted ? 'fas fa-recycle' : 'fas fa-trash' }></i></button>\r\n\r\n                    { this.props.mail.isDeleted ? <button onClick={ this.onDeleteMail }><i className=\"fas fa-dumpster\"></i></button> : '' }\r\n                    { this.props.isFromPreview ? <button onClick={ this.onShowMailDetails } className=\"perm\"><i className=\"fas fa-expand-arrows-alt\"></i></button> : '' }\r\n                </div>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}","\r\nimport React from 'react'\r\nimport mailService from '../services/mailService.js';\r\nimport eventBusService from '../../../services/eventBusService.js';\r\n\r\nexport default class NewMailForm extends React.Component {\r\n    state = {\r\n        to: '',\r\n        cc: '',\r\n        subject: '',\r\n        body: '',\r\n        formTitle: 'Send New Mail'\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        let field = event.target.name,\r\n            value = event.target.value;\r\n        this.setState(() => ({ [field]: value }));\r\n    }\r\n\r\n    onFormSubmit = (event) => {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        const mailData = { ...this.state };\r\n        eventBusService.callModal('pageLoading', true);\r\n\r\n        mailService.addMail(mailData.to, mailData.cc, mailData.subject, mailData.body).then(() => {\r\n            eventBusService.callModal('pageLoading', false);\r\n            eventBusService.callModal('updatesBox', { type: 'success', message: 'Mail Sent Successfully!' });\r\n            eventBusService.emit('mailAdd');\r\n            this.props.onModalClose(event);\r\n        });\r\n    }\r\n\r\n    onModalClose = (event) => {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        this.props.onModalClose(event);\r\n    }\r\n\r\n    buildFormFromSource() {\r\n        let formData = mailService.getFormDataFromSource(this.props.transData);\r\n        return formData ? this.setState({ ...formData }) : null;\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.transData.sourceType) this.buildFormFromSource();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <form className=\"flex column new-mail-form\" onSubmit={ this.onFormSubmit } action=\"\" method=\"post\">\r\n                <div className=\"new-mail-form-title\">{ this.state.formTitle }</div>\r\n                <span>\r\n                    <label htmlFor=\"new-mail-subject\">To:</label>\r\n                    <input type=\"email\" id=\"new-mail-to\" name=\"to\" value={ this.state.to } onChange={ this.handleChange } placeholder=\"E.g John@gmail.com\" required />\r\n                </span>\r\n                <span>\r\n                    <label htmlFor=\"new-mail-cc\">Cc:</label>\r\n                    <input type=\"text\" id=\"new-mail-cc\" name=\"cc\" value={ this.state.cc } onChange={ this.handleChange } placeholder=\"Copies, seperate by commas\" />\r\n                </span>\r\n                <span>\r\n                    <label htmlFor=\"new-mail-subject\">Subject:</label>\r\n                    <input type=\"text\" id=\"new-mail-subject\" name=\"subject\" value={ this.state.subject } onChange={ this.handleChange } placeholder=\"Mail Subject\" required />\r\n                </span>\r\n                <textarea name=\"body\" value={ this.state.body } onChange={ this.handleChange } placeholder=\"Your text...\" required></textarea>\r\n                <div className=\"new-mail-form-buttons flex space-between align-center\">\r\n                    <button onClick={ this.onModalClose } className=\"dismiss simple-button normal-trans\">&times;</button>\r\n                    <button className=\"send simple-button normal-trans\"><i className=\"fas fa-paper-plane\"></i></button>\r\n                </div>\r\n            </form>\r\n        );\r\n    }\r\n}","import React from 'react'\r\nimport eventBusService from '../../../../services/eventBusService.js';\r\nimport { sliceStringByLength } from '../../../../services/Utils.js';\r\nimport mailService from '../../services/mailService.js';\r\nimport MailButtons from './MailFullDisplay/MailButtons.jsx';\r\n\r\nimport NewMailForm from '../NewMailForm.jsx';\r\n\r\nexport default class MailFullDisplay extends React.Component {\r\n\r\n    state = {\r\n        isFromPreview: false\r\n    }\r\n\r\n    onReplyToMail = (event) => {\r\n        event.stopPropagation();\r\n        eventBusService.callModal('regularModal', { component: NewMailForm, mailToQuote: this.props.mail, sourceType: 'quote' });\r\n    }\r\n\r\n    get formattedBodyText() {\r\n        return this.state.isFromPreview ? sliceStringByLength(this.props.mail.body, 210) : this.props.mail.body;\r\n    }\r\n\r\n    get formattedMailSender() {\r\n        return this.props.mail.sender.split('@')[0];\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        if (this.props.isFromPreview) return this.setState(() => ({ isFromPreview: true }));\r\n\r\n        if (!this.props.mail.isRead) {\r\n            mailService.updateMailById(this.props.mail.id, { isRead: true }).then(() => {\r\n                if (this.state.isFromPreview) this.props.reloadMail();\r\n                eventBusService.emit('mailStateChanged');\r\n            });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { mail } = this.props;\r\n        if (!mail) return <div>error</div>;\r\n        return (\r\n            <div className=\"mail-details\">\r\n                <h2>{ mail.subject }</h2>\r\n                <div className=\"mail-sender\"><span className=\"sender-name\">{ this.formattedMailSender }</span> <small>{ '<' + mail.sender + '>' }</small></div>\r\n                <p className=\"mail-body\">{ this.formattedBodyText }</p>\r\n                <MailButtons history={ this.props.history } mail={ this.props.mail } isFromPreview={ this.state.isFromPreview } reloadMail={ this.props.reloadMail } onReplyToMail={ this.onReplyToMail } />\r\n            </div>);\r\n    }\r\n}","import React from 'react'\r\nimport mailService from '../services/mailService.js';\r\nimport MailFullDisplay from './MailDetails/MailFullDisplay.jsx'\r\n\r\nexport default class MailDetails extends React.Component {\r\n    state = {\r\n        mail: null\r\n    }\r\n\r\n    loadMail = () => {\r\n        mailService.getMailById(this.props.match.params.id).then(foundMail => this.setState(() => ({ mail: foundMail })));\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.loadMail();\r\n    }\r\n\r\n    render() {\r\n        const { mail } = this.state;\r\n        if (!mail) return <div>Could not find mail</div>;\r\n        return (<MailFullDisplay history={ this.props.history } mail={ this.state.mail } reloadMail={ this.loadMail } isFromPreview={ false } />);\r\n    }\r\n}","import React from 'react'\r\n\r\nexport default class MailListSortingMenu extends React.Component {\r\n\r\n    onSortBy = (event) => {\r\n        let sortByField = event.target.value;\r\n\r\n        let updatedSorting = sortByField === this.props.currSort.field ?\r\n            { prefix: this.props.currSort.prefix * -1 } : { field: sortByField };\r\n        this.props.sortBy(updatedSorting);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <ul className=\"clean-list flex mail-list-sorting-menu\">\r\n                <li>\r\n                    <input type=\"radio\" id=\"sort-by-date\" name=\"sort-by\" value=\"sentAt\" defaultChecked onClick={ this.onSortBy } />\r\n                    <label htmlFor=\"sort-by-date\">date <i className=\"fas fa-sort\"></i></label>\r\n                </li>\r\n                <li>\r\n                    <input type=\"radio\" id=\"sort-by-origin\" name=\"sort-by\" value=\"sender\" onClick={ this.onSortBy } />\r\n                    <label htmlFor=\"sort-by-origin\">Origin <i className=\"fas fa-sort\"></i></label>\r\n                </li>\r\n                <li>\r\n                    <input type=\"radio\" id=\"sort-by-unread\" name=\"sort-by\" value=\"isRead\" onClick={ this.onSortBy } />\r\n                    <label htmlFor=\"sort-by-unread\">unread <i className=\"fas fa-sort\"></i></label>\r\n                </li>\r\n            </ul>);\r\n    }\r\n}","import React from 'react'\r\nimport { getFormattedTimeString, sliceStringByLength } from '../../../../services/Utils.js';\r\nimport MailFullDisplay from '../MailDetails/MailFullDisplay.jsx';\r\n\r\n\r\nexport default class MailPreview extends React.Component {\r\n\r\n    state = {\r\n        isSelected: false\r\n    }\r\n\r\n    get formattedMailSubject() {\r\n        return sliceStringByLength(this.props.mail.subject, 30);\r\n    }\r\n\r\n    get formattedMailBody() {\r\n        return sliceStringByLength(this.props.mail.body, 200);\r\n    }\r\n\r\n    get formattedMailSender() {\r\n        return this.props.mail.sender.split('@')[0];\r\n    }\r\n\r\n    get formattedSentDate() {\r\n        return getFormattedTimeString(this.props.mail.sentAt);\r\n    }\r\n\r\n    toggleExpansion = () => {\r\n        this.props.toggleMailExpansion(this.props.mail.id);\r\n    }\r\n\r\n    onToggleSelection = (event) => {\r\n        event.stopPropagation();\r\n        this.setState(prevState => ({ isSelected: !prevState.isSelected }));\r\n        this.props.onSelectMail();\r\n    }\r\n\r\n    render() {\r\n        const { mail } = this.props;\r\n        return (\r\n            <li onClick={ this.toggleExpansion } className={ this.state.isSelected ? 'selected' : '' }>\r\n                <div className=\"mail-preview\">\r\n                    <div className=\"sender-icon flex\">{ this.formattedMailSender.slice(0, 1) }</div>\r\n                    <div className=\"preview-text-wrapper\">\r\n                        <span className=\"mail-multi-selector\">\r\n                            <input type=\"checkbox\" className=\"mail-select-box\" value={ mail.id } onClick={ this.onToggleSelection } checked={ this.isSelected } />\r\n                        </span>\r\n                        <span className=\"mail-sender\">{ this.formattedMailSender }</span>\r\n                        <span className=\"mail-subject\">\r\n                            <div className={ mail.isRead ? '' : 'bolded' }>{ this.formattedMailSubject }</div>\r\n                            { this.formattedMailBody }\r\n                        </span>\r\n                        <span className=\"mail-date\">{ this.formattedSentDate }</span>\r\n                    </div>\r\n                </div>\r\n                { this.props.isExpanded ? <MailFullDisplay history={ this.props.history } mail={ mail } reloadMail={ this.props.reloadMails } isFromPreview={ true } /> : '' }\r\n            </li>);\r\n    }\r\n}","import React from 'react'\r\nexport default function MultSelectBox(props) {\r\n    return (<div className={ 'multi-select-options' + (props.isVisible ? ' visible' : '') }>\r\n        <select onChange={ props.onOptionSelect } defaultValue=\"\">\r\n            <option value=\"\">Mark As</option>\r\n            <option value=\"isRead,true\">Read</option>\r\n            <option value=\"isRead,false\">Unread</option>\r\n            <option value=\"isImportant,true\">Important</option>\r\n            <option value=\"isImportant,false\">Not Important</option>\r\n            <option value=\"isDeleted,true\">Trash</option>\r\n            <option value=\"isDeleted,false\">Not Trash</option>\r\n        </select>\r\n    </div>)\r\n}","import React from 'react'\r\n\r\nimport eventBusService from '../../../services/eventBusService.js';\r\nimport { getUrlParams } from '../../../services/Utils.js';\r\nimport mailService from '../services/mailService.js';\r\nimport MailListSortingMenu from './MailList/MailListSortingMenu.jsx';\r\nimport PaginationMenu from '../../../cmps/PaginationMenu.jsx';\r\nimport MailPreview from './MailList/MailPreview.jsx';\r\nimport NewMailForm from './NewMailForm.jsx';\r\nimport MultSelectOptionsBox from './MailList/MultSelectBox.jsx';\r\n\r\nexport default class MailList extends React.Component {\r\n    state = {\r\n        mails: [],\r\n        currentPage: 1,\r\n        maxPage: 1,\r\n        mailsPerPage: 10,\r\n        removeNewMailEventListener: null,\r\n        expandedMailId: null,\r\n        sortBy: { field: 'sentAt', prefix: 1 },\r\n        searchString: null,\r\n        selectedMails: []\r\n    };\r\n\r\n    get currentMailsFilter() {\r\n        switch (this.props.match.params['filterName']) {\r\n            case 'important':\r\n                return { name: 'isImportant', value: true };\r\n            case 'trash':\r\n                return { name: 'isDeleted', value: true };\r\n            case 'all':\r\n                return { name: 'all', value: true };\r\n            default:\r\n                return null;\r\n        }\r\n    }\r\n\r\n    get currentPaginationSettings() {\r\n        return {\r\n            currentPage: parseInt(getUrlParams('page', this.props.location.search)),\r\n            mailsPerPage: this.state.mailsPerPage\r\n        };\r\n    }\r\n\r\n    onSelectMail = () => {\r\n        let elSelectedMails = Array.from(document.querySelectorAll('input.mail-select-box:checked'));\r\n        let selectedMails = elSelectedMails.map(elCheckedBox => elCheckedBox.value);\r\n        this.setState({ selectedMails });\r\n    }\r\n\r\n    onMarkSelectedAs = (event) => {\r\n        let selection = event.target.value.split(',');\r\n        let multUpdates = {\r\n            items: this.state.selectedMails,\r\n            field: selection[0],\r\n            value: selection[1] === 'true' ? true : false\r\n        };\r\n\r\n        mailService.updateMultiple(multUpdates).then(this.loadMails);\r\n    }\r\n\r\n    loadMails = () => {\r\n        let filter = this.currentMailsFilter,\r\n            sortOrder = this.state.sortBy,\r\n            searchString = this.state.searchString,\r\n            paginationSettings = this.currentPaginationSettings;\r\n\r\n        return mailService.getMailsToRender(filter, sortOrder, searchString, paginationSettings)\r\n            .then(mailsToRender => this.setState({ ...mailsToRender }));\r\n    }\r\n\r\n    toggleMailExpansion = (mailId) => {\r\n        this.setState((prevState) => ({ expandedMailId: (prevState.expandedMailId === mailId ? null : mailId) }));\r\n    }\r\n\r\n    sortBy = (updatedField) => {\r\n        return this.setState((prevState) => ({ sortBy: { ...prevState.sortBy, ...updatedField } })\r\n            , this.loadMails);\r\n    }\r\n\r\n    handleSearch = (searchString) => {\r\n        this.setState({ searchString }, this.loadMails);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.loadMails().then(() => eventBusService.emit('setSearchHandler', this.handleSearch));\r\n        this.setState(() => ({\r\n            removeNewMailEventListener: eventBusService.on('mailAdd', () => {\r\n                this.loadMails();\r\n                eventBusService.emit('mailStateChanged');\r\n            })\r\n        }));\r\n\r\n        if (this.props.match.params.actionType === 'sendNote') eventBusService.callModal('regularModal', { component: NewMailForm, sourceType: 'note' });\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        let prevDisplayFilter = prevProps.match.params.filterName,\r\n            currDisplayFilter = this.props.match.params.filterName,\r\n            prevDisplayPage = getUrlParams('page', prevProps.location.search),\r\n            currDisplayPage = getUrlParams('page', this.props.location.search);\r\n        if (prevDisplayFilter !== currDisplayFilter || prevDisplayPage !== currDisplayPage) this.loadMails();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.state.removeNewMailEventListener) this.state.removeNewMailEventListener();\r\n        eventBusService.emit('setSearchHandler', null);\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <div className=\"flex align-center space-between mail-list-options\">\r\n                    <MailListSortingMenu sortBy={ this.sortBy } currSort={ this.state.sortBy } />\r\n                    <PaginationMenu history={ this.props.history } currentPage={ this.state.currentPage } maxPage={ this.state.maxPage } />\r\n                </div>\r\n                <ul className={ 'clean-list mails-list' + (this.state.mails.length < 1 ? ' no-content' : '') }>\r\n                    { this.state.mails.map((mail, idx) =>\r\n                        <MailPreview toggleMailExpansion={ this.toggleMailExpansion } isExpanded={ this.state.expandedMailId === mail.id }\r\n                            mail={ mail } key={ idx } history={ this.props.history } currFilter={ this.getCurrentMailsFilter } reloadMails={ this.loadMails } onSelectMail={ this.onSelectMail } />) }\r\n                </ul>\r\n                <MultSelectOptionsBox onOptionSelect={ this.onMarkSelectedAs } isVisible={ this.state.selectedMails.length ? true : false } />\r\n            </React.Fragment>);\r\n    }\r\n}","import React from 'react'\r\nexport default function MailReadProgress(props) {\r\n    let progressBar = <span className=\"progress-bar\" style={ { width: props.readPercentage + '%' } }></span>;\r\n\r\n    return (\r\n        <div className=\"mailbox-status\">\r\n            { progressBar }\r\n            <span className=\"progress-text flex auto-center\">{ props.readPercentage + '%' }</span>\r\n        </div>);\r\n}\r\n\r\n","import React from 'react'\r\nimport { NavLink } from 'react-router-dom'\r\n\r\nimport mailService from '../services/mailService.js';\r\nimport eventBusService from '../../../services/eventBusService.js';\r\nimport NewMailForm from './NewMailForm.jsx';\r\nimport MailReadProgress from './MailSideNav/MailReadProgress.jsx';\r\n\r\n\r\n\r\nexport default class MailSideNav extends React.Component {\r\n    state = {\r\n        unreadCounters: { inbox: 0, important: 0, trash: 0, readPercentage: 0 },\r\n        removeMailReadEventListener: null\r\n    }\r\n\r\n    onNewMailFormToggle = () => {\r\n        eventBusService.callModal('regularModal', { component: NewMailForm });\r\n    }\r\n\r\n    displayUnread = (itemsType) => {\r\n        return this.state.unreadCounters[itemsType] ? ` (${this.state.unreadCounters[itemsType]})` : '';\r\n    }\r\n\r\n    getUnreadCounter = () => {\r\n        mailService.getUnreadMailsCounter().then(result => this.setState(() => ({ unreadCounters: result })));\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getUnreadCounter();\r\n        this.setState(() => ({ removeMailReadEventListener: eventBusService.on('mailStateChanged', this.getUnreadCounter) }));\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.state.removeMailReadEventListener && this.state.removeMailReadEventListener();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <nav className=\"mails-side-nav\">\r\n                <button onClick={ this.onNewMailFormToggle } className=\"new-mail-btn\">Compose <span>+</span></button>\r\n                <ul className=\"clean-list flex column main-sidenav-list\">\r\n                    <li><NavLink activeClassName=\"active\" to='/mail/filter/all'><i className=\"fas fa-mail-bulk\"></i>All Mails</NavLink></li>\r\n                    <li><NavLink activeClassName=\"active\" to='/mail' exact><i className=\"fas fa-inbox\"></i>Inbox{ this.displayUnread('inbox') }</NavLink></li>\r\n                    <li><NavLink activeClassName=\"active\" to='/mail/filter/sent'><i className=\"far fa-paper-plane\"></i>Sent Items</NavLink></li>\r\n                    <li><NavLink activeClassName=\"active\" to='/mail/filter/important'><i className=\"far fa-bookmark\"></i>Important{ this.displayUnread('important') }</NavLink></li>\r\n                    <li><NavLink activeClassName=\"active\" to='/mail/filter/trash'><i className=\"fas fa-trash\"></i>Trash{ this.displayUnread('trash') }</NavLink></li>\r\n                </ul>\r\n                <MailReadProgress readPercentage={ this.state.unreadCounters.readPercentage } />\r\n            </nav>);\r\n    }\r\n}","// Router\r\nimport React from 'react'\r\nimport { Route, Switch, Router } from 'react-router-dom'\r\n\r\n\r\nimport MailDetails from './cmps/MailDetails.jsx';\r\nimport MailList from './cmps/MailList.jsx';\r\nimport MailSideNav from './cmps/MailSideNav.jsx';\r\n\r\nexport default class MailApp extends React.Component {\r\n    render() {\r\n        return (\r\n            <Router history={ this.props.history }>\r\n                <div className=\"mail-main-wrapper\">\r\n                    <MailSideNav />\r\n                    <section className=\"mail-main-content\">\r\n                        <Switch>\r\n                            <Route path=\"/mail/filter/:filterName\" exact component={ MailList } />\r\n                            <Route path=\"/mail/action/:actionType\" exact component={ MailList } />\r\n                            <Route path=\"/mail/:id\" exact component={ MailDetails } />\r\n                            <Route path=\"/mail\" exact component={ MailList } />\r\n                        </Switch>\r\n                    </section>\r\n                </div>\r\n            </Router>\r\n        )\r\n    }\r\n}\r\n","import React from 'react'\r\nexport default class MenusToggler extends React.Component {\r\n\r\n    closeMenu = () => {\r\n        window.onscroll = null;\r\n        this.props.closeMenu();\r\n    }\r\n\r\n    onKeyUp = (event) => {\r\n        if (event.key === 'Escape') this.props.closeMenu();\r\n    }\r\n\r\n    componentDidMount() {\r\n        window.addEventListener('scroll', this.closeMenu);\r\n        window.addEventListener('keyup', this.onKeyUp);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('scroll', this.closeMenu);\r\n        window.removeEventListener('keyup', this.onKeyUp);\r\n    }\r\n\r\n    render() {\r\n        return (<div className=\"menus-toggler\" onClick={ this.closeMenu }></div>);\r\n    }\r\n}","import React from 'react'\r\nimport eventBusService from '../../services/eventBusService.js';\r\n\r\nexport default class SearchBox extends React.Component {\r\n\r\n    state = {\r\n        currentSearchHandler: null,\r\n        searchString: ''\r\n    }\r\n\r\n    handleSearchInput = (event) => {\r\n        let searchString = event.target.value;\r\n        this.setState({ searchString }, () => this.state.currentSearchHandler(this.state.searchString));\r\n    }\r\n\r\n    setCurrentSearchHandler = (searchHandler) => {\r\n        this.setState({ currentSearchHandler: searchHandler });\r\n    }\r\n\r\n    componentDidMount() {\r\n        eventBusService.on('setSearchHandler', this.setCurrentSearchHandler);\r\n    }\r\n\r\n    render() {\r\n        return !this.state.currentSearchHandler ? '' :\r\n            (<div className=\"main-search-box\">\r\n                <input type=\"search\" className=\"normal-trans\" onChange={ this.handleSearchInput } value={ this.state.searchString } placeholder=\"Search here!\" />\r\n            </div>);\r\n    }\r\n}","import React from 'react'\r\nimport { NavLink } from 'react-router-dom'\r\nimport MenusToggler from '../Modal/MenusToggler.jsx';\r\n\r\nexport default class MainNavLinks extends React.Component {\r\n    state = { isMenuOpen: false };\r\n\r\n    toggleMenu = () => {\r\n        this.setState((prevState) => ({ isMenuOpen: !prevState.isMenuOpen }));\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"main-nav-links\">\r\n                <button className=\"simple-button\" onClick={ this.toggleMenu }><svg className=\"gb_Se\" focusable=\"false\" viewBox=\"0 0 24 24\"><path d=\"M6,8c1.1,0 2,-0.9 2,-2s-0.9,-2 -2,-2 -2,0.9 -2,2 0.9,2 2,2zM12,20c1.1,0 2,-0.9 2,-2s-0.9,-2 -2,-2 -2,0.9 -2,2 0.9,2 2,2zM6,20c1.1,0 2,-0.9 2,-2s-0.9,-2 -2,-2 -2,0.9 -2,2 0.9,2 2,2zM6,14c1.1,0 2,-0.9 2,-2s-0.9,-2 -2,-2 -2,0.9 -2,2 0.9,2 2,2zM12,14c1.1,0 2,-0.9 2,-2s-0.9,-2 -2,-2 -2,0.9 -2,2 0.9,2 2,2zM16,6c0,1.1 0.9,2 2,2s2,-0.9 2,-2 -0.9,-2 -2,-2 -2,0.9 -2,2zM12,8c1.1,0 2,-0.9 2,-2s-0.9,-2 -2,-2 -2,0.9 -2,2 0.9,2 2,2zM18,14c1.1,0 2,-0.9 2,-2s-0.9,-2 -2,-2 -2,0.9 -2,2 0.9,2 2,2zM18,20c1.1,0 2,-0.9 2,-2s-0.9,-2 -2,-2 -2,0.9 -2,2 0.9,2 2,2z\"></path></svg></button>\r\n                <ul className={ 'main-nav-links-list clean-list flex space-between normal-trans' + (this.state.isMenuOpen ? ' open' : '') } onMouseOut={ this.moveOutside }>\r\n                    <li><NavLink activeClassName=\"active\" to='/' exact onClick={ this.toggleMenu }><i className=\"fas fa-home\"></i>Home</NavLink></li>\r\n                    <li><NavLink activeClassName=\"active\" to='/books' onClick={ this.toggleMenu }><i className=\"fas fa-book\"></i>Books</NavLink></li>\r\n                    <li><NavLink activeClassName=\"active\" to='/keep' onClick={ this.toggleMenu }><i className=\"far fa-sticky-note\"></i>Keep</NavLink></li>\r\n                    <li><NavLink activeClassName=\"active\" to='/mail' onClick={ this.toggleMenu }><i className=\"far fa-envelope\"></i>Mail</NavLink></li>\r\n                </ul>\r\n                { this.state.isMenuOpen ? <MenusToggler closeMenu={ this.toggleMenu } /> : '' }\r\n            </div>);\r\n    }\r\n}","import React from 'react'\r\nimport MenusToggler from './Modal/MenusToggler.jsx';\r\nimport SearchBox from './Navbar/SearchBox.jsx';\r\nimport MainNavLinks from './Navbar/MainNavLinks.jsx';\r\n\r\nexport default class Navbar extends React.Component {\r\n    state = {\r\n        currAppMenuOpen: false\r\n    }\r\n\r\n    toggleCurrAppMenu = () => {\r\n        if (!window.location.pathname.includes('/mail') || document.body.offsetWidth > 700) return;\r\n        this.setState((prevState) => ({ currAppMenuOpen: !prevState.currAppMenuOpen }));\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <nav className={ \"main-nav flex align-center\" + (this.state.currAppMenuOpen ? ' sub-menu-open' : '') }>\r\n                { this.state.currAppMenuOpen ? <MenusToggler closeMenu={ this.toggleCurrAppMenu } /> : '' }\r\n                <div className=\"main-nav-logo\"><img alt='' src=\"images/logo.png\" onClick={ this.toggleCurrAppMenu } /></div>\r\n                <SearchBox />\r\n                <MainNavLinks />\r\n            </nav>);\r\n    }\r\n}","import React from 'react'\r\nexport default function UpdatesBox(props) {\r\n    return (\r\n        <div className={ 'updates-box ' + (props.modalData.type ? props.modalData.type : '') }>\r\n            { props.modalData.message }\r\n        </div>);\r\n}","import React from 'react'\r\nexport default class RegularModal extends React.Component {\r\n    state = {\r\n        isClosing: false\r\n    }\r\n\r\n    onModalClose = (event) => {\r\n        this.setState(() => {\r\n            setTimeout(() => this.props.onModalClose(event), 400);\r\n            return { isClosing: true };\r\n        })\r\n    }\r\n\r\n    onKeyUp = (event) => {\r\n        if (event.key === 'Escape') this.onModalClose();\r\n    }\r\n\r\n    componentDidMount() {\r\n        window.addEventListener('keyup', this.onKeyUp);\r\n    }\r\n    componentWillUnmount() {\r\n        window.removeEventListener('keyup', this.onKeyUp);\r\n    }\r\n\r\n    render() {\r\n\r\n        const DynamicComponent = this.props.modalData.component;\r\n        return (\r\n            <div className={ 'modal-wrapper' + (this.state.isClosing ? ' fade-out' : '') } onClick={ this.onModalClose }>\r\n                <div className=\"modal-content\" onClick={ (event) => event.stopPropagation() }>\r\n                    <DynamicComponent onModalClose={ this.onModalClose } transData={ this.props.modalData } />\r\n                </div>\r\n            </div>);\r\n    }\r\n}","import React from 'react'\r\nexport default function PageLoading() {\r\n    return (<div className=\"page-loading-screen flex auto-center\"><img alt='loading' src=\"./assets/images/loader.gif\" /></div>);\r\n}","import React from 'react'\r\nexport default class Confirmation extends React.Component {\r\n\r\n    onConfirm = () => {\r\n        this.props.onModalClose()\r\n        this.props.transData.onConfirmAction()\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className='confirmation-modal flex auto-center'>\r\n                <h4>{ this.props.transData.message }</h4>\r\n                <div className=\"confirmation-modal-btns\">\r\n                    <button className=\"simple-button cancel\" onClick={ this.props.onModalClose }>\r\n                        { this.props.transData.labels ? this.props.transData.labels.cancel : 'Cancel' }</button>\r\n                    <button className=\"simple-button confirm\" onClick={ this.onConfirm }>\r\n                        { this.props.transData.labels ? this.props.transData.labels.confirm : 'Confirm' }</button>\r\n                </div>\r\n            </div>);\r\n    }\r\n}","import React from 'react'\r\nimport eventBusService from '../services/eventBusService.js';\r\nimport UpdatesBox from './Modal/UpdatesBox.jsx';\r\nimport RegularModal from './Modal/RegularModal.jsx';\r\nimport PageLoading from './Modal/PageLoading.jsx';\r\nimport Confirmation from './Modal/Confirmation.jsx';\r\n\r\nexport default class Modal extends React.Component {\r\n    state = {\r\n        regularModalShown: null,\r\n        pageLoadingShown: null,\r\n        updatesBoxShown: null,\r\n        updatesBoxTimer: null,\r\n        confirmationShown: null\r\n    }\r\n\r\n    showModal = (data) => {\r\n        if (data.modalType === 'updatesBox') this.setUpdatesBox();\r\n        return this.setState({ [data.modalType + 'Shown']: data.props });\r\n    }\r\n\r\n    setUpdatesBox() {\r\n        if (this.state.updatesBoxTimer) {\r\n            clearTimeout(this.state.updatesBoxTimer);\r\n            this.setState({ updatesBoxTimer: null });\r\n        }\r\n        this.setState({ updatesBoxTimer: setTimeout(() => this.hideModal('updatesBox'), 2500) });\r\n    }\r\n\r\n    hideModal = (modalType) => {\r\n        this.setState({ [modalType + 'Shown']: null });\r\n    }\r\n\r\n    componentDidMount() {\r\n        eventBusService.on('callModal', this.showModal);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                { this.state.confirmationShown ? <RegularModal modalData={ { component: Confirmation, ...this.state.confirmationShown } } onModalClose={ () => this.hideModal('confirmation') } /> : '' }\r\n                { this.state.pageLoadingShown ? <PageLoading /> : '' }\r\n                { this.state.regularModalShown ? <RegularModal modalData={ this.state.regularModalShown } onModalClose={ () => this.hideModal('regularModal') } /> : '' }\r\n                { this.state.updatesBoxShown && this.state.updatesBoxTimer ? <UpdatesBox modalData={ this.state.updatesBoxShown } /> : '' }\r\n            </React.Fragment>);\r\n    }\r\n}","import React from 'react';\r\nimport { Route, Switch, Router } from 'react-router-dom';\r\nimport { createBrowserHistory } from 'history';\r\n\r\nimport './assets/css/main.css';\r\n\r\nimport Landing from './pages/Landing';\r\nimport About from './pages/About';\r\nimport NotFound from './pages/NotFound';\r\nimport BooksApp from './apps/Books/BooksApp';\r\nimport KeepApp from './apps/Keep/KeepApp';\r\nimport MailApp from './apps/Mail/MailApp';\r\nimport Navbar from './cmps/Navbar';\r\nimport Modal from './cmps/Modal';\r\n\r\nconst history = createBrowserHistory();\r\n\r\nclass App extends React.Component {\r\n    render() {\r\n        return (\r\n            <Router history={history}>\r\n                <Modal />\r\n                <Navbar />\r\n                <main>\r\n                    <Switch>\r\n                        <Route component={KeepApp} path=\"/keep\" exact></Route>\r\n                        <Route component={BooksApp} path=\"/books\"></Route>\r\n                        <Route component={MailApp} path=\"/mail\"></Route>\r\n                        <Route component={About} path=\"/about\" exact></Route>\r\n                        <Route component={Landing} path=\"/\" exact></Route>\r\n                        <Route component={NotFound} path=\"/\"></Route>\r\n                    </Switch>\r\n                </main>\r\n            </Router>\r\n        )\r\n    }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}